<!DOCTYPE html>
<html lang="en-US" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<meta http-equiv="Content-Type" content="UTF-8" />
<title>Big Data Spatial and Graph Overview</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)" />
<meta name="description" content="This chapter provides an overview of Oracle Big Data support for Oracle Spatial and Graph spatial, property graph, and multimedia analytics features." />
<meta name="dcterms.created" content="2017-10-02T15:13:12Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Big Data Spatial and Graph User&rsquo;s Guide and Reference" />
<meta name="dcterms.identifier" content="E67958-14" />
<meta name="dcterms.isVersionOf" content="BDSPA" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2015, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="http://docs.oracle.com/bigdata/bda49/index.html" title="Home" type="text/html" />
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Prev" href="big-data-spatial-whats-new.htm" title="Previous" type="text/html" />
<link rel="Next" href="using-big-data-spatial-graph-spatial-data.htm" title="Next" type="text/html" />
<link rel="alternate" href="BDSPA.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/fonts.css">
<link rel="stylesheet" href="../dcommon/css/foundation.css">
<link rel="stylesheet" href="../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css">
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
<script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-9FC0663B-21F9-497E-973C-E7199324C073"></a> <span id="PAGE" style="display:none;">7/15</span> <!-- End Header -->
<a id="BDSPA109"></a><a id="BDSPA108"></a>
<h1 id="BDSPA-GUID-9FC0663B-21F9-497E-973C-E7199324C073" class="sect1"><span class="enumeration_chapter">1</span> Big Data Spatial and Graph Overview</h1>
<div><span>This chapter provides an overview of Oracle Big Data support for Oracle Spatial and Graph spatial, property graph, and multimedia analytics features.</span></div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="big-data-spatial-overview.htm#GUID-3698A251-2EEA-4A33-A0E7-5D0BE3A529E5">About Big Data Spatial and Graph</a><br />
Oracle Big Data Spatial and Graph delivers advanced spatial and graph analytic capabilities to supported Apache Hadoop and NoSQL Database Big Data platforms.</li>
<li class="ulchildlink"><a href="big-data-spatial-overview.htm#GUID-811AED8B-3EDC-4436-934E-40BDC647CA6E">Spatial Features</a><br />
Spatial location information is a common element of Big Data.</li>
<li class="ulchildlink"><a href="big-data-spatial-overview.htm#GUID-50CFB991-4390-43E8-BD54-B40C79374F43">Property Graph Features</a><br />
Graphs manage networks of linked data as vertices, edges, and properties of the vertices and edges. Graphs are commonly used to model, store, and analyze relationships found in social networks, cyber security, utilities and telecommunications, life sciences and clinical data, and knowledge networks.</li>
<li class="ulchildlink"><a href="big-data-spatial-overview.htm#GUID-50BB6E30-BE2D-4D7D-B5A8-47EB82AD2F61">Multimedia Analytics Features</a><br />
The multimedia analytics feature of Oracle Big Data Spatial and Graph provides a framework for processing video and image data in Apache Hadoop. The framework enables distributed processing of video and image data.</li>
<li class="ulchildlink"><a href="big-data-spatial-overview.htm#GUID-637F22DB-9327-41EC-8FD9-D6A523F14225">Installing Oracle Big Data Spatial and Graph on an Oracle Big Data Appliance</a><br />
The Mammoth command-line utility for installing and configuring the Oracle Big Data Appliance software also installs the Oracle Big Data Spatial and Graph option, including the spatial, property graph, and multimedia capabilities.</li>
<li class="ulchildlink"><a href="big-data-spatial-overview.htm#GUID-9B24206D-3824-48A0-B5A9-7633930354EB">Installing and Configuring the Big Data Spatial Image Processing Framework</a><br />
Installing and configuring the Image Processing Framework depends upon the distribution being used.</li>
<li class="ulchildlink"><a href="big-data-spatial-overview.htm#GUID-99A7E77E-41CC-49B6-BF2C-FA3500419EDB">Installing and Configuring the Big Data Spatial Image Server</a><br />
You can access the image processing framework through the Oracle Big Data Spatial Image Server, which provides a web interface for loading and processing images.</li>
<li class="ulchildlink"><a href="big-data-spatial-overview.htm#GUID-A5CC1A7A-5E07-4CBE-A04E-58F15E3492C1">Installing the Oracle Big Data SpatialViewer Web Application</a><br />
To install the Oracle Big Data SpatialViewer web application (SpatialViewer), follow the instructions in this topic.</li>
<li class="ulchildlink"><a href="big-data-spatial-overview.htm#GUID-BDF9368E-C271-414D-9779-9F534977879F">Installing Property Graph Support on a CDH Cluster or Other Hardware</a><br />
You can use property graphs on either Oracle Big Data Appliance or commodity hardware.</li>
<li class="ulchildlink"><a href="big-data-spatial-overview.htm#GUID-49B3D52B-E524-4EAD-A42C-CCCC8E987990">Installing and Configuring Multimedia Analytics Support</a><br />
To use the Multimedia analytics feature, the video analysis framework must be installed and configured.</li>
</ul>
</div>
<a id="BDSPA110"></a>
<div class="props_rev_3"><a id="GUID-3698A251-2EEA-4A33-A0E7-5D0BE3A529E5"></a>
<h2 id="BDSPA-GUID-3698A251-2EEA-4A33-A0E7-5D0BE3A529E5" class="sect2"><span class="enumeration_section">1.1</span> About Big Data Spatial and Graph</h2>
<div>
<p>Oracle Big Data Spatial and Graph delivers advanced spatial and graph analytic capabilities to supported Apache Hadoop and NoSQL Database Big Data platforms.</p>
<p>The spatial features include support for data enrichment of location information, spatial filtering and categorization based on distance and location-based analysis, and spatial data processing for vector and raster processing of digital map, sensor, satellite and aerial imagery values, and APIs for map visualization.</p>
<p>The property graph features support Apache Hadoop HBase and Oracle NoSQL Database for graph operations, indexing, queries, search, and in-memory analytics.</p>
<p>The multimedia analytics features provide a framework for processing video and image data in Apache Hadoop, including built-in face recognition using OpenCV.</p>
</div>
</div>
<a id="BDSPA111"></a>
<div class="props_rev_3"><a id="GUID-811AED8B-3EDC-4436-934E-40BDC647CA6E"></a>
<h2 id="BDSPA-GUID-811AED8B-3EDC-4436-934E-40BDC647CA6E" class="sect2"><span class="enumeration_section">1.2</span> Spatial Features</h2>
<div>
<p>Spatial location information is a common element of Big Data.</p>
<p>Businesses can use spatial data as the basis for associating and linking disparate data sets. Location information can also be used to track and categorize entities based on proximity to another person, place, or object, or on their presence a particular area. Location information can facilitate location-specific offers to customers entering a particular geography, something known as <span class="italic">geo-fencing.</span> Georeferenced imagery and sensory data can be analyzed for a variety of business benefits.</p>
<p>The spatial features of Oracle Big Data Spatial and Graph support those use cases with the following kinds of services.</p>
<p>Vector Services:</p>
<ul style="list-style-type: disc;">
<li>
<p>Ability to associate documents and data with names, such as cities or states, or longitude/latitude information in spatial object definitions for a default administrative hierarchy</p>
</li>
<li>
<p>Support for text-based 2D and 3D geospatial formats, including GeoJSON files, Shapefiles, GML, and WKT, or you can use the Geospatial Data Abstraction Library (GDAL) to convert popular geospatial encodings such as Oracle SDO_Geometry, ST_Geometry, and other supported formats</p>
</li>
<li>
<p>An HTML5-based map client API and a sample console to explore, categorize, and view data in a variety of formats and coordinate systems</p>
</li>
<li>
<p>Topological and distance operations: Anyinteract, Inside, Contains, Within Distance, Nearest Neighbor, and others</p>
</li>
<li>
<p>Spatial indexing for fast retrieval of data</p>
</li>
</ul>
<p>Raster Services:</p>
<ul style="list-style-type: disc;">
<li>
<p>Support for many image file formats supported by GDAL and image files stored in HDFS</p>
</li>
<li>
<p>A sample console to view the set of images that are available</p>
</li>
<li>
<p>Raster operations, including, subsetting, georeferencing, mosaics, and format conversion</p>
</li>
</ul>
</div>
</div>
<a id="BDSPA112"></a>
<div class="props_rev_3"><a id="GUID-50CFB991-4390-43E8-BD54-B40C79374F43"></a>
<h2 id="BDSPA-GUID-50CFB991-4390-43E8-BD54-B40C79374F43" class="sect2"><span class="enumeration_section">1.3</span> Property Graph Features</h2>
<div>
<p>Graphs manage networks of linked data as vertices, edges, and properties of the vertices and edges. Graphs are commonly used to model, store, and analyze relationships found in social networks, cyber security, utilities and telecommunications, life sciences and clinical data, and knowledge networks.</p>
<p>Typical graph analyses encompass graph traversal, recommendations, finding communities and influencers, and pattern matching. Industries including, telecommunications, life sciences and healthcare, security, media and publishing can benefit from graphs.</p>
<p>The property graph features of Oracle Big Data Spatial and Graph support those use cases with the following capabilities:</p>
<ul style="list-style-type: disc;">
<li>
<p>A scalable graph database on Apache HBase and Oracle NoSQL Database</p>
</li>
<li>
<p>Developer-based APIs based upon Tinkerpop Blueprints, and Java graph APIs</p>
</li>
<li>
<p>Text search and query through integration with Apache Lucene and SolrCloud</p>
</li>
<li>
<p>Scripting languages support for Groovy and Python</p>
</li>
<li>
<p>A parallel, in-memory graph analytics engine</p>
</li>
<li>
<p>A fast, scalable suite of social network analysis functions that include ranking, centrality, recommender, community detection, path finding</p>
</li>
<li>
<p>Parallel bulk load and export of property graph data in Oracle-defined flat files format</p>
</li>
<li>
<p>Manageability through a Groovy-based console to execute Java and Tinkerpop Gremlin APIs</p>
</li>
</ul>
</div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="big-data-spatial-overview.htm#GUID-A7F12A95-3B1A-4F00-A2C9-983B042ABBF1">Property Graph Sizing Recommendations</a><br /></li>
</ul>
</div>
<a id="BDSPA114"></a><a id="BDSPA113"></a>
<div class="props_rev_3"><a id="GUID-A7F12A95-3B1A-4F00-A2C9-983B042ABBF1"></a>
<h3 id="BDSPA-GUID-A7F12A95-3B1A-4F00-A2C9-983B042ABBF1" class="sect3"><span class="enumeration_section">1.3.1</span> Property Graph Sizing Recommendations</h3>
<div>
<p>The following are recommendations for property graph installation.</p>
<div class="tblformal" id="GUID-A7F12A95-3B1A-4F00-A2C9-983B042ABBF1__GUID-8B3A3BAC-A115-4B86-9E9A-4EBAC045688E">
<p class="titleintable">Table 1-1 Property Graph Sizing Recommendations</p>
<table class="cellalignment333" title="Property Graph Sizing Recommendations" summary="Property graph sizing recommendations">
<thead>
<tr class="cellalignment324">
<th class="cellalignment386" id="d4851e413">Graph Size</th>
<th class="cellalignment387" id="d4851e416">Recommended Physical Memory to be Dedicated</th>
<th class="cellalignment388" id="d4851e419">Recommended Number of CPU Processors</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment324">
<td class="cellalignment389" id="d4851e424" headers="d4851e413">
<p>10 to 100M edges</p>
</td>
<td class="cellalignment390" headers="d4851e424 d4851e416">
<p>Up to 14 GB RAM</p>
</td>
<td class="cellalignment391" headers="d4851e424 d4851e419">
<p>2 to 4 processors, and up to 16 processors for more compute-intensive workloads</p>
</td>
</tr>
<tr class="cellalignment324">
<td class="cellalignment389" id="d4851e434" headers="d4851e413">
<p>100M to 1B edges</p>
</td>
<td class="cellalignment390" headers="d4851e434 d4851e416">
<p>14 GB to 100 GB RAM</p>
</td>
<td class="cellalignment391" headers="d4851e434 d4851e419">
<p>4 to 12 processors, and up to 16 to 32 processors for more compute-intensive workloads</p>
</td>
</tr>
<tr class="cellalignment324">
<td class="cellalignment389" id="d4851e444" headers="d4851e413">
<p>Over 1B edges</p>
</td>
<td class="cellalignment390" headers="d4851e444 d4851e416">
<p>Over 100 GB RAM</p>
</td>
<td class="cellalignment391" headers="d4851e444 d4851e419">
<p>12 to 32 processors, or more for especially compute-intensive workloads</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-50BB6E30-BE2D-4D7D-B5A8-47EB82AD2F61"></a>
<h2 id="BDSPA-GUID-50BB6E30-BE2D-4D7D-B5A8-47EB82AD2F61" class="sect2"><span class="enumeration_section">1.4</span> Multimedia Analytics Features</h2>
<div>
<p>The multimedia analytics feature of Oracle Big Data Spatial and Graph provides a framework for processing video and image data in Apache Hadoop. The framework enables distributed processing of video and image data.</p>
<p>A main use case is performing facial recognition in videos and images.</p>
</div>
</div>
<a id="BDSPA115"></a>
<div class="props_rev_3"><a id="GUID-637F22DB-9327-41EC-8FD9-D6A523F14225"></a>
<h2 id="BDSPA-GUID-637F22DB-9327-41EC-8FD9-D6A523F14225" class="sect2"><span class="enumeration_section">1.5</span> Installing Oracle Big Data Spatial and Graph on an Oracle Big Data Appliance</h2>
<div>
<p>The Mammoth command-line utility for installing and configuring the Oracle Big Data Appliance software also installs the Oracle Big Data Spatial and Graph option, including the spatial, property graph, and multimedia capabilities.</p>
<p>You can enable this option during an initial software installation, or afterward using the <code class="codeph">bdacli</code> utility.</p>
<p>To use Oracle NoSQL Database as a graph repository, you must have an Oracle NoSQL Database cluster.</p>
<p>To use Apache HBase as a graph repository, you must have an Apache Hadoop cluster.</p>
<div class="infoboxnotealso" id="GUID-637F22DB-9327-41EC-8FD9-D6A523F14225__GUID-EE55C406-EA81-4AD5-AD7D-A1EB49284DD6">
<p class="notep1">See Also:</p>
<p><a class="olink BIGOG76659" target="_blank" href="../BIGOG/mammoth.htm#BIGOG76659"><span class="italic">Oracle Big Data Appliance Owner's Guide</span></a> for software configuration instructions.</p>
</div>
</div>
</div>
<a id="BDSPA151"></a>
<div class="props_rev_3"><a id="GUID-9B24206D-3824-48A0-B5A9-7633930354EB"></a>
<h2 id="BDSPA-GUID-9B24206D-3824-48A0-B5A9-7633930354EB" class="sect2"><span class="enumeration_section">1.6</span> Installing and Configuring the Big Data Spatial Image Processing Framework</h2>
<div>
<p>Installing and configuring the Image Processing Framework depends upon the distribution being used.</p>
<ul style="list-style-type: disc;">
<li>
<p>The Oracle Big Data Appliance cluster distribution comes with a pre-installed setup, but you must follow few steps in <a href="big-data-spatial-overview.htm#GUID-D07DB9A7-0C4B-4024-996A-B60B7516A17D" title="The Oracle Big Data Appliance distribution comes with a pre-installed configuration, though you must ensure that the image processing framework has been installed.">Installing the Image Processing Framework for Oracle Big Data Appliance Distribution</a> to get it working.</p>
</li>
<li>
<p>For a commodity distribution, follow the instructions in <a href="big-data-spatial-overview.htm#GUID-F3C4C7C4-3F94-48E8-B2EA-04F2DE8AB22C" title="For Big Data Spatial and Graph in environments other than the Big Data Appliance, follow the instructions in this section.">Installing the Image Processing Framework for Other Distributions (Not Oracle Big Data Appliance)</a>.</p>
</li>
</ul>
<p>For both distributions:</p>
<ul style="list-style-type: disc;">
<li>
<p>You must download and compile PROJ libraries, as explained in <a href="big-data-spatial-overview.htm#GUID-2DC0ACEE-2922-46FD-9D84-9C774CBF232A">Getting and Compiling the Cartographic Projections Library</a>.</p>
</li>
<li>
<p>After performing the installation, verify it (see <a href="big-data-spatial-overview.htm#GUID-F8009F03-B147-469D-9480-8C33DCCBF61F" title="Several test scripts are provided to perform the following verification operations.">Post-installation Verification of the Image Processing Framework</a>).</p>
</li>
<li>
<p>If the cluster has security enabled, make sure that the user executing the jobs is in the <code class="codeph">princs</code> list and has an active Kerberos ticket.</p>
</li>
</ul>
</div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="big-data-spatial-overview.htm#GUID-2DC0ACEE-2922-46FD-9D84-9C774CBF232A">Getting and Compiling the Cartographic Projections Library</a><br /></li>
<li class="ulchildlink"><a href="big-data-spatial-overview.htm#GUID-D07DB9A7-0C4B-4024-996A-B60B7516A17D">Installing the Image Processing Framework for Oracle Big Data Appliance Distribution</a><br />
The Oracle Big Data Appliance distribution comes with a pre-installed configuration, though you must ensure that the image processing framework has been installed.</li>
<li class="ulchildlink"><a href="big-data-spatial-overview.htm#GUID-F3C4C7C4-3F94-48E8-B2EA-04F2DE8AB22C">Installing the Image Processing Framework for Other Distributions (Not Oracle Big Data Appliance)</a><br />
For Big Data Spatial and Graph in environments other than the Big Data Appliance, follow the instructions in this section.</li>
<li class="ulchildlink"><a href="big-data-spatial-overview.htm#GUID-F8009F03-B147-469D-9480-8C33DCCBF61F">Post-installation Verification of the Image Processing Framework</a><br />
Several test scripts are provided to perform the following verification operations.</li>
</ul>
</div>
<div class="props_rev_3"><a id="GUID-2DC0ACEE-2922-46FD-9D84-9C774CBF232A"></a>
<h3 id="BDSPA-GUID-2DC0ACEE-2922-46FD-9D84-9C774CBF232A" class="sect3"><span class="enumeration_section">1.6.1</span> Getting and Compiling the Cartographic Projections Library</h3>
<div>
<p>Before installing the Image Processing Framework, you must download the Cartographic Projections Library and perform several related operations.</p>
<ol>
<li>
<p>Download the PROJ.4 source code and datum shifting files:</p>
<pre dir="ltr">
$ wget http://download.osgeo.org/proj/proj-4.9.1.tar.gz
$ wget http://download.osgeo.org/proj/proj-datumgrid-1.5.tar.gz
</pre></li>
<li>
<p>Untar the source code, and extract the datum shifting files in the <code class="codeph">nad</code> subdirectory:</p>
<pre dir="ltr">
$ tar xzf proj-4.9.1.tar.gz
$ cd proj-4.9.1/nad
$ tar xzf ../../proj-datumgrid-1.5.tar.gz
$ cd ..
</pre></li>
<li>
<p>Configure, make, and install PROJ.4:</p>
<pre dir="ltr">
$ ./configure
$ make
$ sudo make install
$ cd ..
</pre>
<p><code class="codeph">libproj.so</code> is now available at <code class="codeph">/usr/local/lib/libproj.so</code>.</p>
</li>
<li>
<p>Copy the <code class="codeph">libproj.so</code> file in the spatial installation directory:</p>
<pre dir="ltr">
cp /usr/local/lib/libproj.so /opt/oracle/oracle-spatial-graph/spatial/raster/gdal/lib/libproj.so
</pre></li>
<li>
<p>Provide read and execute permissions for the <code class="codeph">libproj.so</code> library for all users</p>
<pre dir="ltr">
sudo chmod 755 /opt/oracle/oracle-spatial-graph/spatial/raster/gdal/lib/libproj.so
</pre></li>
</ol>
</div>
</div>
<a id="BDSPA152"></a>
<div class="props_rev_3"><a id="GUID-D07DB9A7-0C4B-4024-996A-B60B7516A17D"></a>
<h3 id="BDSPA-GUID-D07DB9A7-0C4B-4024-996A-B60B7516A17D" class="sect3"><span class="enumeration_section">1.6.2</span> Installing the Image Processing Framework for Oracle Big Data Appliance Distribution</h3>
<div>
<p>The Oracle Big Data Appliance distribution comes with a pre-installed configuration, though you must ensure that the image processing framework has been installed.</p>
<p>Be sure that the actions described in <a href="big-data-spatial-overview.htm#GUID-2DC0ACEE-2922-46FD-9D84-9C774CBF232A">Getting and Compiling the Cartographic Projections Library</a> have been performed, so that <code class="codeph">libproj.so</code> (<code class="codeph">PROJ.4</code>) is accessible to all users and is set up correctly.</p>
<p>For OBDA, ensure that the following directories exist:</p>
<ul style="list-style-type: disc;">
<li>
<p>SHARED_DIR (shared directory for all nodes in the cluster): <code class="codeph">/opt/shareddir</code></p>
</li>
<li>
<p>ALL_ACCESS_DIR (shared directory for all nodes in the cluster with Write access to the hadoop group): <code class="codeph">/opt/shareddir/spatial</code></p>
</li>
</ul>
</div>
</div>
<a id="BDSPA153"></a>
<div class="props_rev_3"><a id="GUID-F3C4C7C4-3F94-48E8-B2EA-04F2DE8AB22C"></a>
<h3 id="BDSPA-GUID-F3C4C7C4-3F94-48E8-B2EA-04F2DE8AB22C" class="sect3"><span class="enumeration_section">1.6.3</span> Installing the Image Processing Framework for Other Distributions (Not Oracle Big Data Appliance)</h3>
<div>
<p>For Big Data Spatial and Graph in environments other than the Big Data Appliance, follow the instructions in this section.</p>
</div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="big-data-spatial-overview.htm#GUID-68734DA5-BF29-4AC1-A7E0-CBCA426C2181">Prerequisites for Installing the Image Processing Framework for Other Distributions</a><br /></li>
<li class="ulchildlink"><a href="big-data-spatial-overview.htm#GUID-2AE6A832-0936-4CEF-8F87-53960911981E">Installing the Image Processing Framework for Other Distributions</a><br /></li>
</ul>
</div>
<a id="BDSPA154"></a>
<div class="props_rev_3"><a id="GUID-68734DA5-BF29-4AC1-A7E0-CBCA426C2181"></a>
<h4 id="BDSPA-GUID-68734DA5-BF29-4AC1-A7E0-CBCA426C2181" class="sect4"><span class="enumeration_section">1.6.3.1</span> Prerequisites for Installing the Image Processing Framework for Other Distributions</h4>
<div>
<ul style="list-style-type: disc;">
<li>
<p>Ensure that <code class="codeph">HADOOP_LIB_PATH</code> is under <code class="codeph">/usr/lib/hadoop</code>. If it is not there, find the path and use it as it your <code class="codeph">HADOOP_LIB_PATH</code>.</p>
</li>
<li>
<p>Install NFS.</p>
</li>
<li>
<p>Have at least one folder, referred in this document as SHARED_FOLDER, in the Resource Manager node accessible to every Node Manager node through NFS.</p>
</li>
<li>
<p>Provide write access to all the users involved in job execution and the yarn users to this SHARED_FOLDER</p>
</li>
<li>
<p>Download <code class="codeph">oracle-spatial-graph-&lt;version&gt;.x86_64.rpm</code> from the Oracle e-delivery web site.</p>
</li>
<li>
<p>Execute <code class="codeph">oracle-spatial-graph-&lt;version&gt;.x86_64.rpm</code> using the rpm command.</p>
</li>
<li>
<p>After rpm executes, verify that a directory structure created at <code class="codeph">/opt/oracle/oracle-spatial-graph/spatial/raster</code> contains these folders: <code class="codeph">console</code>, <code class="codeph">examples</code>, <code class="codeph">jlib</code>, <code class="codeph">gdal</code>, and <code class="codeph">tests</code>. Additionally, <code class="codeph">index.html</code> describes the content, and <code class="codeph">javadoc.zip</code> contains the Javadoc for the API..</p>
</li>
</ul>
</div>
</div>
<a id="BDSPA155"></a>
<div class="props_rev_3"><a id="GUID-2AE6A832-0936-4CEF-8F87-53960911981E"></a>
<h4 id="BDSPA-GUID-2AE6A832-0936-4CEF-8F87-53960911981E" class="sect4"><span class="enumeration_section">1.6.3.2</span> Installing the Image Processing Framework for Other Distributions</h4>
<div>
<ol>
<li class="stepexpand"><span>Make the <code class="codeph">libproj.so (Proj.4)</code> Cartographic Projections Library accessible to the users, as explained in <a href="big-data-spatial-overview.htm#GUID-2DC0ACEE-2922-46FD-9D84-9C774CBF232A">Getting and Compiling the Cartographic Projections Library</a>.</span></li>
<li class="stepexpand"><span>In the Resource Manager Node, copy the <code class="codeph">data</code> folder under <code class="codeph">/opt/oracle/oracle-spatial-graph/spatial/raster/gdal</code> into the SHARED_FOLDER as follows:</span>
<div>
<p><code class="codeph">cp -R /opt/oracle/oracle-spatial-graph/spatial/raster/gdal/data SHARED_FOLDER</code></p>
</div>
</li>
<li class="stepexpand"><span>Create a directory <code class="codeph">ALL_ACCESS_FOLDER</code> under <code class="codeph">SHARED_FOLDER</code> with write access for all users involved in job execution. Also consider the <code class="codeph">yarn</code> user in the write access because job results are written by this user. Group access may be used to configure this.</span>
<div>
<p>Go to the shared folder.</p>
<p><code class="codeph">cd SHARED_FOLDER</code></p>
<p>Create a new directory.</p>
<p><code class="codeph">mkdir ALL_ACCESS_FOLDER</code></p>
<p>Provide write access.</p>
<p><code class="codeph">chmod 777 ALL_ACCESS_FOLDER</code></p>
</div>
</li>
<li class="stepexpand"><span>Copy the <code class="codeph">data</code> folder under <code class="codeph">/opt/oracle/oracle-spatial-graph/spatial/raster/examples</code> into <code class="codeph">ALL_ACCESS_FOLDER</code>.</span>
<div>
<p><code class="codeph">cp -R /opt/oracle/oracle-spatial-graph/spatial/raster/examples/data ALL_ACCESS_FOLDER</code></p>
</div>
</li>
<li class="stepexpand"><span>Provide write access to the <code class="codeph">data/xmls</code> folder as follows (or just ensure that users executing the jobs, including tests and examples, have write access):</span>
<div>
<p><code class="codeph">chmod 777 ALL_ACCESS_FOLDER/data/xmls/</code></p>
</div>
</li>
</ol>
</div>
</div>
</div>
<a id="BDSPA157"></a>
<div class="props_rev_3"><a id="GUID-F8009F03-B147-469D-9480-8C33DCCBF61F"></a>
<h3 id="BDSPA-GUID-F8009F03-B147-469D-9480-8C33DCCBF61F" class="sect3"><span class="enumeration_section">1.6.4</span> Post-installation Verification of the Image Processing Framework</h3>
<div>
<p>Several test scripts are provided to perform the following verification operations.</p>
<ul style="list-style-type: disc;">
<li>
<p>Test the image loading functionality</p>
</li>
<li>
<p>Test test the image processing functionality</p>
</li>
<li>
<p>Test a processing class for slope calculation in a DEM and a map algebra operation</p>
</li>
<li>
<p>Verify the image processing of a single raster with no mosaic process (it includes a user-provided function that calculates hill shade in the mapping phase).</p>
</li>
<li>
<p>Test processing of two rasters using a mask operation</p>
</li>
</ul>
<p>Execute these scripts to verify a successful installation of image processing framework.</p>
<p>If the cluster has security enabled, make sure the current user is in the <code class="codeph">princs</code> list and has an active Kerberos ticket.</p>
<p>Make sure the user has write access to ALL_ACCESS_FOLDER and that it belongs to the owner group for this directory. It is recommended that jobs be executed in Resource Manager node for Big Data Appliance. If jobs are executed in a different node, then the default is the hadoop group.</p>
<p>For GDAL to work properly, the libraries must be available using $LD_LIBRARY_PATH. Make sure that the shared libraries path is set properly in your shell window before executing a job. For example:</p>
<pre dir="ltr">
export LD_LIBRARY_PATH=$ALLACCESSDIR/gdal/native
</pre></div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="big-data-spatial-overview.htm#GUID-FACAA424-C9F4-4AED-A419-BF765CF23B4F">Image Loading Test Script</a><br /></li>
<li class="ulchildlink"><a href="big-data-spatial-overview.htm#GUID-5CB3DFA9-0F11-489F-9B86-69BF073A6E3A">Image Processor Test Script (Mosaicking)</a><br /></li>
<li class="ulchildlink"><a href="big-data-spatial-overview.htm#GUID-7748654C-1A4E-4829-851F-5763829A4A51">Single-Image Processor Test Script</a><br /></li>
<li class="ulchildlink"><a href="big-data-spatial-overview.htm#GUID-9D00EE6B-AEBF-42F3-98BB-DE98DD99B07F">Image Processor DEM Test Script</a><br /></li>
<li class="ulchildlink"><a href="big-data-spatial-overview.htm#GUID-B5341B52-894D-4987-931B-B0F3EAC4836D">Multiple Raster Operation Test Script</a><br /></li>
</ul>
</div>
<a id="BDSPA421"></a>
<div class="props_rev_3"><a id="GUID-FACAA424-C9F4-4AED-A419-BF765CF23B4F"></a>
<h4 id="BDSPA-GUID-FACAA424-C9F4-4AED-A419-BF765CF23B4F" class="sect4"><span class="enumeration_section">1.6.4.1</span> Image Loading Test Script</h4>
<div>
<p>This script loads a set of six test rasters into the <code class="codeph">ohiftest</code> folder in HDFS, 3 rasters of byte data type and 3 bands, 1 raster (DEM) of float32 data type and 1 band, and 2 rasters of int32 data type and 1 band. No parameters are required for OBDA environments and a single parameter with the ALL_ACCESS_FOLDER value is required for non-OBDA environments.</p>
<p>Internally, the job creates a split for every raster to load. Split size depends on the block size configuration; for example, if a block size &gt;= 64MB is configured, 4 mappers will run; and as a result the rasters will be loaded in HDFS and a corresponding thumbnail will be created for visualization. An external image editor is required to visualize the thumbnails, and an output path of these thumbnails is provided to the users upon successful completion of the job.</p>
<p>The test script can be found here:</p>
<pre dir="ltr">
/opt/oracle/oracle-spatial-graph/spatial/raster/tests/runimageloader.sh
</pre>
<p>For ODBA environments, enter:</p>
<pre dir="ltr">
./runimageloader.sh
</pre>
<p>For non-ODBA environments, enter:</p>
<pre dir="ltr">
./runimageloader.sh ALL_ACCESS_FOLDER
</pre>
<p>Upon successful execution, the message <code class="codeph">GENERATED OHIF FILES ARE LOCATED IN HDFS UNDER</code> is displayed, with the path in HDFS where the files are located (this path depends on the definition of ALL_ACCESS_FOLDER) and a list of the created images and thumbnails on HDFS. The output may include:</p>
<pre dir="ltr">
&ldquo;THUMBNAILS CREATED ARE:
----------------------------------------------------------------------
total 13532
drwxr-xr-x 2 yarn yarn 4096 Sep 9 13:54 .
drwxr-xr-x 3 yarn yarn 4096 Aug 27 11:29 ..
-rw-r--r-- 1 yarn yarn 3214053 Sep 9 13:54 hawaii.tif.ohif.tif
-rw-r--r-- 1 yarn yarn 3214053 Sep 9 13:54 inputimageint32.tif.ohif.tif
-rw-r--r-- 1 yarn yarn 3214053 Sep 9 13:54 inputimageint32_1.tif.ohif.tif
-rw-r--r-- 1 yarn yarn 3214053 Sep 9 13:54 kahoolawe.tif.ohif.tif
-rw-r--r-- 1 yarn yarn 3214053 Sep 9 13:54 maui.tif.ohif.tif
-rw-r--r-- 1 yarn yarn 4182040 Sep 9 13:54 NapaDEM.tif.ohif.tif
YOU MAY VISUALIZE THUMBNAILS OF THE UPLOADED IMAGES FOR REVIEW FROM THE FOLLOWING PATH:
</pre>
<p>If the installation and configuration were not successful, then the output is not generated and a message like the following is displayed:</p>
<pre dir="ltr">
NOT ALL THE IMAGES WERE UPLOADED CORRECTLY, CHECK FOR HADOOP LOGS
</pre>
<p>The amount of memory required to execute mappers and reducers depends on the configured HDFS block size By default, 1 GB of memory is assigned for Java, but you can modify that and other properties in the <code class="codeph">imagejob.prop</code> file that is included in this test directory.</p>
</div>
</div>
<a id="BDSPA422"></a>
<div class="props_rev_3"><a id="GUID-5CB3DFA9-0F11-489F-9B86-69BF073A6E3A"></a>
<h4 id="BDSPA-GUID-5CB3DFA9-0F11-489F-9B86-69BF073A6E3A" class="sect4"><span class="enumeration_section">1.6.4.2</span> Image Processor Test Script (Mosaicking)</h4>
<div>
<p>This script executes the processor job by setting three source rasters of Hawaii islands and some coordinates that includes all three. The job will create a mosaic based on these coordinates and resulting raster should include the three rasters combined in a single one.</p>
<p><code class="codeph">runimageloader.sh</code> should be executed as a prerequisite, so that the source rasters exist in HDFS. These are 3 band rasters of byte data type.</p>
<p>No parameters are required for OBDA environments, and a single parameter "-s" with the ALL_ACCESS_FOLDER value is required for non-OBDA environments.</p>
<p>Additionally, if the output should be stored in HDFS, the "-o" parameters must be used to set the HDFS folder where the mosaic output will be stored.</p>
<p>Internally the job filters the tiles using the coordinates specified in the configuration input, xml, only the required tiles are processed in a mapper and finally in the reduce phase, all of them are put together into the resulting mosaic raster.</p>
<p>The test script can be found here:</p>
<pre dir="ltr">
/opt/oracle/oracle-spatial-graph/spatial/raster/tests/runimageprocessor.sh
</pre>
<p>For ODBA environments, enter:</p>
<pre dir="ltr">
./runimageprocessor.sh
</pre>
<p>For non-ODBA environments, enter:</p>
<pre dir="ltr">
./runimageprocessor.sh -s ALL_ACCESS_FOLDER
</pre>
<p>Upon successful execution, the message <code class="codeph">EXPECTED OUTPUT FILE IS: ALL_ACCESS_FOLDER/processtest/hawaiimosaic.tif</code> is displayed, with the path to the output mosaic file. The output may include:</p>
<pre dir="ltr">
EXPECTED OUTPUT FILE IS: ALL_ACCESS_FOLDER/processtest/hawaiimosaic.tif
total 9452
drwxrwxrwx 2 hdfs    hdfs    4096 Sep 10 09:12 .
drwxrwxrwx 9 zherena dba     4096 Sep  9 13:50 ..
-rwxrwxrwx 1 yarn    yarn 4741101 Sep 10 09:12 hawaiimosaic.tif

MOSAIC IMAGE GENERATED
----------------------------------------------------------------------
YOU MAY VISUALIZE THE MOSAIC OUTPUT IMAGE FOR REVIEW IN THE FOLLOWING PATH: ALL_ACCESS_FOLDER/processtest/hawaiimosaic.tif&rdquo;
</pre>
<p>If the installation and configuration were not successful, then the output is not generated and a message like the following is displayed:</p>
<pre dir="ltr">
MOSAIC WAS NOT SUCCESSFULLY CREATED, CHECK HADOOP LOGS TO REVIEW THE PROBLEM
</pre>
<p>To test the output storage in HDFS, use the following command</p>
<p>For ODBA environments, enter:</p>
<pre dir="ltr">
./runimageprocessor.sh -o hdfstest
</pre>
<p>For non-ODBA environments, enter:</p>
<pre dir="ltr">
./runimageprocessor.sh -s ALL_ACCESS_FOLDER -o hdfstest
</pre></div>
</div>
<div class="props_rev_3"><a id="GUID-7748654C-1A4E-4829-851F-5763829A4A51"></a>
<h4 id="BDSPA-GUID-7748654C-1A4E-4829-851F-5763829A4A51" class="sect4"><span class="enumeration_section">1.6.4.3</span> Single-Image Processor Test Script</h4>
<div>
<p>This script executes the processor job for a single raster, in this case is a DEM source raster of North Napa Valley. The purpose of this job is process the complete input by using the user processing classes configured for the mapping phase. This class calculates the hillshade of the DEM, and this is set to the output file. No mosaic operation is performed here.</p>
<p><code class="codeph">runimageloader.sh</code> should be executed as a prerequisite, so that the source raster exists in HDFS. This is 1 band of float 32 data type DEM rasters.</p>
<p>No parameters are required for OBDA environments, and a single parameter "-s" with the ALL_ACCESS_FOLDER value is required for non-OBDA environments.</p>
<p>The test script can be found here:</p>
<pre dir="ltr">
/opt/oracle/oracle-spatial-graph/spatial/raster/tests/runsingleimageprocessor.sh
</pre>
<p>For ODBA environments, enter:</p>
<pre dir="ltr">
./runsingleimageprocessor.sh
</pre>
<p>For non-ODBA environments, enter:</p>
<pre dir="ltr">
./runsingleimageprocessor.sh -s ALL_ACCESS_FOLDER
</pre>
<p>Upon successful execution, the message <code class="codeph">EXPECTED OUTPUT FILE: ALL_ACCESS_FOLDER/processtest/NapaSlope.tif</code> is displayed, with the path to the output DEM file. The output may include:</p>
<pre dir="ltr">
EXPECTED OUTPUT FILE: ALL_ACCESS_FOLDER/processtest/NapaDEM.tif
total 4808
drwxrwxrwx 2 hdfs    hdfs    4096 Sep 10 09:42 .
drwxrwxrwx 9 zherena dba     4096 Sep  9 13:50 ..
-rwxrwxrwx 1 yarn    yarn 4901232 Sep 10 09:42 NapaDEM.tif
IMAGE GENERATED
----------------------------------------------------------------------

YOU MAY VISUALIZE THE OUTPUT IMAGE FOR REVIEW IN THE FOLLOWING PATH: ALL_ACCESS_FOLDER/processtest/NapaDEM.tif&rdquo;
</pre>
<p>If the installation and configuration were not successful, then the output is not generated and a message like the following is displayed:</p>
<pre dir="ltr">
IMAGE WAS NOT SUCCESSFULLY CREATED, CHECK HADOOP LOGS TO REVIEW THE PROBLEM
</pre></div>
</div>
<div class="props_rev_3"><a id="GUID-9D00EE6B-AEBF-42F3-98BB-DE98DD99B07F"></a>
<h4 id="BDSPA-GUID-9D00EE6B-AEBF-42F3-98BB-DE98DD99B07F" class="sect4"><span class="enumeration_section">1.6.4.4</span> Image Processor DEM Test Script</h4>
<div>
<p>This script executes the processor job by setting a DEM source raster of North Napa Valley and some coordinates that surround it. The job will create a mosaic based on these coordinates and will also calculate the slope on it by setting a processing class in the mosaic configuration XML.</p>
<p><code class="codeph">runimageloader.sh</code> should be executed as a prerequisite, so that the source rasters exist in HDFS. This is 1 band of float 32 data type DEM raster.</p>
<p>No parameters are required for OBDA environments, and a single parameter "-s" with the ALL_ACCESS_FOLDER value is required for non-OBDA environments.</p>
<p>The test script can be found here:</p>
<pre dir="ltr">
/opt/oracle/oracle-spatial-graph/spatial/raster/tests/runimageprocessordem.sh
</pre>
<p>For ODBA environments, enter:</p>
<pre dir="ltr">
./runimageprocessordem.sh
</pre>
<p>For non-ODBA environments, enter:</p>
<pre dir="ltr">
./runimageprocessordem.sh -s ALL_ACCESS_FOLDER
</pre>
<p>Upon successful execution, the message <code class="codeph">EXPECTED OUTPUT FILE: ALL_ACCESS_FOLDER/processtest/NapaSlope.tif</code> is displayed, with the path to the slope output file. The output may include:</p>
<pre dir="ltr">
EXPECTED OUTPUT FILE: ALL_ACCESS_FOLDER/processtest/NapaSlope.tif
total 4808
drwxrwxrwx 2 hdfs    hdfs    4096 Sep 10 09:42 .
drwxrwxrwx 9 zherena dba     4096 Sep  9 13:50 ..
-rwxrwxrwx 1 yarn    yarn 4901232 Sep 10 09:42 NapaSlope.tif
MOSAIC IMAGE GENERATED
----------------------------------------------------------------------

YOU MAY VISUALIZE THE MOSAIC OUTPUT IMAGE FOR REVIEW IN THE FOLLOWING PATH: ALL_ACCESS_FOLDER/processtest/NapaSlope.tif&rdquo;
</pre>
<p>If the installation and configuration were not successful, then the output is not generated and a message like the following is displayed:</p>
<pre dir="ltr">
MOSAIC WAS NOT SUCCESSFULLY CREATED, CHECK HADOOP LOGS TO REVIEW THE PROBLEM
</pre>
<p>You may also test the &ldquo;if&rdquo; algebra function, where every pixel in this raster with value greater than 2500 will be replaced by the value you set in the command line using the &ldquo;&ndash;c&rdquo; flag. For example:</p>
<p>For ODBA environments, enter:</p>
<pre dir="ltr">
./runimageprocessordem.sh &ndash;c 8000
</pre>
<p>For non-ODBA environments, enter:</p>
<pre dir="ltr">
./runimageprocessordem.sh -s ALL_ACCESS_FOLDER &ndash;c 8000
</pre>
<p>You can visualize the output file and notice the difference between simple slope calculation and this altered output, where the areas with pixel values greater than 2500 look more clear.</p>
</div>
</div>
<div class="props_rev_3"><a id="GUID-B5341B52-894D-4987-931B-B0F3EAC4836D"></a>
<h4 id="BDSPA-GUID-B5341B52-894D-4987-931B-B0F3EAC4836D" class="sect4"><span class="enumeration_section">1.6.4.5</span> Multiple Raster Operation Test Script</h4>
<div>
<p>This script executes the processor job for two rasters that cover a very small area of North Napa Valley in the US state of California.</p>
<p>These rasters have the same MBR, pixel size, SRID, and data type, all of which are required for complex multiple raster operation processing. The purpose of this job is process both rasters by using the <span class="italic">mask</span> operation, which checks every pixel in the second raster to validate if its value is contained in the mask list. If it is, the output raster will have the pixel value of the first raster for this output cell; otherwise, the zero (0) value is set. No mosaic operation is performed here.</p>
<p><code class="codeph">runimageloader.sh</code> should be executed as a prerequisite, so that the source rasters exist in HDFS. These are 1 band of int32 data type rasters.</p>
<p>No parameters are required for OBDA environments. For non-ODBA environments, a single parameter <code class="codeph">-s</code> with the ALL_ACCESS_FOLDER value is required.</p>
<p>The test script can be found here:</p>
<pre dir="ltr">
/opt/oracle/oracle-spatial-graph/spatial/raster/tests/runimageprocessormultiple.sh
</pre>
<p>For ODBA environments, enter:</p>
<pre dir="ltr">
./runimageprocessormultiple.sh
</pre>
<p>For non-ODBA environments, enter:</p>
<pre dir="ltr">
./runimageprocessormultiple.sh -s ALL_ACCESS_FOLDER
</pre>
<p>Upon successful execution, the message <code class="codeph">EXPECTED OUTPUT FILE: ALL_ACCESS_FOLDER/processtest/MaskInt32Rasters.tif</code> is displayed, with the path to the mask output file. The output may include:</p>
<pre dir="ltr">
EXPECTED OUTPUT FILE: ALL_ACCESS_FOLDER/processtest/MaskInt32Rasters.tif
total 4808
drwxrwxrwx 2 hdfs    hdfs    4096 Sep 10 09:42 .
drwxrwxrwx 9 zherena dba     4096 Sep  9 13:50 ..
-rwxrwxrwx 1 yarn    yarn 4901232 Sep 10 09:42 MaskInt32Rasters.tif
IMAGE GENERATED
----------------------------------------------------------------------

YOU MAY VISUALIZE THE OUTPUT IMAGE FOR REVIEW IN THE FOLLOWING PATH: ALL_ACCESS_FOLDER/processtest/MaskInt32Rasters.tif&rdquo;
</pre>
<p>If the installation and configuration were not successful, then the output is not generated and a message like the following is displayed:</p>
<pre dir="ltr">
IMAGE WAS NOT SUCCESSFULLY CREATED, CHECK HADOOP LOGS TO REVIEW THE PROBLEM
</pre></div>
</div>
</div>
</div>
<a id="BDSPA158"></a>
<div class="props_rev_3"><a id="GUID-99A7E77E-41CC-49B6-BF2C-FA3500419EDB"></a>
<h2 id="BDSPA-GUID-99A7E77E-41CC-49B6-BF2C-FA3500419EDB" class="sect2"><span class="enumeration_section">1.7</span> Installing and Configuring the Big Data Spatial Image Server</h2>
<div>
<p>You can access the image processing framework through the Oracle Big Data Spatial Image Server, which provides a web interface for loading and processing images.</p>
<p>Installing and configuring the Spatial Image Server depends upon the distribution being used.</p>
<p>After you perform the installation, verify it.</p>
</div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="big-data-spatial-overview.htm#GUID-7109DF29-5FFD-4F0A-A8F6-91E442C9BA30">Installing and Configuring the Image Server for Oracle Big Data Appliance</a><br /></li>
<li class="ulchildlink"><a href="big-data-spatial-overview.htm#GUID-52BF56A9-8315-4B94-95B4-B27DAD38D7C8">Installing and Configuring the Image Server Web for Other Systems (Not Big Data Appliance)</a><br /></li>
<li class="ulchildlink"><a href="big-data-spatial-overview.htm#GUID-DEFC21DB-DFF2-4E7B-B92D-2F1EF920518F">Post-Installation Verification Example for the Image Server Console</a><br /></li>
<li class="ulchildlink"><a href="big-data-spatial-overview.htm#GUID-096031CB-6658-439A-9637-A221B3C79689">Using the Provided Image Server Web Services</a><br /></li>
</ul>
</div>
<a id="BDSPA159"></a>
<div class="props_rev_3"><a id="GUID-7109DF29-5FFD-4F0A-A8F6-91E442C9BA30"></a>
<h3 id="BDSPA-GUID-7109DF29-5FFD-4F0A-A8F6-91E442C9BA30" class="sect3"><span class="enumeration_section">1.7.1</span> Installing and Configuring the Image Server for Oracle Big Data Appliance</h3>
<div>
<p>To perform an automatic installation using the provided script, you can perform these steps:</p>
<ol>
<li>
<p>Run the following script:</p>
<pre dir="ltr">
sudo /opt/oracle/oracle-spatial-graph/spatial/configure-server/install-bdsg-consoles.sh
</pre>
<p>If the active nodes have changed since the installation, update the configuration in the web console.</p>
</li>
<li>
<p>Start the server:</p>
<pre dir="ltr">
cd /opt/oracle/oracle-spatial-graph/spatial/web-server
sudo ./start-server.sh
</pre>
<p>If any errors occur, see the the README file located in <code class="codeph">/opt/oracle/oracle-spatial-graph/spatial/configure-server</code>.</p>
</li>
</ol>
<p>The preceding instructions configure the entire server. If no further configuration is required, you can go directly to <a href="big-data-spatial-overview.htm#GUID-DEFC21DB-DFF2-4E7B-B92D-2F1EF920518F">Post-Installation Verification Example for the Image Server Console</a>.</p>
<p>If you need more information or need to perform other actions, see the following topics.</p>
</div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="big-data-spatial-overview.htm#GUID-BB9BAAE7-ED2D-451A-83D2-DAF0A1789A8A">Prerequisites for Performing a Manual Installation</a><br /></li>
<li class="ulchildlink"><a href="big-data-spatial-overview.htm#GUID-04A4C3B8-C18C-4303-8E48-6C2300908769">Installing Dependencies on the Image Server Web on an Oracle Big Data Appliance</a><br /></li>
<li class="ulchildlink"><a href="big-data-spatial-overview.htm#GUID-C82716E9-0CE4-4238-B7A9-6F46CEF90A1D">Configuring the Environment for Big Data Appliance</a><br /></li>
</ul>
</div>
<a id="BDSPA160"></a>
<div class="props_rev_3"><a id="GUID-BB9BAAE7-ED2D-451A-83D2-DAF0A1789A8A"></a>
<h4 id="BDSPA-GUID-BB9BAAE7-ED2D-451A-83D2-DAF0A1789A8A" class="sect4"><span class="enumeration_section">1.7.1.1</span> Prerequisites for Performing a Manual Installation</h4>
<div>
<div class="section">
<p>Ensure that you have the prerequisite software installed.</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Download a web server like Jetty or Tomcat onto the Oracle DBA Resource Manager node.</span></li>
<li class="stepexpand"><span>Unzip the <code class="codeph">imageserver.war</code> file into the web server <code class="codeph">webapps</code> directory as follows: :</span>
<div>
<p><code class="codeph">unzip /opt/oracle/oracle-spatial-graph/spatial/jlib/imageserver.war -d WEB_SERVER_HOME/webapps/imageserver</code></p>
<div class="infobox-note" id="GUID-BB9BAAE7-ED2D-451A-83D2-DAF0A1789A8A__GUID-906518B8-7B42-4FD9-AC37-D874220029B6">
<p class="notep1">Note:</p>
<p>The directory or location under which you unzip the file is known as <code class="codeph">WEB_SERVER_HOME</code> in this procedure.</p>
</div>
</div>
</li>
<li class="stepexpand"><span>Copy Hadoop dependencies as follows:</span>
<div>
<p><code class="codeph">cp /opt/cloudera/parcels/CDH/lib/hadoop/client/* WEB_SERVER_HOME/webapps/imageserver/WEB-INF/lib/</code></p>
<div class="infobox-note" id="GUID-BB9BAAE7-ED2D-451A-83D2-DAF0A1789A8A__GUID-2567CE14-F6F7-4E72-A6C0-DFD14D53954A">
<p class="notep1">Note:</p>
<p>If the installation of the web serveris done on a non-Oracle DBA cluster, then replace <code class="codeph">/opt/cloudera/parcels/CDH/lib/hadoop/</code> with the actual Hadoop library path, which by default is <code class="codeph">/usr/lib/hadoop</code>.</p>
</div>
</div>
</li>
</ol>
</div>
</div>
<a id="BDSPA161"></a>
<div class="props_rev_3"><a id="GUID-04A4C3B8-C18C-4303-8E48-6C2300908769"></a>
<h4 id="BDSPA-GUID-04A4C3B8-C18C-4303-8E48-6C2300908769" class="sect4"><span class="enumeration_section">1.7.1.2</span> Installing Dependencies on the Image Server Web on an Oracle Big Data Appliance</h4>
<div>
<div class="section">
<ol>
<li>
<p>Copy the <code class="codeph">asm-3.1.jar</code> file under <code class="codeph">/opt/oracle/oracle-spatial-graph/spatial/raster/jlib/asm-3.1.jar</code> to <code class="codeph">WEB_SDERVER_HOME/webapps/imageserver/WEB-INF/lib</code>.</p>
<div class="infobox-note" id="GUID-04A4C3B8-C18C-4303-8E48-6C2300908769__GUID-265BC75B-5A21-414A-9F49-84E1703311BC">
<p class="notep1">Note:</p>
<p>The <code class="codeph">jersey-core*</code> jars will be duplicated at <code class="codeph">WEB_SERVER_HOME/webapps/imageserver/WEB-INF/lib</code>. Make sure you remove the old ones and leave just <code class="codeph">jersey-core-1.17.1.jar</code> in the folder, as in the next step.</p>
</div>
</li>
<li>
<p>Enter the following command:</p>
<pre dir="ltr">
ls -lat jersey-core*
</pre></li>
<li>
<p>Delete the listed libraries, except do <span class="bold">not</span> delete <code class="codeph">jersey-core-1.17.1.jar</code>.</p>
</li>
<li>
<p>In the same directory (<code class="codeph">WEB_SERVER_HOME/webapps/imageserver/WEB-INF/lib</code>), delete the <code class="codeph">xercesImpl</code> and <code class="codeph">servlet</code> jar files:</p>
<pre dir="ltr">
rm xercesImpl*
rm servlet*
</pre></li>
<li>
<p>Start the web server</p>
<p>If you need to change the port, specify it. For example, in the case of the Jetty server, set <code class="codeph">jetty.http.port=8081</code>.</p>
<p>Ignore any warnings, such as the following:</p>
<pre dir="ltr">
java.lang.UnsupportedOperationException:  setXIncludeAware is not supported on this JAXP implementation or earlier: class oracle.xml.jaxp.JXDocumentBuilderFactory
</pre></li>
</ol>
</div>
<!-- class="section" --></div>
</div>
<a id="BDSPA162"></a>
<div class="props_rev_3"><a id="GUID-C82716E9-0CE4-4238-B7A9-6F46CEF90A1D"></a>
<h4 id="BDSPA-GUID-C82716E9-0CE4-4238-B7A9-6F46CEF90A1D" class="sect4"><span class="enumeration_section">1.7.1.3</span> Configuring the Environment for Big Data Appliance</h4>
<div>
<div class="section">
<ol>
<li>
<p>Type the <code class="codeph">http://<span class="codeinlineitalic">thehost</span>:8045/imageserver</code> address in your browser address bar to open the web console.</p>
</li>
<li>
<p>From the Administrator tab, then Configuration tab, in the <span class="bold">Hadoop Configuration Parameters</span> section, depending on the cluster configuration change three properties:</p>
<ol>
<li>
<p><code class="codeph">fs.defaultFS</code>: Type the active <code class="codeph">namenode</code> of your cluster in the format <code class="codeph">hdfs://&lt;namenode&gt;:8020</code> (Check with the administrator for this information).</p>
</li>
<li>
<p><code class="codeph">yarn.resourcemanager.scheduler.address</code>: Active Resource manager of your cluster. <code class="codeph">&lt;shcedulername&gt;:8030.</code> This is the Scheduler address.</p>
</li>
<li>
<p><code class="codeph">yarn.resourcemanager.address</code>: Active Resource Manager address in the format <code class="codeph">&lt;resourcename&gt;:8032</code></p>
</li>
</ol>
<div class="infobox-note" id="GUID-C82716E9-0CE4-4238-B7A9-6F46CEF90A1D__GUID-85DFB9EC-0295-443C-82AB-8593090D19B6">
<p class="notep1">Note:</p>
<p>Keep the default values for the rest of the configuration. They are pre-loaded for your Oracle Big Data Appliance cluster environment.</p>
</div>
</li>
<li>
<p>Click <span class="bold">Apply Changes</span> to save the changes.</p>
<div class="infoboxnotealso" id="GUID-C82716E9-0CE4-4238-B7A9-6F46CEF90A1D__GUID-7164CC14-C275-46D9-8316-695B2CAB8D2E">
<p class="notep1">Tip:</p>
<p>You can review the missing configuration information under the Hadoop Loader tab of the console.</p>
</div>
</li>
</ol>
</div>
<!-- class="section" --></div>
</div>
</div>
<a id="BDSPA163"></a>
<div class="props_rev_3"><a id="GUID-52BF56A9-8315-4B94-95B4-B27DAD38D7C8"></a>
<h3 id="BDSPA-GUID-52BF56A9-8315-4B94-95B4-B27DAD38D7C8" class="sect3"><span class="enumeration_section">1.7.2</span> Installing and Configuring the Image Server Web for Other Systems (Not Big Data Appliance)</h3>
<div>
<p>To install and configure the image server web for other systems (not Big Data Appliance), see these topics.</p>
</div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="big-data-spatial-overview.htm#GUID-D028656E-56EE-45EC-9370-3F2493C36FA9">Prerequisites for Installing the Image Server on Other Systems</a><br /></li>
<li class="ulchildlink"><a href="big-data-spatial-overview.htm#GUID-6B8A73FA-D3C2-4900-8488-228230411C70">Installing the Image Server Web on Other Systems</a><br /></li>
<li class="ulchildlink"><a href="big-data-spatial-overview.htm#GUID-BB6860C2-6E8A-48E9-9B50-7544CBF2E5AB">Configuring the Environment for Other Systems</a><br /></li>
</ul>
</div>
<a id="BDSPA164"></a>
<div class="props_rev_3"><a id="GUID-D028656E-56EE-45EC-9370-3F2493C36FA9"></a>
<h4 id="BDSPA-GUID-D028656E-56EE-45EC-9370-3F2493C36FA9" class="sect4"><span class="enumeration_section">1.7.2.1</span> Prerequisites for Installing the Image Server on Other Systems</h4>
<div>
<p>Before installing the image server on other systems, you must install the image processing framework as specified in <a href="big-data-spatial-overview.htm#GUID-F3C4C7C4-3F94-48E8-B2EA-04F2DE8AB22C" title="For Big Data Spatial and Graph in environments other than the Big Data Appliance, follow the instructions in this section.">Installing the Image Processing Framework for Other Distributions (Not Oracle Big Data Appliance)</a>.</p>
</div>
</div>
<a id="BDSPA165"></a>
<div class="props_rev_3"><a id="GUID-6B8A73FA-D3C2-4900-8488-228230411C70"></a>
<h4 id="BDSPA-GUID-6B8A73FA-D3C2-4900-8488-228230411C70" class="sect4"><span class="enumeration_section">1.7.2.2</span> Installing the Image Server Web on Other Systems</h4>
<div>
<p>The steps to install the image server web on other systems are the same as for installing it on BDA.</p>
<ul style="list-style-type: disc;">
<li>
<p>Follow the instructions specified in <span class="q">"<a href="big-data-spatial-overview.htm#GUID-BB9BAAE7-ED2D-451A-83D2-DAF0A1789A8A">Prerequisites for Performing a Manual Installation</a>."</span></p>
</li>
<li>
<p>Follow the instructions specified in <span class="q">"<a href="big-data-spatial-overview.htm#GUID-04A4C3B8-C18C-4303-8E48-6C2300908769">Installing Dependencies on the Image Server Web on an Oracle Big Data Appliance</a>."</span></p>
</li>
<li>
<p>Follow the instructions specified in <span class="q">"<a href="big-data-spatial-overview.htm#GUID-BB6860C2-6E8A-48E9-9B50-7544CBF2E5AB">Configuring the Environment for Other Systems</a>."</span></p>
</li>
</ul>
</div>
</div>
<a id="BDSPA166"></a>
<div class="props_rev_3"><a id="GUID-BB6860C2-6E8A-48E9-9B50-7544CBF2E5AB"></a>
<h4 id="BDSPA-GUID-BB6860C2-6E8A-48E9-9B50-7544CBF2E5AB" class="sect4"><span class="enumeration_section">1.7.2.3</span> Configuring the Environment for Other Systems</h4>
<div>
<div class="section">
<ol>
<li>
<p>Configure the environment as described in <a href="big-data-spatial-overview.htm#GUID-C82716E9-0CE4-4238-B7A9-6F46CEF90A1D">Configuring the Environment for Big Data Appliance</a></p>
, <span class="bold"><span class="italic">and then continue with the following steps</span></span>.</li>
<li>
<p>From the <span>Configuration</span> tab in the <span class="bold">Global Init Parameters</span> section, depending on the cluster configuration change these properties</p>
<ol>
<li>
<p><code class="codeph">shared.gdal.data</code>: Specify the gdal shared data folder. Follow the instructions in <a href="big-data-spatial-overview.htm#GUID-F3C4C7C4-3F94-48E8-B2EA-04F2DE8AB22C" title="For Big Data Spatial and Graph in environments other than the Big Data Appliance, follow the instructions in this section.">Installing the Image Processing Framework for Other Distributions (Not Oracle Big Data Appliance)</a>&nbsp;.</p>
</li>
<li>
<p><code class="codeph">gdal.lib</code>: Location of the gdal <code class="codeph">.so</code> libraries.</p>
</li>
<li>
<p><code class="codeph">start</code>: Specify a shared folder to start browsing the images. This folder must be shared between the cluster and NFS mountpoint (SHARED_FOLDER).</p>
</li>
<li>
<p><code class="codeph">saveimages</code>: Create a child folder named <code class="codeph">saveimages</code> under&nbsp;<code class="codeph">start</code>&nbsp;(SHARED-FOLDER) with full write access. For example, if <code class="codeph">start=/home</code>, then&nbsp;<code class="codeph">saveimages=/home/saveimages</code>.</p>
</li>
<li>
<p><code class="codeph">nfs.mountpoint</code>: If the cluster requires a mount point to access the SHARED_FOLDER, specify a mount point. For example,&nbsp;<code class="codeph">/net/home</code>. Otherwise, leave it blank.</p>
</li>
</ol>
</li>
<li>
<p>From the <span>Configuration</span> tab in the <span class="bold">Hadoop Configuration Parameters</span> section, update the following property:</p>
<ol>
<li>
<p><code class="codeph">yarn.application.classpath</code>: The classpath for the Hadoop to find the required jars and dependencies. Usually this is under <code class="codeph">/usr/lib/hadoop</code>. For example:</p>
<pre dir="ltr">
/etc/hadoop/conf/,/usr/lib/hadoop/*,/usr/lib/hadoop/lib/*,/usr/lib/hadoop-hdfs/*,/usr/lib/hadoop-hdfs/lib/*,/usr/lib/hadoop-yarn/*,/usr/lib/hadoop-yarn/lib/*,/usr/lib/hadoop-mapreduce/*,/usr/lib/hadoop-mapreduce/lib/*
</pre></li>
</ol>
<div class="infobox-note" id="GUID-BB6860C2-6E8A-48E9-9B50-7544CBF2E5AB__GUID-300D0A31-3D79-4FD6-9B98-390DA25C0F3C">
<p class="notep1">Note:</p>
<p>Keep the default values for the rest of the configuration.</p>
</div>
</li>
<li>
<p>Click <span class="bold">Apply Changes</span> to save the changes.</p>
<div class="infoboxnotealso" id="GUID-BB6860C2-6E8A-48E9-9B50-7544CBF2E5AB__GUID-786273BE-F1C0-403E-BCCF-42E787EA1F3A">
<p class="notep1">Tip:</p>
<p>You can review any missing configuration information under the Hadoop Loader tab of the console.</p>
</div>
</li>
</ol>
</div>
<!-- class="section" --></div>
</div>
</div>
<a id="BDSPA167"></a>
<div class="props_rev_3"><a id="GUID-DEFC21DB-DFF2-4E7B-B92D-2F1EF920518F"></a>
<h3 id="BDSPA-GUID-DEFC21DB-DFF2-4E7B-B92D-2F1EF920518F" class="sect3"><span class="enumeration_section">1.7.3</span> Post-Installation Verification Example for the Image Server Console</h3>
<div>
<p>In this example, you will:</p>
<ul style="list-style-type: disc;">
<li>
<p>Load the images from local server to HDFS Hadoop cluster.</p>
</li>
<li>
<p>Run a job to create a mosaic image file and a catalog with several images.</p>
</li>
<li>
<p>View the mosaic image.</p>
</li>
</ul>
</div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="big-data-spatial-overview.htm#GUID-79375E95-7528-4353-9B0D-2C60DD45C8A4">Loading Images from the Local Server to the HDFS Hadoop Cluster</a><br /></li>
<li class="ulchildlink"><a href="big-data-spatial-overview.htm#GUID-AB575597-72EB-4C70-B9C2-EC57A5C25BF9">Creating a Mosaic Image and Catalog</a><br /></li>
<li class="ulchildlink"><a href="big-data-spatial-overview.htm#GUID-496543D4-B8DB-4F50-A0AC-99E6AB07DDDE">Creating a Mosaic Directly from the Globe</a><br /></li>
<li class="ulchildlink"><a href="big-data-spatial-overview.htm#GUID-B0FE7112-6744-40E0-892A-C90D823E75C9">Creating a Slope Image from the Globe</a><br /></li>
<li class="ulchildlink"><a href="big-data-spatial-overview.htm#GUID-995D4896-C2FA-4C95-B92E-06A8B5FF7FA6">Creating an Image Using Multiple-Raster Algebra Operations</a><br /></li>
<li class="ulchildlink"><a href="big-data-spatial-overview.htm#GUID-CC0BF90C-D661-43C6-8E1D-4C0885DD1C0B">Removing Identical Rasters</a><br /></li>
</ul>
</div>
<a id="BDSPA168"></a>
<div class="props_rev_3"><a id="GUID-79375E95-7528-4353-9B0D-2C60DD45C8A4"></a>
<h4 id="BDSPA-GUID-79375E95-7528-4353-9B0D-2C60DD45C8A4" class="sect4"><span class="enumeration_section">1.7.3.1</span> Loading Images from the Local Server to the HDFS Hadoop Cluster</h4>
<div>
<ol>
<li class="stepexpand"><span>Open the console: <code class="codeph">http://&lt;oracle_big_data_spatial_vector_console&gt;:8045</code>.</span></li>
<li class="stepexpand"><span>Click the <span class="bold">Raster</span> tab.</span></li>
<li class="stepexpand"><span>Click <span class="bold">Select File or Path</span> and browse to the demo folder that contains a set of Hawaii images (<code class="codeph">/opt/shareddir/spatial/data/rasters</code>).</span></li>
<li class="stepexpand"><span>Select the <code class="codeph">rasters</code> folder and click <span class="bold">Load images</span>.</span>
<div>
<p>Wait for the message, &ldquo;Images loaded successfully&rdquo;.</p>
</div>
</li>
</ol>
<div class="section">
<div class="infobox-note" id="GUID-79375E95-7528-4353-9B0D-2C60DD45C8A4__GUID-D49EE463-80B9-4708-A20D-D306FCB1DBEC">
<p class="notep1">Note:</p>
<p>If you cannot find the raster files, you can copy them to the shared directory folder created during the installation: check the Admin tab for the directory location, then copy the raster files into it.</p>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="BDSPA169"></a>
<div class="props_rev_3"><a id="GUID-AB575597-72EB-4C70-B9C2-EC57A5C25BF9"></a>
<h4 id="BDSPA-GUID-AB575597-72EB-4C70-B9C2-EC57A5C25BF9" class="sect4"><span class="enumeration_section">1.7.3.2</span> Creating a Mosaic Image and Catalog</h4>
<div>
<ol>
<li class="stepexpand"><span>Go to the <span class="bold">Raster Processing</span> tab.</span></li>
<li class="stepexpand"><span>From the Catalog menu select <span class="bold"><code class="codeph">Catalog</code></span> &gt; <span class="bold"><code class="codeph">New Catalog</code></span> &gt; <span class="bold"><code class="codeph">HDFS Catalog</code></span>.</span>
<div>
<p>A new catalog is created.</p>
</div>
</li>
<li class="stepexpand"><span>From the Imagery menu select <span class="bold"><code class="codeph">Imagery</code></span> &gt; <span class="bold"><code class="codeph">Add hdfs image</code></span>.</span></li>
<li class="stepexpand"><span>Browse the HDFS host and add images.</span>
<div>
<p>A new file tree gets created with all the images you just loaded from your host.</p>
</div>
</li>
<li class="stepexpand"><span>Browse the <code class="codeph">newdata</code> folder under hdfs and verify the images.</span></li>
<li class="stepexpand"><span>Select the images listed in the pre-visualizer and add click <span class="bold"><code class="codeph">Add</code></span>.</span>
<div>
<p>The images are added to the bottom sub-panel.</p>
</div>
</li>
<li class="stepexpand"><span>Click <span class="bold"><code class="codeph">Add images</code></span>.</span>
<div>
<p>The images are added to the main catalog.</p>
</div>
</li>
<li class="stepexpand"><span>Save the catalog.</span></li>
<li class="stepexpand"><span>From the Imagery menu select <span class="bold"><code class="codeph">Imagery</code></span> &gt; <span class="bold"><code class="codeph">Mosaic</code></span>.</span></li>
<li class="stepexpand"><span>Copy the <code class="codeph">testFS.xml</code> file from <code class="codeph">/opt/shareddir/spatial/data/xmls</code> to your $HOME directory.</span></li>
<li class="stepexpand"><span>Click <span class="bold">Load default configuration file</span>, browse to the default home directory, and select <code class="codeph">testFS.xml</code>.</span>
<div>
<div class="infobox-note" id="GUID-AB575597-72EB-4C70-B9C2-EC57A5C25BF9__GUID-427F0D98-9326-4B0C-B839-BF0CD08D4363">
<p class="notep1">Note:</p>
<p>The default configuration file <code class="codeph">testFS.xml</code> is included in the demo.</p>
</div>
</div>
</li>
<li class="stepexpand"><span>Click <span class="bold">Create Mosaic</span>.</span>
<div>
<p>Wait for the image to be created.</p>
</div>
</li>
<li class="stepexpand"><span>Optionally, to download and store the image, click <span class="bold">Download</span>.</span></li>
</ol>
</div>
</div>
<div class="props_rev_3"><a id="GUID-496543D4-B8DB-4F50-A0AC-99E6AB07DDDE"></a>
<h4 id="BDSPA-GUID-496543D4-B8DB-4F50-A0AC-99E6AB07DDDE" class="sect4"><span class="enumeration_section">1.7.3.3</span> Creating a Mosaic Directly from the Globe</h4>
<div>
<ol>
<li class="stepexpand"><span>Go to the <span class="bold"><code class="codeph">Hadoop Raster Viewer</code></span> tab.</span></li>
<li class="stepexpand"><span>Click <span class="bold">Refresh Footprint</span> and wait until all footprints are displayed on the panel.</span></li>
<li class="stepexpand"><span>Click <span class="bold">Select Footprints</span> , then select the desired area, zooming in or out as necessary.</span></li>
<li class="stepexpand"><span>Remove or ignore rasters as necessary.</span>
<div>
<p>If identical rasters are in the result, they are shown in yellow</p>
</div>
</li>
<li class="stepexpand"><span>Right-click on the map and select <span class="bold">Generate Mosaic</span>.</span></li>
<li class="stepexpand"><span>Specify the output folder in which to place the mosaic, or load an existing configuration file.</span></li>
<li class="stepexpand"><span>If you want to add an operation on every pixel in the mosaic, click <span class="bold">Advanced Configuration</span>..</span></li>
<li class="stepexpand"><span>Click <span class="bold">Create Mosaic</span>, and wait for the result.</span></li>
<li class="stepexpand"><span>If you need to remove the selection, click the red circle in the upper-left corner of the map.</span>
<div>
<div class="infobox-note" id="GUID-496543D4-B8DB-4F50-A0AC-99E6AB07DDDE__GUID-427F0D98-9326-4B0C-B839-BF0CD08D4363">
<p class="notep1">Note:</p>
<p>If you requested the mosaic to be created on HDFS, you must wait until the image is loaded on HDFS.</p>
</div>
</div>
</li>
<li class="stepexpand"><span>Optionally, to download and view the image, click <span class="bold">Download</span>.</span></li>
</ol>
</div>
</div>
<div class="props_rev_3"><a id="GUID-B0FE7112-6744-40E0-892A-C90D823E75C9"></a>
<h4 id="BDSPA-GUID-B0FE7112-6744-40E0-892A-C90D823E75C9" class="sect4"><span class="enumeration_section">1.7.3.4</span> Creating a Slope Image from the Globe</h4>
<div>
<ol>
<li class="stepexpand"><span>Go to (or stay on) the <code class="codeph">Hadoop Raster Viewer</code> tab.</span></li>
<li class="stepexpand"><span>Click <span class="bold">Refresh Footprint</span> and wait until all footprints are displayed on the panel.</span></li>
<li class="stepexpand"><span>Remove or ignore rasters as necessary.</span>
<div>
<p>If identical rasters are in the result, they are shown in yellow</p>
</div>
</li>
<li class="stepexpand"><span>Right-click on the Image and select <span class="bold">Process Image(No Mosaic)</span>.</span></li>
<li class="stepexpand"><span>Specify the output folder in which to place the slope image, or load an existing configuration file.</span></li>
<li class="stepexpand"><span>6. Select the proper Pixel Type. (Usually these images are Float 32 Bits.)</span></li>
<li class="stepexpand"><span>7. Add a Process class by clicking <span class="bold">Add Process Class</span>. The framework provides a default process class for slope: <code class="codeph">oracle.spatial.hadoop.imageprocessor.process.ImageSlope</code></span></li>
<li class="stepexpand"><span>If you want to add an operation on every pixel in the mosaic, click <span class="bold">Advanced Configuration</span>.</span></li>
<li class="stepexpand"><span>Click <span class="bold">Create Mosaic</span>, and wait for the result.</span></li>
<li class="stepexpand"><span>I10. If you need to generate another slope, click <span class="bold">Go Back</span>.</span>
<div>
<div class="infobox-note" id="GUID-B0FE7112-6744-40E0-892A-C90D823E75C9__IFYOUREQUESTEDTHEMOSAICTOBECREATEDO-732BABE1">
<p class="notep1">Note:</p>
<p>If you requested the mosaic to be created on HDFS, you must wait until the image is loaded on HDFS.</p>
</div>
</div>
</li>
<li class="stepexpand"><span>Optionally, to download and store the image, click <span class="bold">Download</span>.</span></li>
</ol>
</div>
</div>
<div class="props_rev_3"><a id="GUID-995D4896-C2FA-4C95-B92E-06A8B5FF7FA6"></a>
<h4 id="BDSPA-GUID-995D4896-C2FA-4C95-B92E-06A8B5FF7FA6" class="sect4"><span class="enumeration_section">1.7.3.5</span> Creating an Image Using Multiple-Raster Algebra Operations</h4>
<div>
<ol>
<li class="stepexpand"><span>Go to (or stay on) the <code class="codeph">Hadoop Raster Viewer</code> tab.</span></li>
<li class="stepexpand"><span>Click <span class="bold">Refresh Footprint</span> and wait until all footprints are displayed on the panel.</span></li>
<li class="stepexpand"><span>Remove or ignore rasters as necessary.</span>
<div>
<p>If identical rasters are in the result, they are shown in yellow</p>
</div>
</li>
<li class="stepexpand"><span>4. Right-click on the yellow identical rasters for processing.</span></li>
<li class="stepexpand"><span>Click <span class="bold">Process Rasters with Same MBR</span>.</span></li>
<li class="stepexpand"><span>Specify the output folder in which to place the mosaic, or load an existing configuration file.</span></li>
<li class="stepexpand"><span>Click <span class="bold">Advanced Configuration</span>.</span></li>
<li class="stepexpand"><span>8. Select a Multiple Complex Raster Operation from the right panel. (Only one option is allowed.)</span></li>
<li class="stepexpand"><span>Click <span class="bold">Create Mosaic</span>, and wait for the result.</span></li>
<li class="stepexpand"><span>I10. If you need to generate another image, click <span class="bold">Go Back</span>.</span>
<div>
<div class="infobox-note" id="GUID-995D4896-C2FA-4C95-B92E-06A8B5FF7FA6__IFYOUREQUESTEDTHEMOSAICTOBECREATEDO-732BABE1">
<p class="notep1">Note:</p>
<p>If you requested the mosaic to be created on HDFS, you must wait until the image is loaded on HDFS.</p>
</div>
</div>
</li>
<li class="stepexpand"><span>Optionally, to download and store the image, click <span class="bold">Download</span>.</span></li>
</ol>
</div>
</div>
<div class="props_rev_3"><a id="GUID-CC0BF90C-D661-43C6-8E1D-4C0885DD1C0B"></a>
<h4 id="BDSPA-GUID-CC0BF90C-D661-43C6-8E1D-4C0885DD1C0B" class="sect4"><span class="enumeration_section">1.7.3.6</span> Removing Identical Rasters</h4>
<div>
<ol>
<li class="stepexpand"><span>Go to the <span class="bold"><code class="codeph">Raster Mapviewer Globe</code></span> tab.</span></li>
<li class="stepexpand"><span>Click <span class="bold"><code class="codeph">Refresh Footprint</code></span> and wait until all footprints are displayed on the panel..</span>
<div>
<p>If identical rasters are in the result, they are shown in yellow.</p>
</div>
</li>
<li class="stepexpand"><span>For each pair of identical rasters, if you want to select one of them for removal, right-click on its yellow box.</span>
<div>
<p>A new dialog box is displayed.</p>
</div>
</li>
<li class="stepexpand"><span>To remove a raster, click the X button for it.</span></li>
<li class="stepexpand"><span>To see the thumbnail, click in the image.</span></li>
</ol>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-096031CB-6658-439A-9637-A221B3C79689"></a>
<h3 id="BDSPA-GUID-096031CB-6658-439A-9637-A221B3C79689" class="sect3"><span class="enumeration_section">1.7.4</span> Using the Provided Image Server Web Services</h3>
<div>
<p>The image server has two ready-to-use web services, one for the HDFS loader and the other for the HDFS mosaic processor.</p>
<p>These services can be called from a Java application. They are currently supported only for GET operations. The formats for calling them are:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">Loader</span>: <code class="codeph">http://host:port/imageserver/rest/hdfsloader?path=string&amp;overlap=string</code> where:</p>
<p><code class="codeph">path</code>: The images to be processed; can be a the path of a single file, or of one or more whole folders. For more than one folder, use commas to separate folder names.</p>
<p><code class="codeph">overlap</code> (optional): The overlap between images (default = 10).</p>
</li>
<li>
<p><span class="bold">Mosaic</span>: <code class="codeph">http://host:port/imageserver/rest/mosaic?mosaic=string&amp;config=string</code> where:</p>
<p><code class="codeph">mosaic</code>: The XML mosaic file that contains the images to be processed. If you are using the image server web application, the XML file is generated automatically. Example of a mosaic XML file:</p>
<pre dir="ltr">
&lt;?xml version='1.0'?&gt;
&lt;catalog type='HDFS'&gt;
    &lt;image&gt;
       &lt;source&gt;Hadoop File System&lt;/source&gt;
       &lt;type&gt;HDFS&lt;/type&gt;
       &lt;raster&gt; /hawaii.tif.ohif&lt;/raster&gt;
        &lt;bands datatype='1' config='1,2,3'&gt;3&lt;/bands&gt;
    &lt;/image&gt;
    &lt;image&gt;
       &lt;source&gt;Hadoop File System&lt;/source&gt;
       &lt;type&gt;HDFS&lt;/type&gt;
       &lt;raster&gt;/ /kahoolawe.tif.ohif&lt;/raster&gt;
        &lt;bands datatype='1' config='1,2,3'&gt;3&lt;/bands&gt;
    &lt;/image&gt;
&lt;/catalog&gt;
</pre>
<p><code class="codeph">config</code>: Configuration file; created the first time a mosaic is processed using the image server web application. Example of a configuration file</p>
<pre dir="ltr">
&lt;?xml version="1.0" encoding="UTF-8" standalone="no"?&gt;
&lt;mosaic&gt;
    &lt;output&gt;
        &lt;SRID&gt;26904&lt;/SRID&gt;
        &lt;directory type = "FS"&gt;/net/system123/scratch/user3/installers&lt;/directory&gt;
        &lt;tempFsFolder&gt;/net/system123/scratch/user3/installers&lt;/tempFsFolder&gt;
        &lt;filename&gt;test&lt;/filename&gt;
        &lt;format&gt;GTIFF&lt;/format&gt;
        &lt;width&gt;1800&lt;/width&gt;
        &lt;height&gt;1406&lt;/height&gt;
        &lt;algorithm order = "0"&gt;1&lt;/algorithm&gt;
        &lt;bands layers = "3"/&gt;
        &lt;nodata&gt;#000000&lt;/nodata&gt;
        &lt;pixelType&gt;1&lt;/pixelType&gt;
    &lt;/output&gt;
    &lt;crop&gt;
        &lt;transform&gt;294444.1905688362,114.06068372059636,0,2517696.9179752027,0,-114.06068372059636&lt;/transform&gt;
    &lt;/crop&gt;
    &lt;process/&gt;
    &lt;operations&gt;
        &lt;localnot/&gt;
    &lt;/operations&gt;
&lt;/mosaic&gt; 
</pre></li>
</ul>
<div class="section">
<p class="subhead3">Java Example: Using the Loader</p>
<pre dir="ltr">
public class RestTest 
    public static void main(String args[]) {

        try {
            // Loader http://localhost:7101/imageserver/rest/hdfsloader?path=string&amp;overlap=string
            // Mosaic http://localhost:7101/imageserver/rest/mosaic?mosaic=string&amp;config=string
            String path = "/net/system123/scratch/user3/installers/hawaii/hawaii.tif";
           
            URL url = new URL(
                    "http://system123.example.com:7101/imageserver/rest/hdfsloader?path=" +
                            path + "&amp;overlap=2"); // overlap its optional
           
            HttpURLConnection conn = (HttpURLConnection) url.openConnection();
            conn.setRequestMethod("GET");
            //conn.setRequestProperty("Accept", "application/json");

            if (conn.getResponseCode() != 200) {
                throw new RuntimeException("Failed : HTTP error code : "
                        + conn.getResponseCode());
            }

            BufferedReader br = new BufferedReader(new InputStreamReader(
                    (conn.getInputStream())));

            String output;
            System.out.println("Output from Server .... \n");
            while ((output = br.readLine()) != null) {
                System.out.println(output);
            }

            conn.disconnect();

        } catch (MalformedURLException e) {

            e.printStackTrace();

        } catch (IOException e) {

            e.printStackTrace();

        }
    }
}
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Java Example: Using the Mosaic Processor</p>
<pre dir="ltr">
public class NetClientPost {
    public static void main(String[] args) {

      try {
          String mosaic = "&lt;?xml version='1.0'?&gt;\n" +
                    "&lt;catalog type='HDFS'&gt;\n" +
                    "    &lt;image&gt;\n" +
                    "       &lt;source&gt;Hadoop File System&lt;/source&gt;\n" +
                    "       &lt;type&gt;HDFS&lt;/type&gt;\n" +
                    "       &lt;raster&gt;/user/hdfs/newdata/net/system123/scratch/user3/installers/hawaii/hawaii.tif.ohif&lt;/raster&gt;\n" +
                    "       &lt;url&gt;http://system123.example.com:7101/imageserver/temp/862b5871973372aab7b62094c575884ae13c3a27_thumb.jpg&lt;/url&gt;\n" +
                    "       &lt;bands datatype='1' config='1,2,3'&gt;3&lt;/bands&gt;\n" +
                    "    &lt;/image&gt;\n" +
                    "&lt;/catalog&gt;";
             String config = "&lt;?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?&gt;\n" +
                     "&lt;mosaic&gt;\n" +
                     "&lt;output&gt;\n" +
                     "&lt;SRID&gt;26904&lt;/SRID&gt;\n" +
                     "&lt;directory type=\"FS\"&gt;/net/system123/scratch/user3/installers&lt;/directory&gt;\n" +
                     "&lt;tempFsFolder&gt;/net/system123/scratch/user3/installers&lt;/tempFsFolder&gt;\n" +
                     "&lt;filename&gt;test&lt;/filename&gt;\n" +
                     "&lt;format&gt;GTIFF&lt;/format&gt;\n" +
                     "&lt;width&gt;1800&lt;/width&gt;\n" +
                     "&lt;height&gt;1269&lt;/height&gt;\n" +
                     "&lt;algorithm order=\"0\"&gt;1&lt;/algorithm&gt;\n" +
                     "&lt;bands layers=\"3\"/&gt;\n" +
                     "&lt;nodata&gt;#000000&lt;/nodata&gt;\n" +
                     "&lt;pixelType&gt;1&lt;/pixelType&gt;\n" +
                     "&lt;/output&gt;\n" +
                     "&lt;crop&gt;\n" +
                     "&lt;transform&gt;739481.1311601736,130.5820811245199,0,2254053.5858749463,0,-130.5820811245199&lt;/transform&gt;\n" +
                     "&lt;/crop&gt;\n" +
                     "&lt;process/&gt;\n" +
                     "&lt;/mosaic&gt;";
             System.out.println ("asdf");
             URL url2 = new URL("http://192.168.1.67:8080" );
             HttpURLConnection conn2 = (HttpURLConnection) url2.openConnection();
             conn2.setRequestMethod("GET");
             if (conn2.getResponseCode() != 200 ) {
                throw new RuntimeException("Failed : HTTP error code : "
                    + conn2.getResponseCode());
            }
        /*URL url = new URL("http://system123.example.com:7101/imageserver/rest/mosaic?" +("mosaic=" + URLEncoder.encode(mosaic, "UTF-8") + "&amp;config=" + 
                URLEncoder.encode(config, "UTF-8")));
        HttpURLConnection conn = (HttpURLConnection) url.openConnection();
        conn.setRequestMethod("GET");
       
        if (conn.getResponseCode() != 200 ) {
            throw new RuntimeException("Failed : HTTP error code : "
                + conn.getResponseCode());
        }
        BufferedReader br = new BufferedReader(new InputStreamReader(
                (conn.getInputStream())));
        String output;System.out.println("Output from Server .... \n");
        while ((output = br.readLine()) != null)
            System.out.println(output);
        conn.disconnect();*/

      } catch (MalformedURLException e) {
        e.printStackTrace();
      } catch (IOException e) {
        e.printStackTrace();
     }
    }
}
</pre></div>
<!-- class="section" --></div>
</div>
</div>
<a id="BDSPA423"></a>
<div class="props_rev_3"><a id="GUID-A5CC1A7A-5E07-4CBE-A04E-58F15E3492C1"></a>
<h2 id="BDSPA-GUID-A5CC1A7A-5E07-4CBE-A04E-58F15E3492C1" class="sect2"><span class="enumeration_section">1.8</span> Installing the Oracle Big Data SpatialViewer Web Application</h2>
<div>
<p>To install the Oracle Big Data SpatialViewer web application (SpatialViewer), follow the instructions in this topic.</p>
</div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="big-data-spatial-overview.htm#GUID-35F9F533-D23A-4A00-81F4-D01FB61C316D">Assumptions for SpatialViewer</a><br /></li>
<li class="ulchildlink"><a href="big-data-spatial-overview.htm#GUID-9F0282C7-55B4-438B-A75B-F58CC3CE03C1">Installing SpatialViewer on Oracle Big Data Appliance</a><br /></li>
<li class="ulchildlink"><a href="big-data-spatial-overview.htm#GUID-983BA9F4-95F3-45D0-80B9-77479ECA3447">Installing SpatialViewer for Other Systems (Not Big Data Appliance)</a><br /></li>
<li class="ulchildlink"><a href="big-data-spatial-overview.htm#GUID-045D5A34-6BC4-40BC-BBF0-4FE0B45ED903">Configuring SpatialViewer on Oracle Big Data Appliance</a><br /></li>
<li class="ulchildlink"><a href="big-data-spatial-overview.htm#GUID-2665FB1F-7DF0-4335-B232-E7FD3F046013">Configuring SpatialViewer for Other Systems (Not Big Data Appliance)</a><br /></li>
</ul>
<div class="infoboxnotealso" id="GUID-A5CC1A7A-5E07-4CBE-A04E-58F15E3492C1__GUID-42A800E2-D9E3-4291-A95B-C860EB052C33">
<p class="notep1">See Also:</p>
<p><a href="using-big-data-spatial-graph-spatial-data.htm#GUID-05782BDF-6EBE-44A7-A5DB-A0713C19F7E6" title="You can use the Oracle Big Data SpatialViewer Web Application (SpatialViewer) to perform a variety of tasks.">Using the Oracle Big Data SpatialViewer Web Application</a></p>
</div>
</div>
<a id="BDSPA430"></a>
<div class="props_rev_3"><a id="GUID-35F9F533-D23A-4A00-81F4-D01FB61C316D"></a>
<h3 id="BDSPA-GUID-35F9F533-D23A-4A00-81F4-D01FB61C316D" class="sect3"><span class="enumeration_section">1.8.1</span> Assumptions for SpatialViewer</h3>
<div>
<p>The following assumptions apply for installing and configuring SpatialViewer.</p>
<ul style="list-style-type: disc;">
<li>
<p>The API and jobs described here run on a Cloudera CDH5.7, Hortonworks HDP 2.4, or similar Hadoop environment.</p>
</li>
<li>
<p>Java 8 or a newer version is present in your environment.</p>
</li>
<li>
<p>The image processing framework has been installed as described in <a href="big-data-spatial-overview.htm#GUID-9B24206D-3824-48A0-B5A9-7633930354EB" title="Installing and configuring the Image Processing Framework depends upon the distribution being used.">Installing and Configuring the Big Data Spatial Image Processing Framework</a></p>
.</li>
</ul>
</div>
</div>
<a id="BDSPA424"></a>
<div class="props_rev_3"><a id="GUID-9F0282C7-55B4-438B-A75B-F58CC3CE03C1"></a>
<h3 id="BDSPA-GUID-9F0282C7-55B4-438B-A75B-F58CC3CE03C1" class="sect3"><span class="enumeration_section">1.8.2</span> Installing SpatialViewer on Oracle Big Data Appliance</h3>
<div>
<div class="section">
<p>You can install SpatialViewer on Big Data Appliance as follows</p>
<ol>
<li>
<p>Run the following script:</p>
<pre dir="ltr">
sudo /opt/oracle/oracle-spatial-graph/spatial/configure-server/install-bdsg-consoles.sh
</pre></li>
<li>
<p>Start the web application by using <span class="bold">one</span> of the following commands (the second command enables you to view logs):</p>
<pre dir="ltr">
sudo service bdsg start
sudo /opt/oracle/oracle-spatial-graph/spatial/web-server/start-server.sh
</pre>
<p>If any errors occur, see the the README file located in <code class="codeph">/opt/oracle/oracle-spatial-graph/spatial/configure-server</code>.</p>
</li>
<li>
<p>Open: <code class="codeph">http://&lt;oracle_big_data_spatial_vector_console&gt;:8045/spatialviewer/</code></p>
</li>
<li>
<p>If the active nodes have changed after the installation or if Kerberos is enabled, then update the configuration file as described in <a href="big-data-spatial-overview.htm#GUID-045D5A34-6BC4-40BC-BBF0-4FE0B45ED903">Configuring SpatialViewer on Oracle Big Data Appliance</a>.</p>
</li>
<li>
<p>Optionally, upload sample data (used with examples in other topics) to HDFS:</p>
<pre dir="ltr">
sudo -u hdfs hadoop fs -mkdir /user/oracle/bdsg
sudo -u hdfs hadoop fs -put /opt/oracle/oracle-spatial-graph/spatial/vector/examples/data/tweets.json /user/oracle/bdsg/
</pre></li>
</ol>
</div>
<!-- class="section" --></div>
</div>
<a id="BDSPA425"></a>
<div class="props_rev_3"><a id="GUID-983BA9F4-95F3-45D0-80B9-77479ECA3447"></a>
<h3 id="BDSPA-GUID-983BA9F4-95F3-45D0-80B9-77479ECA3447" class="sect3"><span class="enumeration_section">1.8.3</span> Installing SpatialViewer for Other Systems (Not Big Data Appliance)</h3>
<div>
<p>Follow the steps for manual configuration described in in <a href="big-data-spatial-overview.htm#GUID-9F0282C7-55B4-438B-A75B-F58CC3CE03C1">Installing SpatialViewer on Oracle Big Data Appliance</a>.</p>
<p>Then, change the configuration, as described in <a href="big-data-spatial-overview.htm#GUID-2665FB1F-7DF0-4335-B232-E7FD3F046013">Configuring SpatialViewer for Other Systems (Not Big Data Appliance)</a></p>
</div>
</div>
<a id="BDSPA426"></a>
<div class="props_rev_3"><a id="GUID-045D5A34-6BC4-40BC-BBF0-4FE0B45ED903"></a>
<h3 id="BDSPA-GUID-045D5A34-6BC4-40BC-BBF0-4FE0B45ED903" class="sect3"><span class="enumeration_section">1.8.4</span> Configuring SpatialViewer on Oracle Big Data Appliance</h3>
<div>
<div class="section">
<p>To configure SpatialViewer on Oracle Big Data Appliance, follow these steps.</p>
<ol>
<li>
<p>Open the console: <code class="codeph">http://&lt;oracle_big_data_spatial_vector_console&gt;:8045/spatialviewer/?root=swadmin</code></p>
</li>
<li>
<p>Change the general configuration, as needed:</p>
<ul style="list-style-type: disc;">
<li>
<p>Local working directory: SpatialViewer local working directory. Absolute path. The default directory <code class="codeph">/usr/oracle/spatialviewer</code> is created when installing SpatialViewer.</p>
</li>
<li>
<p>HDFS working directory: SpatialViewer HDFS working directory. The default directory <code class="codeph">/user/oracle/spatialviewer</code> is created when installing SpatialViewer.</p>
</li>
<li>
<p>Hadoop configuration file: The Hadoop configuration directory. By default: <code class="codeph">/etc/hadoop/conf</code></p>
</li>
<li>
<p>eLocation URL: URL used to get the eLocation background maps. By default: <code class="codeph">http://elocation.oracle.com</code></p>
</li>
<li>
<p>Kerberos keytab: If Kerberos is enabled, provide the full path to the file that contains the keytab file.</p>
</li>
<li>
<p>Display logs: If necessary, disable the display of the jobs in the Spatial Jobs screen. Disable this display if the logs are not in the default format. The default format is: <code class="codeph">Date LogLevel LoggerName: LogMessage</code></p>
<p>The Date must have the default format: <code class="codeph">yyyy-MM-dd HH:mm:ss,SSS</code>. For example: <code class="codeph">2012-11-02 14:34:02,781</code>.</p>
<p>If the logs are not displayed and the Display logs field is set to <code class="codeph">Yes</code>, then ensure that <code class="codeph">yarn.log-aggregation-enable</code> in <code class="codeph">yarn-site.xml</code> is set to <code class="codeph">true</code>. Also ensure that the Hadoop jobs configuration parameters <code class="codeph">yarn.nodemanager.remote-app-log-dir</code> and <code class="codeph">yarn.nodemanager.remote-app-log-dir-suffix</code> are set to the same value as in <code class="codeph">yarn-site.xml</code>.</p>
</li>
</ul>
</li>
<li>
<p>Change the raster configuration, as needed:</p>
<ul style="list-style-type: disc;">
<li>
<p>Shared directory: Directory used to read and write from different nodes, which requires that is be shared and have the greatest permissions or at least be in the Hadoop user group.</p>
</li>
<li>
<p>Network file system mount point: NFS mountpoint that allows the shared folders to be seen and accessed individually. Can be blank if you are using a non-distributed environment.</p>
</li>
<li>
<p>Shared GDAL data directory: GDAL shared data folder. Must be a shared directory. (See the instructions in <a href="big-data-spatial-overview.htm#GUID-F3C4C7C4-3F94-48E8-B2EA-04F2DE8AB22C" title="For Big Data Spatial and Graph in environments other than the Big Data Appliance, follow the instructions in this section.">Installing the Image Processing Framework for Other Distributions (Not Oracle Big Data Appliance)</a>.)</p>
</li>
</ul>
</li>
<li>
<p>Change the Hadoop configuration, as needed.</p>
</li>
<li>
<p>Change the Spark configuration, as needed.</p>
</li>
<li>
<p>If Kerberos is enabled, then you may need to add the parameters:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">spark.authenticate</code>: must be set to <code class="codeph">true</code></p>
</li>
<li>
<p><code class="codeph">spark.authenticate.enableSaslEncryption</code>: set the value to <code class="codeph">true</code> or <code class="codeph">false</code> depending on your cluster configuration.</p>
</li>
<li>
<p><code class="codeph">spark.yarn.keytab</code>: the full path to the file that contains the keytab for the principal.</p>
</li>
<li>
<p><code class="codeph">spark.yarn.principal</code>: the principal to be used to log in to Kerberos. The format of a typical Kerberos V5 principal is <code class="codeph">primary/instance@REALM</code>.</p>
</li>
</ul>
</li>
<li>
<p>On Linux systems, you may need to change the secure container executor to <code class="codeph">LinuxContainerExecutor</code>. For that, set the following parameters:</p>
<ul style="list-style-type: disc;">
<li>
<p>Set <code class="codeph">yarn.nodemanager.container-executor.class</code> to <code class="codeph">org.apache.hadoop.yarn.server.nodemanager.LinuxContainerExecutor</code>.</p>
</li>
<li>
<p>Set <code class="codeph">yarn.nodemanager.linux-container-executor.group</code> to <code class="codeph">hadoop</code>.</p>
</li>
</ul>
</li>
<li>
<p>Ensure that the user can read the keytab file.</p>
</li>
<li>
<p>Copy the keytab file to the same location on all the nodes of the cluster.</p>
</li>
</ol>
</div>
<!-- class="section" --></div>
</div>
<a id="BDSPA427"></a>
<div class="props_rev_3"><a id="GUID-2665FB1F-7DF0-4335-B232-E7FD3F046013"></a>
<h3 id="BDSPA-GUID-2665FB1F-7DF0-4335-B232-E7FD3F046013" class="sect3"><span class="enumeration_section">1.8.5</span> Configuring SpatialViewer for Other Systems (Not Big Data Appliance)</h3>
<div>
<p>Follow the steps mentioned in <a href="big-data-spatial-overview.htm#GUID-045D5A34-6BC4-40BC-BBF0-4FE0B45ED903">Configuring SpatialViewer on Oracle Big Data Appliance</a>.</p>
<p>Additionally, change the Hadoop Configuration, replacing the Hadoop property <code class="codeph">yarn.application.classpath</code> value <code class="codeph">/opt/cloudera/parcels/CDH/lib/</code> with the actual library path, which by default is <code class="codeph">/usr/lib/</code>.</p>
</div>
</div>
</div>
<a id="BDSPA117"></a>
<div class="props_rev_3"><a id="GUID-BDF9368E-C271-414D-9779-9F534977879F"></a>
<h2 id="BDSPA-GUID-BDF9368E-C271-414D-9779-9F534977879F" class="sect2"><span class="enumeration_section">1.9</span> Installing Property Graph Support on a CDH Cluster or Other Hardware</h2>
<div>
<p>You can use property graphs on either Oracle Big Data Appliance or commodity hardware.</p>
</div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="big-data-spatial-overview.htm#GUID-9CC8053C-AC95-480F-B4D2-3FB6BC50FD40">Apache HBase Prerequisites</a><br /></li>
<li class="ulchildlink"><a href="big-data-spatial-overview.htm#GUID-3EF49198-1904-4FF8-BB16-4ABED910C433">Property Graph Installation Steps</a><br /></li>
<li class="ulchildlink"><a href="big-data-spatial-overview.htm#GUID-947A4948-EEBC-48C0-9176-11968B33BB57">About the Property Graph Installation Directory</a><br /></li>
<li class="ulchildlink"><a href="big-data-spatial-overview.htm#GUID-2A0F5EFA-1AAD-42A5-A628-AE6A1F742C4C">Optional Installation Task for In-Memory Analyst Use</a><br /></li>
</ul>
<div class="infoboxnotealso" id="GUID-BDF9368E-C271-414D-9779-9F534977879F__GUID-B29669DF-0002-45F4-B9BA-3366EC48B849">
<p class="notep1">See Also:</p>
<p><a href="configuring-property-graph-support.htm#GUID-270DD1FC-AAEE-4FAA-BE63-4D7DD52504E5" title="This chapter explains how to configure the support for property graphs in a Big Data environment.">Configuring Property Graph Support</a></p>
</div>
</div>
<a id="BDSPA118"></a>
<div class="props_rev_3"><a id="GUID-9CC8053C-AC95-480F-B4D2-3FB6BC50FD40"></a>
<h3 id="BDSPA-GUID-9CC8053C-AC95-480F-B4D2-3FB6BC50FD40" class="sect3"><span class="enumeration_section">1.9.1</span> Apache HBase Prerequisites</h3>
<div>
<p>The following prerequisites apply to installing property graph support in HBase.</p>
<ul style="list-style-type: disc;">
<li>
<p>Linux operating system</p>
</li>
<li>
<p>Cloudera's Distribution including Apache Hadoop (CDH)</p>
<p>For the software download, see: <a href="http://www.cloudera.com/content/cloudera/en/products-and-services/cdh.html" target="_blank"><code class="codeph">http://www.cloudera.com/content/cloudera/en/products-and-services/cdh.html</code></a></p>
</li>
<li>
<p>Apache HBase</p>
</li>
<li>
<p>Java Development Kit (JDK) (Java 8 or higher)</p>
</li>
</ul>
<p>Details about supported versions of these products, including any interdependencies, will be provided in a My Oracle Support note.</p>
</div>
</div>
<a id="BDSPA119"></a>
<div class="props_rev_3"><a id="GUID-3EF49198-1904-4FF8-BB16-4ABED910C433"></a>
<h3 id="BDSPA-GUID-3EF49198-1904-4FF8-BB16-4ABED910C433" class="sect3"><span class="enumeration_section">1.9.2</span> Property Graph Installation Steps</h3>
<div>
<div class="section">
<p>To install property graph support, follow these steps.</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Unzip the software package:</span>
<div>
<pre dir="ltr">
rpm -i oracle-spatial-graph-&lt;version&gt;.x86_64.rpm
</pre>
<p>By default, the software is installed in the following directory: <code class="codeph">/opt/oracle/</code></p>
<p>After the installation completes, the <code class="codeph">opt/oracle/oracle-spatial-graph</code> directory exists and includes a <code class="codeph">property_graph</code> subdirectory.</p>
</div>
</li>
<li class="stepexpand"><span>Set the JAVA_HOME environment variable. For example:</span>
<div>
<pre dir="ltr">
setenv JAVA_HOME  /usr/local/packages/jdk8
</pre></div>
</li>
<li class="stepexpand"><span>Set the PGX_HOME environment variable. For example:</span>
<div>
<pre dir="ltr">
setenv PGX_HOME /opt/oracle/oracle-spatial-graph/pgx
</pre></div>
</li>
<li class="stepexpand"><span>If HBase will be used, set the <code class="codeph">HBASE_HOME</code> environment variable in all HBase region servers in the Apache Hadoop cluster. (<code class="codeph">HBASE_HOME</code> specifies the location of the <code class="codeph">hbase</code> installation directory.) For example:</span>
<div>
<pre dir="ltr">
setenv HBASE_HOME /usr/lib/hbase
</pre>
<p>Note that on some installations of Big Data Appliance, Apache HBase is placed in a directory like the following: <code class="codeph">/opt/cloudera/parcels/CDH-5.3.3-1.cdh5.3.3.p0.5/lib/hbase/</code></p>
</div>
</li>
<li class="stepexpand"><span>If HBase will be used, copy the data access layer library into $HBASE_HOME/lib. For example:</span>
<div>
<pre dir="ltr">
cp /opt/oracle/oracle-spatial-graph/property_graph/lib/sdopgdal*.jar $HBASE_HOME/lib
</pre></div>
</li>
<li class="stepexpand"><span>Tune the HBase or Oracle NoSQL Database configuration, as described in other tuning topics.</span></li>
<li class="stepexpand"><span>Log in to Cloudera Manager as the <code class="codeph">admin</code> user, and restart the HBase service. Restarting enables the Region Servers to use the new configuration settings.</span></li>
</ol>
</div>
</div>
<a id="BDSPA120"></a>
<div class="props_rev_3"><a id="GUID-947A4948-EEBC-48C0-9176-11968B33BB57"></a>
<h3 id="BDSPA-GUID-947A4948-EEBC-48C0-9176-11968B33BB57" class="sect3"><span class="enumeration_section">1.9.3</span> About the Property Graph Installation Directory</h3>
<div>
<p>The installation directory for Oracle Big Data Spatial and Graph property graph features has the following structure:</p>
<pre dir="ltr">
$ <span class="bold">tree -dFL 2 /opt/oracle/oracle-spatial-graph/property_graph/</span>
/opt/oracle/oracle-spatial-graph/property_graph/
|-- dal
|   |-- groovy
|   |-- opg-solr-config
|   `-- webapp
|-- data
|-- doc
|   |-- dal
|   `-- pgx
|-- examples
|   |-- dal
|   |-- pgx
|   `-- pyopg
|-- lib
|-- librdf
`-- pgx
    |-- bin
    |-- conf
    |-- groovy
    |-- scripts
    |-- webapp
    `-- yarn
</pre></div>
</div>
<a id="BDSPA455"></a>
<div class="props_rev_3"><a id="GUID-2A0F5EFA-1AAD-42A5-A628-AE6A1F742C4C"></a>
<h3 id="BDSPA-GUID-2A0F5EFA-1AAD-42A5-A628-AE6A1F742C4C" class="sect3"><span class="enumeration_section">1.9.4</span> Optional Installation Task for In-Memory Analyst Use</h3>
<div>
<p>Follow this installation task if property graph support is installed on a client without Hadoop, and you want to read graph data stored in the Hadoop Distributed File System (HDFS) into the in-memory analyst and write the results back to the HDFS, and/or use Hadoop NextGen MapReduce (YARN) scheduling to start, monitor and stop the in-memory analyst.</p>
</div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="big-data-spatial-overview.htm#GUID-F44761DD-63CD-4A8A-AE47-B65173705AD5">Installing and Configuring Hadoop</a><br /></li>
<li class="ulchildlink"><a href="big-data-spatial-overview.htm#GUID-F9A3746D-8086-410C-8ADA-EAD7F67E2560">Running the In-Memory Analyst on Hadoop</a><br /></li>
</ul>
</div>
<a id="BDSPA456"></a>
<div class="props_rev_3"><a id="GUID-F44761DD-63CD-4A8A-AE47-B65173705AD5"></a>
<h4 id="BDSPA-GUID-F44761DD-63CD-4A8A-AE47-B65173705AD5" class="sect4"><span class="enumeration_section">1.9.4.1</span> Installing and Configuring Hadoop</h4>
<div>
<div class="section">
<p>To install and configure Hadoop, follow these steps.</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Download the tarball for a supported version of the Cloudera CDH.</span></li>
<li class="stepexpand"><span>Unpack the tarball into a directory of your choice. For example:</span>
<div>
<pre dir="ltr">
tar xvf hadoop-2.5.0-cdh5.2.1.tar.gz -C /opt
</pre></div>
</li>
<li class="stepexpand"><span>Have the <code class="codeph">HADOOP_HOME</code> environment variable point to the installation directory. For example.</span>
<div>
<pre dir="ltr">
export HADOOP_HOME=/opt/hadoop-2.5.0-cdh5.2.1
</pre></div>
</li>
<li class="stepexpand"><span>Add <code class="codeph">$HADOOP_HOME/bin</code> to the <code class="codeph">PATH</code> environment variable. For example:</span>
<div>
<pre dir="ltr">
export PATH=$HADOOP_HOME/bin:$PATH
</pre></div>
</li>
<li class="stepexpand"><span>Configure <code class="codeph">$HADOOP_HOME/etc/hadoop/hdfs-site.xml</code> to point to the HDFS name node of your Hadoop cluster.</span></li>
<li class="stepexpand"><span>Configure <code class="codeph">$HADOOP_HOME/etc/hadoop/yarn-site.xml</code> to point to the resource manager node of your Hadoop cluster.</span></li>
<li class="stepexpand"><span>Configure the <code class="codeph">fs.defaultFS</code> field in <code class="codeph">$HADOOP_HOME/etc/hadoop/core-site.xml</code> to point to the HDFS name node of your Hadoop cluster.</span></li>
</ol>
</div>
</div>
<a id="BDSPA457"></a>
<div class="props_rev_3"><a id="GUID-F9A3746D-8086-410C-8ADA-EAD7F67E2560"></a>
<h4 id="BDSPA-GUID-F9A3746D-8086-410C-8ADA-EAD7F67E2560" class="sect4"><span class="enumeration_section">1.9.4.2</span> Running the In-Memory Analyst on Hadoop</h4>
<div>
<p>When running a Java application using in-memory analytics and HDFS, make sure that <code class="codeph">$HADOOP_HOME/etc/hadoop</code> is on the classpath, so that the configurations get picked up by the Hadoop client libraries. However, you do not need to do this when using the in-memory analyst shell, because it adds <code class="codeph">$HADOOP_HOME/etc/hadoop</code> automatically to the classpath if <code class="codeph">HADOOP_HOME</code> is set.</p>
<p>You do not need to put any extra Cloudera Hadoop libraries (JAR files) on the classpath. The only time you need the YARN libraries is when starting the in-memory analyst as a YARN service. This is done with the <code class="codeph">yarn</code> command, which automatically adds all necessary JAR files from your local installation to the classpath.</p>
<p>You are now ready to load data from HDFS or start the in-memory analyst as a YARN service. For further information about Hadoop, see the CDH 5.x.x documentation.</p>
</div>
</div>
</div>
</div>
<div class="props_rev_3"><a id="GUID-49B3D52B-E524-4EAD-A42C-CCCC8E987990"></a>
<h2 id="BDSPA-GUID-49B3D52B-E524-4EAD-A42C-CCCC8E987990" class="sect2"><span class="enumeration_section">1.10</span> Installing and Configuring Multimedia Analytics Support</h2>
<div>
<p>To use the Multimedia analytics feature, the video analysis framework must be installed and configured.</p>
</div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><a href="big-data-spatial-overview.htm#GUID-91A743DF-AA7E-4B94-AE87-14904A47FBE3">Assumptions and Libraries for Multimedia Analytics</a><br /></li>
<li class="ulchildlink"><a href="big-data-spatial-overview.htm#GUID-D3D79200-D880-473E-8911-554F5F41375C">Transcoding Software (Options)</a><br /></li>
</ul>
</div>
<div class="props_rev_3"><a id="GUID-91A743DF-AA7E-4B94-AE87-14904A47FBE3"></a>
<h3 id="BDSPA-GUID-91A743DF-AA7E-4B94-AE87-14904A47FBE3" class="sect3"><span class="enumeration_section">1.10.1</span> Assumptions and Libraries for Multimedia Analytics</h3>
<div>
<p>If you have licensed Oracle Big Data Spatial and Graph with Oracle Big Data Appliance, the video analysis framework for Multimedia analytics is already installed and configured. However, you must set <code class="codeph">$MMA_HOME</code> to point to <code class="codeph">/opt/oracle/oracle-spatial-graph/multimedia</code>.</p>
<p>Otherwise, you can install the framework on Cloudera CDH 5 or similar Hadoop environment, as follows:</p>
<ol>
<li>
<p>Install the framework by using the following command on each node on the cluster:</p>
<pre dir="ltr">
rpm2cpio oracle-spatial-graph-&lt;version&gt;.x86_64.rpm | cpio -idmv
</pre>
<p>You can use the <code class="codeph">dcli</code> utility (see <a class="olink BIGOG76614" target="_blank" href="../BIGOG/dcli.htm#BIGOG76614">Executing Commands Across a Cluster Using the dcli Utility</a>).</p>
</li>
<li>
<p>Set <code class="codeph">$MMA_HOME</code> to point to <code class="codeph">/opt/oracle/oracle-spatial-graph/multimedia</code>.</p>
</li>
<li>
<p>Identify the locations of the following libraries:</p>
<ul style="list-style-type: disc;">
<li>
<p>Hadoop jar files (available in <code class="codeph">$HADOOP_HOME/jars</code>)</p>
</li>
<li>
<p>Video processing libraries (see <a href="big-data-spatial-overview.htm#GUID-D3D79200-D880-473E-8911-554F5F41375C">Transcoding Software (Options)</a></p>
</li>
<li>
<p>OpenCV libraries (available with the product)</p>
</li>
</ul>
</li>
<li>
<p>Copy all the <code class="codeph">lib*</code> files from <code class="codeph">$MMA_HOME/opencv_3.1.0/lib</code> to the native Hadoop library location.</p>
<p>On Oracle Big Data Appliance, this location is <code class="codeph">/opt/cloudera/parcels/CDH/lib/hadoop/lib/native</code>.</p>
</li>
<li>
<p>If necessary, install the desired video processing software to transcode video data (see <a href="big-data-spatial-overview.htm#GUID-D3D79200-D880-473E-8911-554F5F41375C">Transcoding Software (Options)</a>).</p>
</li>
</ol>
</div>
</div>
<div class="props_rev_3"><a id="GUID-D3D79200-D880-473E-8911-554F5F41375C"></a>
<h3 id="BDSPA-GUID-D3D79200-D880-473E-8911-554F5F41375C" class="sect3"><span class="enumeration_section">1.10.2</span> Transcoding Software (Options)</h3>
<div>
<p>The following options are available for transcoding video data:</p>
<ul style="list-style-type: disc;">
<li>
<p>JCodec</p>
</li>
<li>
<p>FFmpeg</p>
</li>
<li>
<p>Third-party transcoding software</p>
</li>
</ul>
<p>To use Multimedia analytics with JCodec (which is included with the product), when running the Hadoop job to recognize faces, set the <code class="codeph">oracle.ord.hadoop.ordframegrabber</code> property to the following value: <code class="codeph">oracle.ord.hadoop.decoder.OrdJCodecFrameGrabber</code></p>
<p>To use Multimedia analytics with FFmpeg:</p>
<ol>
<li>
<p>Download FFmpeg from: https://www.ffmpeg.org/.</p>
</li>
<li>
<p>Install FFmpeg on the Hadoop cluster.</p>
</li>
<li>
<p>Set the <code class="codeph">oracle.ord.hadoop.ordframegrabber</code> property to the following value: <code class="codeph">oracle.ord.hadoop.decoder.OrdFFMPEGFrameGrabber</code></p>
</li>
</ol>
<p>To use Multimedia analytics with custom video decoding software, implement the abstract class <code class="codeph">oracle.ord.hadoop.decoder.OrdFrameGrabber</code>. See the Javadoc for more details</p>
</div>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment323">
<tr>
<td class="cellalignment360">
<table class="cellalignment328">
<tr>
<td class="cellalignment327"><a href="big-data-spatial-whats-new.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment327"><a href="using-big-data-spatial-graph-spatial-data.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2015, 2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment362">
<table class="cellalignment326">
<tr>
<td class="cellalignment327"><a href="http://docs.oracle.com/bigdata/bda49/index.html"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment327"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment327"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
