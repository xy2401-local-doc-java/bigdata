<!DOCTYPE html>
<html lang="en-US" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<meta http-equiv="Content-Type" content="UTF-8" />
<title>Oracle SQL Connector for Hadoop Distributed File System</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)" />
<meta name="keywords" content="Oracle SQL Connector for HDFS, description, external tables, about, XML template for Data Pump files, XML templates, Data Pump files, XML template, columnLength property (OSCH), columnType property (OSCH), dateMask property (OSCH), fieldLength property (OSCH), timestampMask property (OSCH), timestampTZMask property (OSCH), columnCount property (OSCH), columnNames property (OSCH), dataCompressionCodec property (OSCH), CompressionCodec property (OSCH), bzip2 input files, gzip input files, compressed data files, dataPaths property (OSCH), Paths property (OSCH), pattern matching (OSCH), dataPathFilter property (OSCH), PathFilter property (OSCH), defaultDirectory property (OSCH), Directory property (OSCH), fieldTerminator property (OSCH), hive.columnType property (OSCH), Hive data type mappings (OSCH), data type mappings, Hive (OSCH), mappings, Hive to Oracle Database (OSCH), databaseName property, Hive (OSCH), hive.databaseName property (OSCH), hive.partitionFilter property, oracle.hadoop.exttab.hive.tableName property, hive.tableName property, oracle.hadoop.exttab.initialFieldEncloser property, initialFieldEncloser property, oracle.hadoop.exttab.locationFileCount property, locationFileCount property, oracle.hadoop.exttab.logDirectory property, logDirectory property, oracle.hadoop.exttab.preprocessorDirectory property, preprocessorDirectory property, oracle.hadoop.exttab.recordDelimiter property, recordDelimiter property, oracle.hadoop.exttab.sourceType property, sourceType property, oracle.hadoop.exttab.stringSizes property, stringSizes property, oracle.hadoop.exttab.createLogFiles property, createLogFiles property, oracle.hadoop.exttab.createBadFiles property, createBadFiles property, oracle.hadoop.exttab.tableName property, oracle.hadoop.exttab.preprocessorScript, oracle.hadoop.exttab.nullIfSpecifier property, oracle.hadoop.exttab.colMap.column_name.nullIfSpecifier property" />
<meta name="dcterms.created" content="2018-07-30T11:38:18Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Big Data Connectors User's Guide" />
<meta name="dcterms.identifier" content="E93614-03" />
<meta name="dcterms.isVersionOf" content="BDCUG" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2011, 2018, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="connectors-part.htm" title="Previous" type="text/html" />
<link rel="Next" href="olh.htm" title="Next" type="text/html" />
<link rel="alternate" href="BDCUG.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/fonts.css">
<link rel="stylesheet" href="../dcommon/css/foundation.css">
<link rel="stylesheet" href="../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css">
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
<script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-03254C3C-3C8F-4C88-AD9D-91ADFDBC488D"></a> <span id="PAGE" style="display:none;">7/22</span> <!-- End Header -->
<script  >
//<![CDATA[
window.name='osch'
//]]>
</script> <script  >
    function footdisplay(footnum,footnote) {
    var msg = window.open('about:blank', 'NewWindow' + footnum,
        'directories=no,height=100,location=no,menubar=no,resizable=yes,' +
        'scrollbars=yes,status=no,toolbar=no,width=598');
    msg.document.open('text/html');
    msg.document.write('<!DOCTYPE html ');
    msg.document.write('PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" ');
    msg.document.write('"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">'); 
    msg.document.write('<html xmlns="http://www.w3.org/1999/xhtml" lang="en-us" ><head><title>');
   
    msg.document.write('Footnote&amp;nbsp; ' + footnum);
    msg.document.write('<\/title><meta http-equiv="Content-Type" ');
    msg.document.write('content="text/html; charset=utf-8" />');
    msg.document.write('');
    msg.document.write('<style> <![CDATA[ ');
    msg.document.write('h1 {text-align: center; font-size: 14pt;}');
    msg.document.write('fieldset {border: none;}');
    msg.document.write('form {text-align: center;}');
    msg.document.write(' ]]\u003e <\/style>');
    msg.document.write('<\/head><body><div id="footnote"><h1>Footnote&nbsp; ' + footnum + '<\/h1><p>');
    msg.document.write(footnote);
    msg.document.write('<\/p><form action="" method="post"><fieldset>');
    msg.document.write('<input type="button" value="OK" ');
    msg.document.write('onclick="window.close();" />');
    msg.document.write('<\/fieldset><\/form><\/div><\/body><\/html>');
    msg.document.close();
    setTimeout(function() {
        var height = msg.document.getElementById('footnote').offsetHeight;
        msg.resizeTo(598, height + 100);
    }
    , 100);
    msg.focus();
}
</script><noscript>
<p>The script content on this page is for navigation purposes only and does not alter the content in any way.</p>
</noscript><a id="BDCUG125"></a>
<h1 id="BDCUG-GUID-03254C3C-3C8F-4C88-AD9D-91ADFDBC488D" class="sect1"><span class="enumeration_chapter">2</span> Oracle SQL Connector for Hadoop Distributed File System</h1>
<div>
<p>This chapter describes how to use Oracle SQL Connector for Hadoop Distributed File System (HDFS) to facilitate data access between Hadoop and Oracle Database.</p>
<p>This chapter contains the following sections:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="osch.htm#GUID-4E28BF02-4DB2-4C20-900E-1AC0238387C1">About Oracle SQL Connector for HDFS</a></p>
</li>
<li>
<p><a href="osch.htm#GUID-24900721-3F45-4E57-B7DF-51B1BBEE8B23">Getting Started With Oracle SQL Connector for HDFS</a></p>
</li>
<li>
<p><a href="osch.htm#GUID-B7D11F0D-B75F-449E-85D6-62D61E43F240">Configuring Your System for Oracle SQL Connector for HDFS</a></p>
</li>
<li>
<p><a href="osch.htm#GUID-B8306DC5-7EC6-4BC2-A3E3-2468AE3748F0">Using the ExternalTable Command-Line Tool</a></p>
</li>
<li>
<p><a href="osch.htm#GUID-DE18BF85-1C5A-4FC9-A9F7-74D25B7131DB">Creating External Tables</a></p>
</li>
<li>
<p><a href="osch.htm#GUID-1B68FABA-7C4B-4057-B8E4-7CEDEF09FC87">Updating External Tables</a></p>
</li>
<li>
<p><a href="osch.htm#GUID-C8057DF4-54D1-4478-8849-B7FED3A65CC0">Exploring External Tables and Location Files</a></p>
</li>
<li>
<p><a href="osch.htm#GUID-C4C64DDC-C5D8-4D21-828E-B854714A8236">Dropping Database Objects Created by Oracle SQL Connector for HDFS</a></p>
</li>
<li>
<p><a href="osch.htm#GUID-DE43256A-317C-4462-B6C1-F3D26B961121">More About External Tables Generated by the ExternalTable Tool</a></p>
</li>
<li>
<p><a href="osch.htm#GUID-ACF0F58B-307F-42F0-939E-F1891977C713">Configuring Oracle SQL Connector for HDFS</a></p>
</li>
<li>
<p><a href="osch.htm#GUID-DAD4017F-D8C8-467D-8B3F-BF307C49B7F6">Performance Tips for Querying Data in HDFS</a></p>
</li>
</ul>
</div>
<a id="BDCUG126"></a>
<div class="props_rev_3"><a id="GUID-4E28BF02-4DB2-4C20-900E-1AC0238387C1"></a>
<h2 id="BDCUG-GUID-4E28BF02-4DB2-4C20-900E-1AC0238387C1" class="sect2"><span class="enumeration_section">2.1</span> About Oracle SQL Connector for HDFS</h2>
<div>
<p>Using Oracle SQL Connector for HDFS, you can use Oracle Database to access and analyze data residing in Apache Hadoop in these formats:</p>
<ul style="list-style-type: disc;">
<li>
<p>Data Pump files in HDFS</p>
</li>
<li>
<p>Delimited text files in HDFS</p>
</li>
<li>
<p>Delimited text files in Apache Hive tables</p>
</li>
</ul>
<p>For other file formats, such as JSON files, you can stage the input as delimited text in a new Hive table and then use Oracle SQL Connector for HDFS. Partitioned Hive tables are supported, enabling you to represent a subset of Hive table partitions in Oracle Database, instead of the entire Hive table.</p>
<p>Oracle SQL Connector for HDFS uses external tables and database views to provide Oracle Database with read access to Hive tables, and to delimited text files and Data Pump files in HDFS. An <span class="bold">external table</span> is an Oracle Database object that identifies the location of data outside of a database. Oracle Database accesses the data by using the metadata provided when the external table was created. Oracle SQL Connector for HDFS creates database views over external tables to support access to partitioned Hive tables. By querying the external tables or views, you can access data stored in HDFS and Hive tables as if that data were stored in tables in an Oracle database.</p>
<p>To create these objects in Oracle Database, you use the <code class="codeph">ExternalTable</code> command-line tool provided with Oracle SQL Connector for HDFS. You provide <code class="codeph">ExternalTable</code> with information about the data source in Hadoop and about your schema in an Oracle Database. You provide this information either as options to the <code class="codeph">ExternalTable</code> command or in an XML file. The ExternalTable command-line tool can be used from either a shell or from SQL Developer.</p>
<p>When the external table is ready, you can query the data the same as any other database table. You can query and join data in HDFS or a Hive table with other database-resident data.</p>
<p>You can also perform bulk loads of data into Oracle database tables using SQL.You may prefer that the data resides in an Oracle database (either all of it or just a selection) if it is queried routinely. Oracle SQL Connector for HDFS functions as a Hadoop client running on the Oracle database and uses the external table preprocessor <code class="codeph">hdfs_stream</code> to access data in HDFS. Oracle Shell for Hadoop Loaders has commands to create and external table and do a bulk load in one step.</p>
<div class="infoboxnotealso" id="GUID-4E28BF02-4DB2-4C20-900E-1AC0238387C1__GUID-48D45992-F530-47EA-854A-1EDBD1DF51EA">
<p class="notep1">See Also:</p>
The following Oracle blog provides information on using Oracle SQL Developer: <a href="https://blogs.oracle.com/bigdataconnectors/move-data-between-apache-hadoop-and-oracle-database-with-sql-developer" target="_blank">https://blogs.oracle.com/bigdataconnectors/move-data-between-apache-hadoop-and-oracle-database-with-sql-developer</a></div>
</div>
</div>
<a id="BDCUG428"></a><a id="BDCUG427"></a>
<div class="props_rev_3"><a id="GUID-24900721-3F45-4E57-B7DF-51B1BBEE8B23"></a>
<h2 id="BDCUG-GUID-24900721-3F45-4E57-B7DF-51B1BBEE8B23" class="sect2"><span class="enumeration_section">2.2</span> Getting Started With Oracle SQL Connector for HDFS</h2>
<div>
<div class="section">
<p>The following list identifies the basic steps that you take when using Oracle SQL Connector for HDFS.</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Log in to a system where Oracle SQL Connector for HDFS is installed, which can be the Oracle Database system, a node in the Hadoop cluster, or a system set up as a remote client for the Hadoop cluster.</span>
<div>
<p>See <span class="q">"<a href="start.htm#GUID-1DC6751B-13F9-4AC6-9779-B9B767F9A125">Installing and Configuring a Hadoop Client on the Oracle Database System</a>."</span></p>
</div>
</li>
<li class="stepexpand"><span>The first time you use Oracle SQL Connector for HDFS, ensure that the software is configured.</span>
<div>
<p>See <span class="q">"<a href="osch.htm#GUID-B7D11F0D-B75F-449E-85D6-62D61E43F240">Configuring Your System for Oracle SQL Connector for HDFS</a>."</span> You might also need to edit <code class="codeph">hdfs_stream</code> if your environment is unique. See <span class="q">"<a href="start.htm#GUID-AF1ED141-F0DF-418F-B8D6-024C56401615">Installing Oracle SQL Connector for HDFS</a>"</span>.</p>
</div>
</li>
<li class="stepexpand"><span>If you are connecting to a secure cluster, then run <code class="codeph">kinit</code> to authenticate yourself.</span>
<div>
<p>See <span class="q">"<a href="start.htm#GUID-969D15F2-D7A1-4742-8A44-0041B346CDAC">Using Oracle SQL Connector for HDFS on a Secure Hadoop Cluster</a>."</span></p>
</div>
</li>
<li class="stepexpand"><span>Create an XML document describing the connections and the data source, unless you are providing these properties in the <code class="codeph">ExternalTable</code> command.</span>
<div>
<p>See <span class="q">"<a href="osch.htm#GUID-C8057DF4-54D1-4478-8849-B7FED3A65CC0">Exploring External Tables and Location Files</a>."</span></p>
</div>
</li>
<li class="stepexpand"><span>Create a shell script containing an <code class="codeph">ExternalTable</code> command.</span>
<div>
<p>See <span class="q">"<a href="osch.htm#GUID-B8306DC5-7EC6-4BC2-A3E3-2468AE3748F0">Using the ExternalTable Command-Line Tool</a>."</span></p>
</div>
</li>
<li class="stepexpand"><span>Run the shell script.</span></li>
<li class="stepexpand"><span>If the job fails, then use the diagnostic messages in the output to identify and correct the error. Depending on how far the job progressed before failing, you may need to delete the table definition from the Oracle database before rerunning the script.</span></li>
<li class="stepexpand"><span>After the job succeeds, connect to Oracle Database as the owner of the external table. Query the table to ensure that the data is accessible.</span></li>
<li class="stepexpand"><span>If the data will be queried frequently, then you may want to load it into a database table to improve querying performance. External tables do not have indexes or partitions.</span>
<div>
<p><a id="d9651e240" class="indexterm-anchor"></a><a id="d9651e244" class="indexterm-anchor"></a>If you want the data to be compressed as it loads into the table, then create the table with the <code class="codeph">COMPRESS</code> option.</p>
</div>
</li>
<li class="stepexpand"><span>To delete the Oracle Database objects created by Oracle SQL Connector for HDFS, use the <code class="codeph">-drop</code> command.</span>
<div>
<p>See <span class="q">"<a href="osch.htm#GUID-C4C64DDC-C5D8-4D21-828E-B854714A8236">Dropping Database Objects Created by Oracle SQL Connector for HDFS</a>"</span>.</p>
</div>
</li>
</ol>
<div class="example" id="GUID-24900721-3F45-4E57-B7DF-51B1BBEE8B23__CHDCDFFJ">
<p class="titleinexample">Example 2-1 Accessing HDFS Data Files from Oracle Database</p>
<p>The following illustrates these steps:</p>
<pre dir="ltr">
$ <span class="bold">cat moviefact_hdfs.sh</span>
# Add environment variables
export OSCH_HOME="/u01/connectors/orahdfs-&lt;version&gt;"
 
hadoop jar $OSCH_HOME/jlib/orahdfs.jar \
       oracle.hadoop.exttab.ExternalTable \
       -conf /home/oracle/movies/moviefact_hdfs.xml \
       -createTable

$ <span class="bold">cat moviefact_hdfs.xml</span>
&lt;?xml version="1.0"?&gt;
 &lt;configuration&gt;
    &lt;property&gt;
      &lt;name&gt;oracle.hadoop.exttab.tableName&lt;/name&gt;
      &lt;value&gt;MOVIE_FACTS_EXT&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
      &lt;name&gt;oracle.hadoop.exttab.locationFileCount&lt;/name&gt;
      &lt;value&gt;4&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
      &lt;name&gt;oracle.hadoop.exttab.dataPaths&lt;/name&gt;
      &lt;value&gt;/user/oracle/moviework/data/part*&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
      &lt;name&gt;oracle.hadoop.exttab.fieldTerminator&lt;/name&gt;
      &lt;value&gt;\u0009&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
      &lt;name&gt;oracle.hadoop.exttab.defaultDirectory&lt;/name&gt;
      &lt;value&gt;MOVIEDEMO_DIR&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
      &lt;name&gt;oracle.hadoop.exttab.nullIfSpecifier&lt;/name&gt;
      &lt;value&gt;\N&lt;/&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
      &lt;name&gt;oracle.hadoop.exttab.columnNames&lt;/name&gt;
      &lt;value&gt;CUST_ID,MOVIE_ID,GENRE_ID,TIME_ID,RECOMMENDED,ACTIVITY_ID,RATING,SALES&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
      &lt;name&gt;oracle.hadoop.exttab.colMap.TIME_ID.columnType&lt;/name&gt;
      &lt;value&gt;TIMESTAMP&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
      &lt;name&gt;oracle.hadoop.exttab.colMap.timestampMask&lt;/name&gt;
      &lt;value&gt;YYYY-MM-DD:HH:MI:SS&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
      &lt;name&gt;oracle.hadoop.exttab.colMap.RECOMMENDED.columnType&lt;/name&gt;
      &lt;value&gt;NUMBER&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
      &lt;name&gt;oracle.hadoop.exttab.colMap.ACTIVITY_ID.columnType&lt;/name&gt;
      &lt;value&gt;NUMBER&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
      &lt;name&gt;oracle.hadoop.exttab.colMap.RATING.columnType&lt;/name&gt;
      &lt;value&gt;NUMBER&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
      &lt;name&gt;oracle.hadoop.exttab.colMap.SALES.columnType&lt;/name&gt;
      &lt;value&gt;NUMBER&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
      &lt;name&gt;oracle.hadoop.exttab.sourceType&lt;/name&gt;
      &lt;value&gt;text&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
      &lt;name&gt;oracle.hadoop.connection.url&lt;/name&gt;
      &lt;value&gt;jdbc:oracle:thin:@localhost:1521:orcl&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
      &lt;name&gt;oracle.hadoop.connection.user&lt;/name&gt;
      &lt;value&gt;MOVIEDEMO&lt;/value&gt;
    &lt;/property&gt;  
&lt;/configuration&gt;

$ <span class="bold">sh moviefact_hdfs.sh</span>
Oracle SQL Connector for HDFS Release 3.4.0 - Production
 
Copyright (c) 2011, 2015, Oracle and/or its affiliates. All rights reserved.
 
[Enter Database Password: <span class="italic"><span class="bold">password</span></span>]
The create table command succeeded.
 
CREATE TABLE "MOVIEDEMO"."MOVIE_FACTS_EXT"
(
 "CUST_ID"                        VARCHAR2(4000),
 "MOVIE_ID"                       VARCHAR2(4000),
 "GENRE_ID"                       VARCHAR2(4000),
 "TIME_ID"                        TIMESTAMP(9),
 "RECOMMENDED"                    NUMBER,
 "ACTIVITY_ID"                    NUMBER,
 "RATING"                         NUMBER,
 "SALES"                          NUMBER
)
ORGANIZATION EXTERNAL
( 
   TYPE ORACLE_LOADER
   DEFAULT DIRECTORY "MOVIEDEMO_DIR"
   ACCESS PARAMETERS
   (
     RECORDS DELIMITED BY 0X'0A'
     CHARACTERSET AL32UTF8
     PREPROCESSOR "OSCH_BIN_PATH":'hdfs_stream'
     FIELDS TERMINATED BY 0X'09'
     MISSING FIELD VALUES ARE NULL
     (
       "CUST_ID" CHAR(4000),
       "MOVIE_ID" CHAR(4000),
       "GENRE_ID" CHAR(4000),
       "TIME_ID" CHAR,
       "RECOMMENDED" CHAR,
       "ACTIVITY_ID" CHAR,
       "RATING" CHAR,
       "SALES" CHAR
     )
   )
   LOCATION
   (
     'osch-20141114064206-5250-1',
     'osch-20141114064206-5250-2',
     'osch-20141114064206-5250-3',
     'osch-20141114064206-5250-4'
   )
) PARALLEL REJECT LIMIT UNLIMITED;
 
The following location files were created.
 
osch-20141114064206-5250-1 contains 1 URI, 12754882 bytes
 
    12754882 hdfs://localhost.localdomain:8020/user/oracle/moviework/data/part-00001
 
osch-20141114064206-5250-2 contains 1 URI, 438 bytes
 
         438 hdfs://localhost.localdomain:8020/user/oracle/moviework/data/part-00002
 
osch-20141114064206-5250-3 contains 1 URI, 432 bytes
 
         432 hdfs://localhost.localdomain:8020/user/oracle/moviework/data/part-00003
 
osch-20141114064206-5250-4 contains 1 URI, 202 bytes
 
         202 hdfs://localhost.localdomain:8020/user/oracle/moviework/data/part-00004

$ <span class="bold">sqlplus moviedemo</span>
 
SQL*Plus: Release 12.1.0.1.0 Production on Fri Apr 18 09:24:18 2014
 
Copyright (c) 1982, 2013, Oracle.  All rights reserved.
 
Enter password: <span class="italic"><span class="bold">password</span></span>
Last Successful login time: Thu Apr 17 2014 18:42:01 -05:00
 
Connected to:
Oracle Database 12c Enterprise Edition Release 12.1.0.1.0 - 64bit Production
With the Partitioning, OLAP, Advanced Analytics and Real Application Testing options
 
SQL&gt; <span class="bold">DESCRIBE movie_facts_ext;</span>
 Name                                      Null?    Type
 ----------------------------------------- -------- ----------------------------
 CUST_ID                                            VARCHAR2(4000)
 MOVIE_ID                                           VARCHAR2(4000)
 GENRE_ID                                           VARCHAR2(4000)
 TIME_ID                                            TIMESTAMP(9)
 RECOMMENDED                                        NUMBER
 ACTIVITY_ID                                        NUMBER
 RATING                                             NUMBER
 SALES                                              NUMBER

SQL&gt; <span class="bold">CREATE TABLE movie_facts AS SELECT * FROM movie_facts_ext;</span>
 
Table created.

SQL&gt; <span class="bold">SELECT movie_id, time_id, recommended, rating FROM movie_facts WHERE rownum &lt; 5;</span>
 
MOVIE_ID TIME_ID                          RECOMMENDED     RATING
-------- -------------------------------- ----------- ----------
205      03-DEC-10 03.14.54.000000000 AM            1          1
77       14-AUG-11 10.46.55.000000000 AM            1          3
116      24-NOV-11 05.43.00.000000000 AM            1          5
141      01-JAN-11 05.17.57.000000000 AM            1          4
</pre></div>
<!-- class="example" --></div>
</div>
<div class="props_rev_3"><a id="GUID-B7D11F0D-B75F-449E-85D6-62D61E43F240"></a>
<h2 id="BDCUG-GUID-B7D11F0D-B75F-449E-85D6-62D61E43F240" class="sect2"><span class="enumeration_section">2.3</span> Configuring Your System for Oracle SQL Connector for HDFS</h2>
<div>
<div class="section">
<p>You can run the <code class="codeph">ExternalTable</code> command-line tool provided with Oracle SQL Connector for HDFS on either the Oracle Database system or the Hadoop cluster:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p>For Hive sources, log in to either a node in the Hadoop cluster or a system set up as a Hadoop client for the cluster.</p>
</li>
<li>
<p>For text and Data Pump format files, log in to either the Oracle Database system or a node in the Hadoop cluster.</p>
</li>
</ul>
<p>Oracle SQL Connector for HDFS requires additions to the <code class="codeph">HADOOP_CLASSPATH</code> environment variable on the system where you log in to run the tool. Your system administrator may have set them up for you when creating your account, or may have left that task for you. See <span class="q">"<a href="start.htm#GUID-3CF6C2E9-B91B-48CB-ADFC-9D5FA25FBCBE">OS-Level Requirements for OSCH Users</a>"</span>.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Setting up the environment variables:</p>
<ul style="list-style-type: disc;">
<li>
<p>Verify that <code class="codeph">HADOOP_CLASSPATH</code> includes the path to the JAR files for Oracle SQL Connector for HDFS:</p>
<pre dir="ltr">
<span class="italic">path</span>/orahdfs-&lt;version&gt;/jlib/*
</pre></li>
<li>
<p>If you are logged in to a Hadoop cluster with Hive data sources, then verify that <code class="codeph">HADOOP_CLASSPATH</code> also includes the Hive JAR files and conf directory. For example:</p>
<pre dir="ltr">
/usr/lib/hive/lib/*
/etc/hive/conf
</pre></li>
<li>
<p>For your convenience, you can create an <code class="codeph">OSCH_HOME</code> environment variable. The following is the Bash command for setting it <span>on Oracle Big Data Appliance</span>:</p>
<pre dir="ltr">
$ export OSCH_HOME="/opt/oracle/orahdfs-&lt;version&gt;"
</pre></li>
</ul>
</div>
<!-- class="section" -->
<div class="section">
<div class="infoboxnotealso" id="GUID-B7D11F0D-B75F-449E-85D6-62D61E43F240__GUID-6B751E44-54FB-4DE8-B375-718A52CB89E8">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="q">"<a href="start.htm#GUID-0C502703-D303-44DC-8F7C-4BD858DF62BC">Oracle SQL Connector for Hadoop Distributed File System Setup</a>"</span> for instructions for installing the software and setting up user accounts on both systems.</p>
</li>
<li>
<p><span class="italic"><code class="codeph">OSCH_HOME</code></span><code class="codeph">/doc/README.txt</code> for information about known problems with Oracle SQL Connector for HDFS.</p>
</li>
</ul>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="BDCUG985"></a>
<div class="props_rev_3"><a id="GUID-20FEC35B-5935-4289-9B6E-4031863F1D01"></a>
<h2 id="BDCUG-GUID-20FEC35B-5935-4289-9B6E-4031863F1D01" class="sect2"><span class="enumeration_section">2.4</span> Using Oracle SQL Connector for HDFS with Oracle Big Data Appliance and Oracle Exadata</h2>
<div>
<p>Oracle SQL Connector for HDFS is a command-line utility that accepts generic command line arguments supported by the org.apache.hadoop.util.Tool interface. It also provides a preprocessor for Oracle external tables. See the <a class="olink BIGUG257" target="_blank" href="../BIGUG/exadata.htm#BIGUG257"><span class="italic">Oracle Big Data Appliance Software User's Guide</span></a> for instructions on configuring Oracle Exadata Database Machine for Use with Oracle Big Data Appliance.</p>
</div>
</div>
<a id="BDCUG133"></a>
<div class="props_rev_3"><a id="GUID-B8306DC5-7EC6-4BC2-A3E3-2468AE3748F0"></a>
<h2 id="BDCUG-GUID-B8306DC5-7EC6-4BC2-A3E3-2468AE3748F0" class="sect2"><span class="enumeration_section">2.5</span> Using the ExternalTable Command-Line Tool</h2>
<div>
<p>Oracle SQL Connector for HDFS provides a command-line tool named <code class="codeph">ExternalTable</code>. This section describes the basic use of this tool. See <span class="q">"<a href="osch.htm#GUID-DE18BF85-1C5A-4FC9-A9F7-74D25B7131DB">Creating External Tables</a>"</span> for the command syntax that is specific to your data source format.</p>
</div>
<a id="BDCUG352"></a>
<div class="props_rev_3"><a id="GUID-1623AC95-C2C9-43B8-AF6B-59A84741E7A6"></a>
<h3 id="BDCUG-GUID-1623AC95-C2C9-43B8-AF6B-59A84741E7A6" class="sect3"><span class="enumeration_section">2.5.1</span> About ExternalTable</h3>
<div>
<p>The <code class="codeph">ExternalTable</code> tool uses the values of several properties to do the following tasks:</p>
<ul style="list-style-type: disc;">
<li>
<p>Create an external table</p>
</li>
<li>
<p>Populate the location files</p>
</li>
<li>
<p>Publish location files to an existing external table</p>
</li>
<li>
<p>List the location files</p>
</li>
<li>
<p>Describe an external table</p>
</li>
</ul>
<p>You can specify these property values in an XML document or individually on the command line. .</p>
</div>
<div>
<div class="relinfo">
<p><strong>Related Topics</strong></p>
<ul>
<li><a href="osch.htm#GUID-ACF0F58B-307F-42F0-939E-F1891977C713">Configuring Oracle SQL Connector for HDFS</a></li>
</ul>
</div>
</div>
</div>
<a id="BDCUG265"></a>
<div class="props_rev_3"><a id="GUID-485E5CE2-7D1C-4ACC-BBF0-79EEE312AB22"></a>
<h3 id="BDCUG-GUID-485E5CE2-7D1C-4ACC-BBF0-79EEE312AB22" class="sect3"><span class="enumeration_section">2.5.2</span> ExternalTable Command-Line Tool Syntax</h3>
<div>
<p>This is the full syntax of the <a id="d9651e516" class="indexterm-anchor"></a><code class="codeph">ExternalTable</code> command-line tool, which is run using the <code class="codeph">hadoop</code> command:</p>
<pre dir="ltr">
hadoop jar <span class="italic">OSCH_HOME</span>/jlib/orahdfs.jar \
oracle.hadoop.exttab.ExternalTable \
[-conf <span class="italic">config_file</span>]... \ 
[-D <span class="italic">property=value</span>]... \
-createTable [--noexecute [--output <span class="italic">filename.sql</span>]] 
  | -drop [--noexecute]
  | -describe
  | -publish [--noexecute] 
  | -listlocations [--details]
  | -getDDL
</pre>
<p>You can either create the <code class="codeph">OSCH_HOME</code> environment variable or replace <span class="italic"><code class="codeph">OSCH_HOME</code></span> in the command syntax with the full path to the installation directory for Oracle SQL Connector for HDFS. On <span>Oracle Big Data Appliance</span>, this directory is:</p>
<pre dir="ltr">
/opt/oracle/orahdfs-<span class="italic">&lt;version&gt;</span>
</pre>
<p>For example, you might run the <code class="codeph">ExternalTable</code> command-line tool with a command like this:</p>
<pre dir="ltr">
hadoop jar /opt/oracle/orahdfs-&lt;version&gt;/jlib/orahdfs.jar \
oracle.hadoop.exttab.ExternalTable \
     .
     .
     .
</pre>
<div class="section">
<p class="subhead3">Generic Options and User Commands</p>
<dl>
<dt class="dlterm"><a id="GUID-485E5CE2-7D1C-4ACC-BBF0-79EEE312AB22__GUID-9337004E-798B-4EBA-9B86-A19D79C04704"><!-- --></a>-conf <span class="italic">config_file</span></dt>
<dd>
<p>Identifies the name of an XML configuration file containing properties needed by the command being executed.</p>
</dd>
<dt class="dlterm"><a id="GUID-485E5CE2-7D1C-4ACC-BBF0-79EEE312AB22__GUID-19098FF0-A18F-4179-A577-CC656B0202B0"><!-- --></a>-D <span class="italic">property=value</span></dt>
<dd>
<p>Assigns a value to a specific property.</p>
</dd>
<dt class="dlterm"><a id="GUID-485E5CE2-7D1C-4ACC-BBF0-79EEE312AB22__GUID-728CF5EF-1604-4DC9-A9D6-4174C8E7D62B"><!-- --></a>-createTable [--noexecute [--output <span class="italic">filename</span>]]</dt>
<dd>
<p>Creates an external table definition and publishes the data URIs to the location files of the external table. The output report shows the DDL used to create the external table and lists the contents of the location files. Oracle SQL Connector for HDFS also checks the database to ensure that the required database directories exist and that you have the necessary permissions.</p>
<p>For partitioned Hive tables, Oracle SQL Connector for HDFS creates external tables, views, and a metadata table. See <a href="osch.htm#GUID-8E3F6EDA-87A7-44AE-AA9F-E47F17FA1DE6__CBHGJDEE" title="Hive partitioned table objects">Table 2-2</a>.</p>
<p>Specify the metadata table name for partitioned Hive tables, or the external table name for all other data sources.</p>
<p>Use the <code class="codeph">--noexecute</code> option to see the execution plan of the command. The operation is not executed, but the report includes the details of the execution plan and any errors. The <code class="codeph">--output</code> option writes the table DDL from the <code class="codeph">-createTable</code> command to a file. Oracle recommends that you first execute a <code class="codeph">-createTable</code> command with <code class="codeph">--noexecute</code>.</p>
</dd>
<dt class="dlterm"><a id="GUID-485E5CE2-7D1C-4ACC-BBF0-79EEE312AB22__GUID-8DC9EF88-9622-4BC5-845B-B16572B0C0CB"><!-- --></a>-drop [--noexecute]</dt>
<dd>
<p>Deletes one or more Oracle Database objects created by Oracle SQL Connector for HDFS to support a particular data source. Specify the metadata table name for partitioned Hive tables, or the external table name for all other data sources. An error occurs if you attempt to drop a table or view that Oracle SQL Connector for HDFS did not create.</p>
<p>Use the <code class="codeph">--noexecute</code> option to list the objects to be deleted.</p>
</dd>
<dt class="dlterm"><a id="GUID-485E5CE2-7D1C-4ACC-BBF0-79EEE312AB22__BABFBGJA"><!-- --></a>-describe</dt>
<dd>
<p>Provides information about the Oracle Database objects created by Oracle SQL Connector for HDFS. Use this command instead of <code class="codeph">-getDDL</code> or <code class="codeph">-listLocations</code>.</p>
</dd>
<dt class="dlterm"><a id="GUID-485E5CE2-7D1C-4ACC-BBF0-79EEE312AB22__GUID-49A69768-85EE-447F-A7B7-8B601480B417"><!-- --></a>-publish [--noexecute]</dt>
<dd>
<p>Publishes the data URIs to the location files of an existing external table. Use this command after adding new data files, so that the existing external table can access them.</p>
<p>Use the <code class="codeph">--noexecute</code> option to see the execution plan of the command. The operation is not executed, but the report shows the planned SQL <code class="codeph">ALTER TABLE</code> command and location files. The report also shows any errors.</p>
<p>Oracle recommends that you first execute a <code class="codeph">-publish</code> command with <code class="codeph">--noexecute</code>.</p>
<p>See <span class="q">"<a href="osch.htm#GUID-1B68FABA-7C4B-4057-B8E4-7CEDEF09FC87">Updating External Tables</a>."</span></p>
</dd>
<dt class="dlterm"><a id="GUID-485E5CE2-7D1C-4ACC-BBF0-79EEE312AB22__GUID-E793D03D-F78A-4AC1-A5FD-51C2779B12C8"><!-- --></a>-listLocations [--details]</dt>
<dd>
<p>Shows the location file content as text. With the <code class="codeph">--details</code> option, this command provides a detailed listing. This command is deprecated in release 3.0. Use &ldquo;-describe&rdquo; instead.</p>
</dd>
<dt class="dlterm"><a id="GUID-485E5CE2-7D1C-4ACC-BBF0-79EEE312AB22__GUID-8E0E2463-D910-4C91-9072-9F5AE2FA874C"><!-- --></a>-getDDL</dt>
<dd>
<p>Prints the table definition of an existing external table. This command is deprecated in release 3.0. Use &ldquo;-describe&rdquo; instead.</p>
</dd>
</dl>
</div>
<!-- class="section" --></div>
<div>
<div class="relinfo">
<p><strong>Related Topics</strong></p>
<ul>
<li><a href="osch.htm#GUID-ACF0F58B-307F-42F0-939E-F1891977C713">Configuring Oracle SQL Connector for HDFS</a></li>
</ul>
</div>
<div class="infoboxnotealso" id="GUID-485E5CE2-7D1C-4ACC-BBF0-79EEE312AB22__GUID-BDB6F0B7-989A-425E-8824-A04708A13992">
<p class="notep1">See Also:</p>
<p><span class="q">"<a href="preface.htm#GUID-18267A26-5BFE-4B91-8E92-20BA3DCBC303">Syntax Conventions</a>"</span></p>
</div>
</div>
</div>
</div>
<a id="BDCUG353"></a>
<div class="props_rev_3"><a id="GUID-DE18BF85-1C5A-4FC9-A9F7-74D25B7131DB"></a>
<h2 id="BDCUG-GUID-DE18BF85-1C5A-4FC9-A9F7-74D25B7131DB" class="sect2"><span class="enumeration_section">2.6</span> Creating External Tables</h2>
<div>
<div class="section">
<p>You can create external tables automatically using the <code class="codeph">ExternalTable</code> tool provided in Oracle SQL Connector for HDFS.</p>
</div>
<!-- class="section" --></div>
<a id="BDCUG512"></a><a id="BDCUG354"></a>
<div class="props_rev_3"><a id="GUID-12B55EF6-391A-4CD1-A253-6AB41E57FE71"></a>
<h3 id="BDCUG-GUID-12B55EF6-391A-4CD1-A253-6AB41E57FE71" class="sect3"><span class="enumeration_section">2.6.1</span> Creating External Tables with the ExternalTable Tool</h3>
<div>
<div class="section">
<p>To create an external table using the <code class="codeph">ExternalTable</code> tool, follow the instructions for your data source:</p>
</div>
<!-- class="section" -->
<div class="section">
<ul style="list-style-type: disc;">
<li>
<p><a href="osch.htm#GUID-E7C2C668-81C1-4DB3-AAEB-3C7F64DCF4D1">Creating External Tables from Data Pump Format Files</a></p>
</li>
<li>
<p><a href="osch.htm#GUID-04DCB165-5114-45C0-BEC6-4AACE4916CC2">Creating External Tables from Hive Tables</a></p>
</li>
<li>
<p><a href="osch.htm#GUID-D6443754-E986-465D-9447-FF0C2650F358">Creating External Tables from Delimited Text Files</a></p>
</li>
</ul>
<p>When the <code class="codeph">ExternalTable -createTable</code> command finishes executing, the external table is ready for use. <code class="codeph">ExternalTable</code> also manages the location files for the external table. See <span class="q">"<a href="osch.htm#GUID-B761157E-AF8B-4087-A91C-66EAE4203887">Location File Management</a>."</span></p>
<p>To create external tables manually, follow the instructions in <span class="q">"<a href="osch.htm#GUID-F4F36969-1063-4E7C-92DB-B4F3F09BC036">Creating External Tables in SQL</a>."</span></p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">ExternalTable Syntax for -createTable</p>
</div>
<!-- class="section" -->
<div class="section">
<p>Use the following syntax to create an external table and populate its location files:</p>
<pre dir="ltr">
hadoop jar <span class="italic">OSCH_HOME</span>/jlib/orahdfs.jar oracle.hadoop.exttab.ExternalTable \
[-conf <span class="italic">config_file</span>]... \
[-D <span class="italic">property=value</span>]... \
-createTable [--noexecute]
</pre></div>
<!-- class="section" --></div>
</div>
<a id="BDCUG356"></a>
<div class="props_rev_3"><a id="GUID-E7C2C668-81C1-4DB3-AAEB-3C7F64DCF4D1"></a>
<h3 id="BDCUG-GUID-E7C2C668-81C1-4DB3-AAEB-3C7F64DCF4D1" class="sect3"><span class="enumeration_section">2.6.2</span> Creating External Tables from Data Pump Format Files</h3>
<div>
<p>Oracle SQL Connector for HDFS supports only Data Pump files produced by Oracle Loader for Hadoop, and does not support generic Data Pump files produced by Oracle Utilities.</p>
<p>Oracle SQL Connector for HDFS creates the external table definition for Data Pump files by using the metadata from the Data Pump file header. It uses the <code class="codeph">ORACLE_LOADER</code> access driver with the <a id="d9651e823" class="indexterm-anchor"></a><a id="d9651e825" class="indexterm-anchor"></a><code class="codeph">preprocessor</code> access parameter. It also uses a special access parameter named <code class="codeph">EXTERNAL VARIABLE DATA</code>, which enables <code class="codeph">ORACLE_LOADER</code> to read the Data Pump format files generated by Oracle Loader for Hadoop.</p>
<p>To delete the external tables and location files created by Oracle SQL Connector for HDFS, use the <code class="codeph">-drop</code> command. See <span class="q">"<a href="osch.htm#GUID-C4C64DDC-C5D8-4D21-828E-B854714A8236">Dropping Database Objects Created by Oracle SQL Connector for HDFS</a>"</span>.</p>
<div class="infobox-note" id="GUID-E7C2C668-81C1-4DB3-AAEB-3C7F64DCF4D1__GUID-68F3346A-6D77-4395-8965-1AEC87BDA367">
<p class="notep1">Note:</p>
<p>Oracle SQL Connector for HDFS requires a <a id="d9651e848" class="indexterm-anchor"></a>patch to Oracle Database 11.2.0.2 before the connector can access <a id="d9651e851" class="indexterm-anchor"></a>Data Pump files produced by Oracle Loader for Hadoop. To download this patch, go to <a href="http://support.oracle.com" target="_blank"><code class="codeph">http://support.oracle.com</code></a> and search for bug 14557588.</p>
<p>Release 11.2.0.3 and later releases do not require this patch.</p>
</div>
</div>
<a id="BDCUG357"></a>
<div class="props_rev_3"><a id="GUID-8CEB9412-419D-421C-A3B8-52B2F69D5173"></a>
<h4 id="BDCUG-GUID-8CEB9412-419D-421C-A3B8-52B2F69D5173" class="sect4"><span class="enumeration_section">2.6.2.1</span> Required Properties</h4>
<div>
<div class="section">
<p>These properties are required:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDGEECH">oracle.hadoop.exttab.tableName</a></code></p>
</li>
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDIFAHG">oracle.hadoop.exttab.defaultDirectory</a></code></p>
</li>
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDIICAB">oracle.hadoop.exttab.dataPaths</a></code></p>
</li>
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDHIEEJ">oracle.hadoop.exttab.sourceType</a>=datapump</code></p>
</li>
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDCIHEA">oracle.hadoop.connection.url</a></code></p>
</li>
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDHJACG">oracle.hadoop.connection.user</a></code></p>
</li>
</ul>
<p>See <span class="q">"<a href="osch.htm#GUID-ACF0F58B-307F-42F0-939E-F1891977C713">Configuring Oracle SQL Connector for HDFS</a>"</span> for descriptions of the properties used for this data source.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="BDCUG358"></a>
<div class="props_rev_3"><a id="GUID-3438FE68-FC93-4245-A584-90094E2B85DF"></a>
<h4 id="BDCUG-GUID-3438FE68-FC93-4245-A584-90094E2B85DF" class="sect4"><span class="enumeration_section">2.6.2.2</span> Optional Properties</h4>
<div>
<div class="section">
<p>This property is optional:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDHHJCA">oracle.hadoop.exttab.logDirectory</a></code></p>
</li>
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CBHGEHIE">oracle.hadoop.exttab.createLogFiles</a></code></p>
</li>
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CBHIJJHE">oracle.hadoop.exttab.createBadFiles</a></code></p>
</li>
</ul>
</div>
<!-- class="section" --></div>
</div>
<a id="BDCUG431"></a><a id="BDCUG430"></a>
<div class="props_rev_3"><a id="GUID-B493D4F6-E099-4841-B94F-0C15DD476865"></a>
<h4 id="BDCUG-GUID-B493D4F6-E099-4841-B94F-0C15DD476865" class="sect4"><span class="enumeration_section">2.6.2.3</span> Defining Properties in XML Files for Data Pump Format Files</h4>
<div>
<p>The following example is an XML template containing the properties that describe a Data Pump file. To use the template, cut and paste it into a text file, enter the appropriate values to describe your Data Pump file, and delete any optional properties that you do not need. For more information about using XML templates, see <span class="q">"<a href="osch.htm#GUID-8B6BF6AB-C6C0-4DAA-8417-B4215E1A5470">Creating a Configuration File</a>."</span></p>
<div class="example" id="GUID-B493D4F6-E099-4841-B94F-0C15DD476865__CHDECJAF">
<p class="titleinexample">Example 2-2 XML Template with Properties for a Data Pump Format File</p>
<pre dir="ltr">
&lt;?xml version="1.0"?&gt;

&lt;!-- Required Properties --&gt;

&lt;configuration&gt;
  &lt;property&gt;
    &lt;name&gt;oracle.hadoop.exttab.tableName&lt;/name&gt;
    &lt;value&gt;<span class="italic"><span class="bold">value</span></span>&lt;/value&gt;
  &lt;/property&gt;
  &lt;property&gt;
    &lt;name&gt;oracle.hadoop.exttab.defaultDirectory&lt;/name&gt;
    &lt;value&gt;<span class="italic"><span class="bold">value</span></span>&lt;/value&gt;
  &lt;/property&gt;
  &lt;property&gt;
    &lt;name&gt;oracle.hadoop.exttab.dataPaths&lt;/name&gt;
    &lt;value&gt;<span class="italic"><span class="bold">value</span></span>&lt;/value&gt;
  &lt;/property&gt;
  &lt;property&gt;
    &lt;name&gt;oracle.hadoop.exttab.sourceType&lt;/name&gt;
    &lt;value&gt;datapump&lt;/value&gt;
  &lt;/property&gt;
  &lt;property&gt;
    &lt;name&gt;oracle.hadoop.connection.url&lt;/name&gt;
    &lt;value&gt;<span class="italic"><span class="bold">value</span></span>&lt;/value&gt;
  &lt;/property&gt;
  &lt;property&gt;
    &lt;name&gt;oracle.hadoop.connection.user&lt;/name&gt;
    &lt;value&gt;<span class="italic"><span class="bold">value</span></span>&lt;/value&gt;
  &lt;/property&gt;

&lt;!-- Optional Properties --&gt;

  &lt;property&gt;
    &lt;name&gt;oracle.hadoop.exttab.logDirectory&lt;/name&gt;
    &lt;value&gt;<span class="italic"><span class="bold">value</span></span>&lt;/value&gt;
  &lt;/property&gt;
&lt;/configuration&gt;
</pre></div>
<!-- class="example" --></div>
</div>
<a id="BDCUG360"></a><a id="BDCUG359"></a>
<div class="props_rev_3"><a id="GUID-39A0A87C-7051-41E1-9F53-45802075C1FD"></a>
<h4 id="BDCUG-GUID-39A0A87C-7051-41E1-9F53-45802075C1FD" class="sect4"><span class="enumeration_section">2.6.2.4</span> Example</h4>
<div>
<p>The following example creates an external table named <code class="codeph">SALES_DP_XTAB</code> to read Data Pump files.</p>
<div class="example" id="GUID-39A0A87C-7051-41E1-9F53-45802075C1FD__CHDHBDDD">
<p class="titleinexample">Example 2-3 Defining an External Table for Data Pump Format Files</p>
<p>Log in as the operating system user that Oracle Database runs under (typically the <code class="codeph">oracle</code> user), and create a file-system directory. For Oracle RAC, you must create a clusterwide directory on a distributed file system.</p>
<pre dir="ltr">
$ mkdir /data/sales_dp_dir
</pre>
<p>Create a database directory and grant read and write access to it:</p>
<pre dir="ltr">
$ sqlplus / as sysdba
SQL&gt; CREATE OR REPLACE DIRECTORY sales_dp_dir AS '/data/sales_dp_dir'
SQL&gt; GRANT READ, WRITE ON DIRECTORY sales_dp_dir TO scott;
</pre>
<p>Create the external table:</p>
<pre dir="ltr">
$ export OSCH_HOME="/opt/oracle/orahdfs-&lt;version&gt;"
$ export HADOOP_CLASSPATH="$OSCH_HOME/jlib/*:$HADOOP_CLASSPATH"
$ hadoop jar <span class="italic">OSCH_HOME</span>/jlib/orahdfs.jar \
oracle.hadoop.exttab.ExternalTable \
-D oracle.hadoop.exttab.tableName=SALES_DP_XTAB \
-D oracle.hadoop.exttab.sourceType=datapump \
-D oracle.hadoop.exttab.dataPaths=hdfs:///user/scott/olh_sales_dpoutput/ \
-D oracle.hadoop.exttab.defaultDirectory=SALES_DP_DIR \
-D oracle.hadoop.connection.url=jdbc:oracle:thin:@//myhost:1521/myservicename \
-D oracle.hadoop.connection.user=SCOTT \
-createTable
</pre></div>
<!-- class="example" --></div>
</div>
</div>
<a id="BDCUG361"></a>
<div class="props_rev_3"><a id="GUID-04DCB165-5114-45C0-BEC6-4AACE4916CC2"></a>
<h3 id="BDCUG-GUID-04DCB165-5114-45C0-BEC6-4AACE4916CC2" class="sect3"><span class="enumeration_section">2.6.3</span> Creating External Tables from Hive Tables</h3>
<div>
<div class="section">
<p>Oracle SQL Connector for HDFS creates the external table definition from a Hive table by contacting the Hive metastore client to retrieve information about the table columns and the location of the table data. In addition, the Hive table data paths are published to the location files of the Oracle external table.</p>
<p>To read Hive table metadata, Oracle SQL Connector for HDFS requires that the Hive JAR files are included in the <code class="codeph">HADOOP_CLASSPATH</code> variable. Oracle SQL Connector for HDFS must be installed and running on a computer with a working Hive client.</p>
<p>Ensure that you add the Hive configuration directory to the <code class="codeph">HADOOP_CLASSPATH</code> environment variable. You must have a correctly functioning Hive client.</p>
<p>For Hive managed tables, the data paths come from the warehouse directory.</p>
<p>For Hive external tables, the data paths from an external location in HDFS are published to the location files of the Oracle external table. Hive external tables can have no data, because Hive does not check if the external location is defined when the table is created. If the Hive table is empty, then one location file is published with just a header and no data URIs.</p>
<p>The Oracle external table is not a "live" Hive table. After changes are made to a Hive table, you must use the <code class="codeph">ExternalTable</code> tool to drop the existing external table and create a new one.</p>
<p>To delete the external tables and location files created by Oracle SQL Connector for HDFS, use the <code class="codeph">-drop</code> command. See <span class="q">"<a href="osch.htm#GUID-C4C64DDC-C5D8-4D21-828E-B854714A8236">Dropping Database Objects Created by Oracle SQL Connector for HDFS</a>"</span>.</p>
</div>
<!-- class="section" --></div>
<a id="BDCUG362"></a>
<div class="props_rev_3"><a id="GUID-51E94897-9EC2-4057-BC63-5C93CAED72F9"></a>
<h4 id="BDCUG-GUID-51E94897-9EC2-4057-BC63-5C93CAED72F9" class="sect4"><span class="enumeration_section">2.6.3.1</span> Hive Table Requirements</h4>
<div>
<p>Oracle SQL Connector for HDFS supports Hive tables that are defined using <code class="codeph">ROW FORMAT DELIMITED</code> and <code class="codeph">FILE FORMAT TEXTFILE</code> clauses. Both Hive-managed tables and Hive external tables are supported.</p>
<p>Oracle SQL Connector for HDFS also supports partitioned Hive tables. In this case Oracle SQL Connector for HDFS creates one or more external tables and database views. See <span class="q">"<a href="osch.htm#GUID-644E03E3-CA31-4E2C-9C54-4FC14780E396">Creating External Tables from Partitioned Hive Tables</a>"</span>.</p>
<p>Hive tables can be either bucketed or not bucketed. All primitive types from Hive 0.10.0 are supported.</p>
</div>
</div>
<a id="BDCUG514"></a><a id="BDCUG513"></a>
<div class="props_rev_3"><a id="GUID-D03BCC23-ED5E-4E01-9806-2416F99BFDD1"></a>
<h4 id="BDCUG-GUID-D03BCC23-ED5E-4E01-9806-2416F99BFDD1" class="sect4"><span class="enumeration_section">2.6.3.2</span> Data Type Mappings</h4>
<div>
<div class="section">
<p>The following table shows the default data-type mappings between Hive and Oracle. To change the data type of the target columns created in the Oracle external table, set the <code class="codeph">oracle.hadoop.exttab.hive.columnType.*</code> properties listed under <span class="q">"<a href="osch.htm#GUID-2E30336C-48BD-43DF-AA83-EF9E9E57F11E">Optional Properties</a>."</span>.</p>
</div>
<!-- class="section" -->
<div class="tblformal" id="GUID-D03BCC23-ED5E-4E01-9806-2416F99BFDD1__CHDIDJEC">
<p class="titleintable">Table 2-1 Hive Data Type Mappings</p>
<table class="cellalignment32" title="Hive Data Type Mappings" summary="Mappings between Hive and Oracle Database data types">
<thead>
<tr class="cellalignment26">
<th class="cellalignment33" id="d9651e1203">Data Type of Source Hive Column</th>
<th class="cellalignment34" id="d9651e1206">Default Data Type of Target Oracle Column</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment26">
<td class="cellalignment35" id="d9651e1211" headers="d9651e1203">
<p><code class="codeph">INT</code>, <code class="codeph">BIGINT</code>, <code class="codeph">SMALLINT</code>, <code class="codeph">TINYINT</code></p>
</td>
<td class="cellalignment36" headers="d9651e1211 d9651e1206">
<p><code class="codeph">INTEGER</code></p>
</td>
</tr>
<tr class="cellalignment26">
<td class="cellalignment35" id="d9651e1229" headers="d9651e1203">
<p><code class="codeph">DECIMAL</code></p>
</td>
<td class="cellalignment36" headers="d9651e1229 d9651e1206">
<p><code class="codeph">NUMBER</code></p>
</td>
</tr>
<tr class="cellalignment26">
<td class="cellalignment35" id="d9651e1238" headers="d9651e1203">
<p><code class="codeph">DECIMAL</code><span class="italic"><code class="codeph">(p,s)</code></span></p>
</td>
<td class="cellalignment36" headers="d9651e1238 d9651e1206">
<p><code class="codeph">NUMBER</code><span class="italic"><code class="codeph">(p,s)</code></span></p>
</td>
</tr>
<tr class="cellalignment26">
<td class="cellalignment35" id="d9651e1253" headers="d9651e1203">
<p><code class="codeph">DOUBLE</code>, <code class="codeph">FLOAT</code></p>
</td>
<td class="cellalignment36" headers="d9651e1253 d9651e1206">
<p><code class="codeph">NUMBER</code></p>
</td>
</tr>
<tr class="cellalignment26">
<td class="cellalignment35" id="d9651e1265" headers="d9651e1203">
<p><code class="codeph">DATE</code></p>
</td>
<td class="cellalignment36" headers="d9651e1265 d9651e1206">
<p><code class="codeph">DATE</code> with format mask <code class="codeph">YYYY-MM-DD</code></p>
</td>
</tr>
<tr class="cellalignment26">
<td class="cellalignment35" id="d9651e1277" headers="d9651e1203">
<p><code class="codeph">TIMESTAMP</code></p>
</td>
<td class="cellalignment36" headers="d9651e1277 d9651e1206">
<p><code class="codeph">TIMESTAMP with format mask YYYY-MM-DD&nbsp;HH24:MI:SS.FF</code></p>
</td>
</tr>
<tr class="cellalignment26">
<td class="cellalignment35" id="d9651e1286" headers="d9651e1203">
<p><code class="codeph">BOOLEAN</code></p>
</td>
<td class="cellalignment36" headers="d9651e1286 d9651e1206">
<p><code class="codeph">VARCHAR2(5)</code></p>
</td>
</tr>
<tr class="cellalignment26">
<td class="cellalignment35" id="d9651e1295" headers="d9651e1203">
<p><code class="codeph">CHAR</code><span class="italic"><code class="codeph">(size)</code></span></p>
</td>
<td class="cellalignment36" headers="d9651e1295 d9651e1206">
<p><code class="codeph">CHAR</code><span class="italic"><code class="codeph">(size)</code></span></p>
</td>
</tr>
<tr class="cellalignment26">
<td class="cellalignment35" id="d9651e1310" headers="d9651e1203">
<p><code class="codeph">STRING</code></p>
</td>
<td class="cellalignment36" headers="d9651e1310 d9651e1206">
<p><code class="codeph">VARCHAR2(4000)</code></p>
</td>
</tr>
<tr class="cellalignment26">
<td class="cellalignment35" id="d9651e1319" headers="d9651e1203">
<p><code class="codeph">VARCHAR</code></p>
</td>
<td class="cellalignment36" headers="d9651e1319 d9651e1206">
<p><code class="codeph">VARCHAR2(4000)</code></p>
</td>
</tr>
<tr class="cellalignment26">
<td class="cellalignment35" id="d9651e1328" headers="d9651e1203">
<p><code class="codeph">VARCHAR</code><span class="italic"><code class="codeph">(size)</code></span></p>
</td>
<td class="cellalignment36" headers="d9651e1328 d9651e1206">
<p><code class="codeph">VARCHAR2</code><span class="italic"><code class="codeph">(size)</code></span></p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
</div>
<a id="BDCUG363"></a>
<div class="props_rev_3"><a id="GUID-0EAAD4BC-4A84-4069-A3CF-FDAC0C11EA3C"></a>
<h4 id="BDCUG-GUID-0EAAD4BC-4A84-4069-A3CF-FDAC0C11EA3C" class="sect4"><span class="enumeration_section">2.6.3.3</span> Required Properties</h4>
<div>
<div class="section">
<p>These properties are required for Hive table sources:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDGEECH">oracle.hadoop.exttab.tableName</a></code></p>
</li>
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDIFAHG">oracle.hadoop.exttab.defaultDirectory</a></code></p>
</li>
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDHIEEJ">oracle.hadoop.exttab.sourceType</a>=hive</code></p>
</li>
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDGEEHE">oracle.hadoop.exttab.hive.tableName</a></code></p>
</li>
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDBGBEC">oracle.hadoop.exttab.hive.databaseName</a></code></p>
</li>
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDCIHEA">oracle.hadoop.connection.url</a></code></p>
</li>
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDHJACG">oracle.hadoop.connection.user</a></code></p>
</li>
</ul>
<p>See <span class="q">"<a href="osch.htm#GUID-ACF0F58B-307F-42F0-939E-F1891977C713">Configuring Oracle SQL Connector for HDFS</a>"</span> for descriptions of the properties used for this data source.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="BDCUG364"></a>
<div class="props_rev_3"><a id="GUID-2E30336C-48BD-43DF-AA83-EF9E9E57F11E"></a>
<h4 id="BDCUG-GUID-2E30336C-48BD-43DF-AA83-EF9E9E57F11E" class="sect4"><span class="enumeration_section">2.6.3.4</span> Optional Properties</h4>
<div>
<div class="section">
<p>These properties are optional for Hive table sources:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDBEDAD">oracle.hadoop.exttab.hive.columnType.*</a></code></p>
</li>
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__BABBFCCI">oracle.hadoop.exttab.hive.partitionFilter</a></code></p>
</li>
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDHIGIF">oracle.hadoop.exttab.locationFileCount</a></code></p>
</li>
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDECGEA">oracle.hadoop.exttab.colMap.columnLength</a></code></p>
</li>
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDECACF">oracle.hadoop.exttab.colMap.column_name.columnLength</a></code></p>
</li>
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDJCADA">oracle.hadoop.exttab.colMap.columnType</a></code></p>
</li>
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDECFCE">oracle.hadoop.exttab.colMap.column_name.columnType</a></code></p>
</li>
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDBBDFJ">oracle.hadoop.exttab.colMap.dateMask</a></code></p>
</li>
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDGGDBI">oracle.hadoop.exttab.colMap.column_name.dateMask</a></code></p>
</li>
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDGHFEB">oracle.hadoop.exttab.colMap.fieldLength</a></code></p>
</li>
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDJFBGB">oracle.hadoop.exttab.colMap.column_name.fieldLength</a></code></p>
</li>
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDFABDH">oracle.hadoop.exttab.colMap.timestampMask</a></code></p>
</li>
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDCEGBB">oracle.hadoop.exttab.colMap.column_name.timestampMask</a></code></p>
</li>
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDCECEJ">oracle.hadoop.exttab.colMap.timestampTZMask</a></code></p>
</li>
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDDBIID">oracle.hadoop.exttab.colMap.column_name.timestampTZMask</a></code></p>
</li>
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CBHGEHIE">oracle.hadoop.exttab.createLogFiles</a></code></p>
</li>
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CBHIJJHE">oracle.hadoop.exttab.createBadFiles</a></code></p>
</li>
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDHHJCA">oracle.hadoop.exttab.logDirectory</a></code></p>
</li>
</ul>
</div>
<!-- class="section" --></div>
</div>
<a id="BDCUG433"></a><a id="BDCUG432"></a>
<div class="props_rev_3"><a id="GUID-C7FBA747-CD1A-4449-971D-EF223771E14E"></a>
<h4 id="BDCUG-GUID-C7FBA747-CD1A-4449-971D-EF223771E14E" class="sect4"><span class="enumeration_section">2.6.3.5</span> Defining Properties in XML Files for Hive Tables</h4>
<div>
<div class="section">
<p>The following example is an <a id="d9651e1567" class="indexterm-anchor"></a><a id="d9651e1571" class="indexterm-anchor"></a>XML template containing the properties that describe a Hive table. To use the template, cut and paste it into a text file, enter the appropriate values to describe your Hive table, and delete any optional properties that you do not need. For more information about using XML templates, see <span class="q">"<a href="osch.htm#GUID-8B6BF6AB-C6C0-4DAA-8417-B4215E1A5470">Creating a Configuration File</a>."</span></p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-C7FBA747-CD1A-4449-971D-EF223771E14E__CHDEDIGJ">
<p class="titleinexample">Example 2-4 XML Template with Properties for a Hive Table</p>
<pre dir="ltr">
&lt;?xml version="1.0"?&gt;

&lt;!-- Required Properties --&gt;

&lt;configuration&gt;
  &lt;property&gt;
    &lt;name&gt;oracle.hadoop.exttab.tableName&lt;/name&gt;
    &lt;value&gt;<span class="italic"><span class="bold">value</span></span>&lt;/value&gt;
  &lt;/property&gt;
  &lt;property&gt;
    &lt;name&gt;oracle.hadoop.exttab.defaultDirectory&lt;/name&gt;
    &lt;value&gt;<span class="italic"><span class="bold">value</span></span>&lt;/value&gt;
  &lt;/property&gt;
  &lt;property&gt;
    &lt;name&gt;oracle.hadoop.exttab.sourceType&lt;/name&gt;
    &lt;value&gt;hive&lt;/value&gt;
  &lt;/property&gt;
  &lt;property&gt;
    &lt;name&gt;oracle.hadoop.exttab.hive.partitionFilter&lt;/name&gt;
    &lt;value&gt;<span class="italic"><span class="bold">value</span></span>&lt;/value&gt;
  &lt;/property&gt;
  &lt;property&gt;
    &lt;name&gt;oracle.hadoop.exttab.hive.tableName&lt;/name&gt;
    &lt;value&gt;<span class="italic"><span class="bold">value</span></span>&lt;/value&gt;
  &lt;/property&gt;
  &lt;property&gt;
    &lt;name&gt;oracle.hadoop.exttab.hive.databaseName&lt;/name&gt;
    &lt;value&gt;<span class="italic"><span class="bold">value</span></span>&lt;/value&gt;
  &lt;/property&gt;
  &lt;property&gt;
    &lt;name&gt;oracle.hadoop.connection.url&lt;/name&gt;
    &lt;value&gt;<span class="italic"><span class="bold">value</span></span>&lt;/value&gt;
  &lt;/property&gt;
  &lt;property&gt;
    &lt;name&gt;oracle.hadoop.connection.user&lt;/name&gt;
    &lt;value&gt;<span class="italic"><span class="bold">value</span></span>&lt;/value&gt;
  &lt;/property&gt;

&lt;!-- Optional Properties --&gt;

  &lt;property&gt;
    &lt;name&gt;oracle.hadoop.exttab.locationFileCount&lt;/name&gt;
    &lt;value&gt;<span class="italic"><span class="bold">value</span></span>&lt;/value&gt;
  &lt;/property&gt;
  &lt;property&gt;
    &lt;name&gt;oracle.hadoop.exttab.hive.columnType.<span class="italic">TYPE</span>&lt;/name&gt;
    &lt;value&gt;<span class="italic"><span class="bold">value</span></span>&lt;/value&gt;
  &lt;/property&gt;
&lt;/configuration&gt;
</pre></div>
<!-- class="example" --></div>
</div>
<a id="BDCUG366"></a><a id="BDCUG365"></a>
<div class="props_rev_3"><a id="GUID-3720F3B8-A087-4225-ABD7-FE0239F788D2"></a>
<h4 id="BDCUG-GUID-3720F3B8-A087-4225-ABD7-FE0239F788D2" class="sect4"><span class="enumeration_section">2.6.3.6</span> Example</h4>
<div>
<p>This example creates an external table named <code class="codeph">SALES_HIVE_XTAB</code> to read data from a Hive table. The example defines all the properties on the command line instead of in an XML file.</p>
<div class="example" id="GUID-3720F3B8-A087-4225-ABD7-FE0239F788D2__CHDIEDDE">
<p class="titleinexample">Example 2-5 Defining an External Table for a nonpartitioned Hive Table</p>
<p>Log in as the operating system user that Oracle Database runs under (typically the <code class="codeph">oracle</code> user), and create a file-system directory:</p>
<pre dir="ltr">
$ mkdir /data/sales_hive_dir
</pre>
<p>Create a database directory and grant read and write access to it:</p>
<pre dir="ltr">
$ sqlplus / as sysdba
SQL&gt; CREATE OR REPLACE DIRECTORY sales_hive_dir AS '/data/sales_hive_dir'
SQL&gt; GRANT READ, WRITE ON DIRECTORY sales_hive_dir TO scott;
</pre>
<p>Create the external table:</p>
<pre dir="ltr">
$ export OSCH_HOME="/opt/oracle/orahdfs-&lt;version&gt;"
$ export HADOOP_CLASSPATH="$OSCH_HOME/jlib/*:/usr/lib/hive/lib/*:/etc/hive/conf:$HADOOP_CLASSPATH"

$ hadoop jar <span class="italic">OSCH_HOME</span>/jlib/orahdfs.jar \
oracle.hadoop.exttab.ExternalTable \
-D oracle.hadoop.exttab.tableName=SALES_HIVE_XTAB \
-D oracle.hadoop.exttab.sourceType=hive \
-D oracle.hadoop.exttab.locationFileCount=2 \
-D oracle.hadoop.exttab.hive.tableName=sales_country_us \
-D oracle.hadoop.exttab.hive.databaseName=salesdb \
-D oracle.hadoop.exttab.defaultDirectory=SALES_HIVE_DIR \
-D oracle.hadoop.connection.url=jdbc:oracle:thin:@//myhost:1521/myservicename \
-D oracle.hadoop.connection.user=SCOTT \
-createTable
</pre></div>
<!-- class="example" -->
<div class="infobox-note" id="GUID-3720F3B8-A087-4225-ABD7-FE0239F788D2__GUID-535F6B18-384D-4C9C-91EE-50E59535807B">
<p class="notep1">Note:</p>
<p>For nonpartitioned Hive tables and other data sources the value for property <code class="codeph">oracle.hadoop.exttab.tableName</code> is the name of the external table.</p>
</div>
</div>
</div>
<a id="BDCUG1032"></a>
<div class="props_rev_3"><a id="GUID-644E03E3-CA31-4E2C-9C54-4FC14780E396"></a>
<h4 id="BDCUG-GUID-644E03E3-CA31-4E2C-9C54-4FC14780E396" class="sect4"><span class="enumeration_section">2.6.3.7</span> Creating External Tables from Partitioned Hive Tables</h4>
<div>
<p>Oracle SQL Connector for HDFS supports partitioned Hive tables, enabling you to query a single partition, a range of partitions, or all partitions. You can represent all Hive partitions or a subset of them in Oracle Database.</p>
<div class="infoboxnotealso" id="GUID-644E03E3-CA31-4E2C-9C54-4FC14780E396__GUID-950281B8-2D41-4161-8050-D857DF233BB8">
<p class="notep1">See Also:</p>
<p><span class="q">"<a href="osch.htm#GUID-04DCB165-5114-45C0-BEC6-4AACE4916CC2">Creating External Tables from Hive Tables</a>"</span> for required properties, data type mappings, and other details applicable to all Hive table access using Oracle SQL Connector for HDFS.</p>
</div>
</div>
<a id="BDCUG1034"></a><a id="BDCUG1033"></a>
<div class="props_rev_3"><a id="GUID-8E3F6EDA-87A7-44AE-AA9F-E47F17FA1DE6"></a>
<h5 id="BDCUG-GUID-8E3F6EDA-87A7-44AE-AA9F-E47F17FA1DE6" class="sect5"><span class="enumeration_section">2.6.3.7.1</span> Database Objects that Support Access to Partitioned Hive Tables</h5>
<div>
<div class="section">
<p>To support a partitioned Hive table, Oracle SQL Connector for HDFS creates the objects described in the following table.</p>
</div>
<!-- class="section" -->
<div class="tblformal" id="GUID-8E3F6EDA-87A7-44AE-AA9F-E47F17FA1DE6__CBHGJDEE">
<p class="titleintable">Table 2-2 Oracle Database Objects for Supporting a Partitioned Hive Table</p>
<table class="cellalignment32" title="Oracle Database Objects for Supporting a Partitioned Hive Table" summary="Hive partitioned table objects">
<thead>
<tr class="cellalignment26">
<th class="cellalignment37" id="d9651e1736">Database Object</th>
<th class="cellalignment38" id="d9651e1739">Description</th>
<th class="cellalignment39" id="d9651e1742">Naming Convention(1)</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment26">
<td class="cellalignment40" id="d9651e1750" headers="d9651e1736">
<p>External Tables</p>
</td>
<td class="cellalignment41" headers="d9651e1750 d9651e1739">
<p>One for each Hive partition</p>
</td>
<td class="cellalignment42" headers="d9651e1750 d9651e1742">
<p><code class="codeph">OSCH</code><span class="italic"><code class="codeph">table_name_n</code></span></p>
<p>For example, <code class="codeph">OSCHDAILY_1</code> and <code class="codeph">OSCHDAILY_2</code></p>
</td>
</tr>
<tr class="cellalignment26">
<td class="cellalignment40" id="d9651e1771" headers="d9651e1736">
<p>Views</p>
</td>
<td class="cellalignment41" headers="d9651e1771 d9651e1739">
<p>One for each external table. Used for querying the Hive data.</p>
</td>
<td class="cellalignment42" headers="d9651e1771 d9651e1742">
<p><span class="italic"><code class="codeph">table_name_n</code></span></p>
<p>For example, <code class="codeph">DAILY_1</code> and <code class="codeph">DAILY_2</code></p>
</td>
</tr>
<tr class="cellalignment26">
<td class="cellalignment40" id="d9651e1790" headers="d9651e1736">
<p>Metadata Table</p>
</td>
<td class="cellalignment41" headers="d9651e1790 d9651e1739">
<p>One for the Hive table. Identifies all external tables and views associated with a particular Hive table. Specify this table when creating, describing, or dropping these database objects.</p>
</td>
<td class="cellalignment42" headers="d9651e1790 d9651e1742">
<p><span class="italic"><code class="codeph">table_name</code></span></p>
<p>For example, <code class="codeph">DAILY</code></p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p class="tablefootnote"><sup class="tablefootnote">Footnote&nbsp;1</sup> The "_n" suffixed with table name indicates a numeric value.</p>
<div class="section">
<p>For example, if a Hive table comprises five partitions, then Oracle SQL Connector for HDFS creates five external tables, five views, and one metadata table in Oracle Database.</p>
<p>To drop the objects described in <a href="osch.htm#GUID-8E3F6EDA-87A7-44AE-AA9F-E47F17FA1DE6__CBHGJDEE" title="Hive partitioned table objects">Table 2-2</a> and the location files, use the <code class="codeph">-drop</code> command. See <span class="q">"<a href="osch.htm#GUID-C4C64DDC-C5D8-4D21-828E-B854714A8236">Dropping Database Objects Created by Oracle SQL Connector for HDFS</a>"</span>.</p>
<div class="infobox-note" id="GUID-8E3F6EDA-87A7-44AE-AA9F-E47F17FA1DE6__GUID-30B6AFC7-4D33-404F-8201-B9532AB041B8">
<p class="notep1">Note:</p>
<p>For partitioned Hive tables and other data sources the value for property <code class="codeph">oracle.hadoop.exttab.tableName</code> is the name of the metadata table.</p>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="BDCUG1036"></a><a id="BDCUG1035"></a>
<div class="props_rev_3"><a id="GUID-F1691C30-454F-45C2-8F7E-BEE9811AF880"></a>
<h5 id="BDCUG-GUID-F1691C30-454F-45C2-8F7E-BEE9811AF880" class="sect5"><span class="enumeration_section">2.6.3.7.2</span> Querying the Metadata Table</h5>
<div>
<div class="section">
<p>The metadata table provides critical information about how to query the Hive table. The following table describes the columns of a metadata table.</p>
</div>
<!-- class="section" -->
<div class="tblformal" id="GUID-F1691C30-454F-45C2-8F7E-BEE9811AF880__CBHJFCCF">
<p class="titleintable">Table 2-3 Metadata Table Columns</p>
<table class="cellalignment32" title="Metadata Table Columns" summary="Metadata table column descriptions">
<thead>
<tr class="cellalignment26">
<th class="cellalignment43" id="d9651e1860">Column</th>
<th class="cellalignment44" id="d9651e1863">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment26">
<td class="cellalignment45" id="d9651e1868" headers="d9651e1860">
<p><code class="codeph">VIEW_NAME</code></p>
</td>
<td class="cellalignment46" headers="d9651e1868 d9651e1863">
<p>The Oracle Database view used to access a single Hive table partition. The view contains both Hive table and partition columns.</p>
</td>
</tr>
<tr class="cellalignment26">
<td class="cellalignment45" id="d9651e1876" headers="d9651e1860">
<p><code class="codeph">EXT_TABLE_NAME</code></p>
</td>
<td class="cellalignment46" headers="d9651e1876 d9651e1863">
<p>An Oracle external table that represents a Hive table partition. The external table contains only the Hive table columns and not the Hive partition columns.</p>
<p>To access all the data in a Hive partition, use the corresponding Oracle Database view.</p>
</td>
</tr>
<tr class="cellalignment26">
<td class="cellalignment45" id="d9651e1886" headers="d9651e1860">
<p><code class="codeph">HIVE_TABLE_NAME</code></p>
</td>
<td class="cellalignment46" headers="d9651e1886 d9651e1863">
<p>The partitioned Hive table being accessed through Oracle Database.</p>
</td>
</tr>
<tr class="cellalignment26">
<td class="cellalignment45" id="d9651e1894" headers="d9651e1860">
<p><code class="codeph">HIVE_DB_NAME</code></p>
</td>
<td class="cellalignment46" headers="d9651e1894 d9651e1863">
<p>The Hive database where the table resides.</p>
</td>
</tr>
<tr class="cellalignment26">
<td class="cellalignment45" id="d9651e1902" headers="d9651e1860">
<p><code class="codeph">HIVE&shy;_PART_FILTER</code></p>
</td>
<td class="cellalignment46" headers="d9651e1902 d9651e1863">
<p>The Hive partition filter used to select a subset of partitions for access by Oracle Database. A <code class="codeph">NULL</code> value indicates that all partitions are accessed.</p>
</td>
</tr>
<tr class="cellalignment26">
<td class="cellalignment45" id="d9651e1913" headers="d9651e1860">
<p>Partition Columns</p>
</td>
<td class="cellalignment46" headers="d9651e1913 d9651e1863">
<p>Each column used to partition the Hive table has a separate column in the metadata table. For example, the metadata table has columns for <code class="codeph">COUNTRY</code>, <code class="codeph">STATE</code>, and <code class="codeph">CITY</code> for a Hive table partitioned by a combination of <code class="codeph">COUNTRY</code>, <code class="codeph">STATE</code>, and <code class="codeph">CITY</code> values.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<div class="section">
<p>The following <code class="codeph">SELECT</code> statement queries a metadata table named <code class="codeph">HIVE_SALES_DATA</code>:</p>
<pre dir="ltr">
SQL&gt; SELECT view_name, ext_table_name, Hive_table_name, \
      hive_db_name, country, city \
      FROM hive_sales_data \
      WHERE state = 'TEXAS';
</pre>
<p>The results of the query identify three views with data from cities in Texas:</p>
<pre dir="ltr">
VIEW_NAME          EXT_TABLE_NAME         HIVE_TABLE_NAME   HIVE_DB_NAME  COUNTRY  CITY 
------------------------------------------------------------------------------------------
HIVE_SALES_DATA_1  OSCHHIVE_SALES_DATA_1  hive_sales_data   db_sales      US       AUSTIN
HIVE_SALES_DATA_2  OSCHHIVE_SALES_DATA_2  hive_sales_data   db_sales      US       HOUSTON
HIVE_SALES_DATA_3  OSCHHIVE_SALES_DATA_3  hive_sales_data   db_sales      US       DALLAS
</pre>
<p>The views include partition column values. Oracle recommends that you use the views while querying a partitioned Hive table, as the external tables do not include the partition column values.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="BDCUG1038"></a><a id="BDCUG1037"></a>
<div class="props_rev_3"><a id="GUID-AF57FC67-76A6-4BDF-B033-428FCBEBFF73"></a>
<h5 id="BDCUG-GUID-AF57FC67-76A6-4BDF-B033-428FCBEBFF73" class="sect5"><span class="enumeration_section">2.6.3.7.3</span> Creating UNION ALL Views for Querying</h5>
<div>
<div class="section">
<p>To facilitate querying, you can create <code class="codeph">UNION ALL</code> views over the individual partition views. Use the <code class="codeph">mkhive_unionall_view.sql</code> script, which is provided in the <code class="codeph">OSCH_HOME/example/sql</code> directory. To maintain performance, do not create <code class="codeph">UNION ALL</code> views over more than 50 to 100 views (depending on their size).</p>
<p>To use <code class="codeph">mkhive_unionall_view.sql</code>, use the following syntax:</p>
<pre dir="ltr">
@mkhive_unionall_view[.sql] <span class="italic">table</span> <span class="italic">schema</span> <span class="italic">view</span> <span class="italic">predicate</span>
</pre></div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">MKHIVE_UNIONALL_VIEW Script Parameters</p>
<dl>
<dt class="dlterm"><a id="GUID-AF57FC67-76A6-4BDF-B033-428FCBEBFF73__GUID-E4A2BB12-BBD0-4BE8-BA46-6EC91BBF6F35"><!-- --></a>table</dt>
<dd>
<p>The name of the metadata table in Oracle Database that represents a partitioned Hive table. Required.</p>
</dd>
<dt class="dlterm"><a id="GUID-AF57FC67-76A6-4BDF-B033-428FCBEBFF73__GUID-D33F652B-5313-417C-949A-31ADA75C009D"><!-- --></a>schema</dt>
<dd>
<p>The owner of the metadata table. Optional; defaults to your schema.</p>
</dd>
<dt class="dlterm"><a id="GUID-AF57FC67-76A6-4BDF-B033-428FCBEBFF73__GUID-BBB94FC4-870F-48BC-B854-5E364C1C72ED"><!-- --></a>view</dt>
<dd>
<p>The name of the <code class="codeph">UNION ALL</code> view created by the script. Optional; defaults to <span class="italic"><code class="codeph">table_</code></span><code class="codeph">ua</code>.</p>
</dd>
<dt class="dlterm"><a id="GUID-AF57FC67-76A6-4BDF-B033-428FCBEBFF73__GUID-B5CFE3FD-CB4B-44C3-9046-17E83CFF92F7"><!-- --></a>predicate</dt>
<dd>
<p>A <code class="codeph">WHERE</code> condition used to select the partitions in the Hive table to include in the <code class="codeph">UNION ALL</code> view. Optional; defaults to all partitions.</p>
</dd>
</dl>
</div>
<!-- class="section" -->
<div class="example" id="GUID-AF57FC67-76A6-4BDF-B033-428FCBEBFF73__GUID-C3072919-00F7-4F5E-A1F0-6F6D8182059F">
<p class="titleinexample">Example 2-6 Union All Views for Partitioned Hive Tables</p>
<p>The following example creates a <code class="codeph">UNION ALL</code> view named <code class="codeph">HIVE_SALES_DATA_UA</code>, which accesses all partitions listed in the <code class="codeph">HIVE_SALES_DATA</code> metadata table:</p>
<pre dir="ltr">
SQL&gt; @mkhive_unionall_view.sql HIVE_SALES_DATA null null null
 
</pre>
<p>This example creates a <code class="codeph">UNION ALL</code> view named <code class="codeph">ALL_SALES</code>, which accesses all partitions listed in the <code class="codeph">HIVE_SALES_DATA</code> metadata table:</p>
<pre dir="ltr">
SQL&gt; @mkhive_unionall_view.sql HIVE_SALES_DATA null ALL_SALES null
 
</pre>
<p>The next example creates a <code class="codeph">UNION ALL</code> view named <code class="codeph">TEXAS_SALES_DATA</code>, which accesses the rows of all partitions where <code class="codeph">STATE = 'TEXAS'</code>.</p>
<pre dir="ltr">
SQL&gt; @mkhive_unionallview.sql HIVE_SALES_DATA null TEXAS_SALES_DATA '(STATE = ''''TEXAS'''')'
</pre></div>
<!-- class="example" --></div>
</div>
<a id="BDCUG1039"></a>
<div class="props_rev_3"><a id="GUID-3EE1D0B7-C595-47F3-8BC4-9B760A9B8F39"></a>
<h5 id="BDCUG-GUID-3EE1D0B7-C595-47F3-8BC4-9B760A9B8F39" class="sect5"><span class="enumeration_section">2.6.3.7.4</span> Error Messages</h5>
<div>
<dl>
<dt class="dlterm"><a id="GUID-3EE1D0B7-C595-47F3-8BC4-9B760A9B8F39__GUID-5356A4E5-6810-47DC-B2BA-9E67EDB4F2BE"><!-- --></a>table name too long, max limit <span class="italic">length</span></dt>
<dd>
<p><span class="keyword">Cause:</span> The names generated for the database objects exceed 30 characters.</p>
</dd>
<dd class="ddexpand">
<p><span class="keyword">Action:</span> Specify a name that does not exceed 24 characters in the <code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDGEECH">oracle.hadoop.exttab.tableName</a></code> property. Oracle SQL Connector for HDFS generates external table names using the convention <code class="codeph">OSCH</code><span class="italic"><code class="codeph">table_name_n</code></span>. See <a href="osch.htm#GUID-8E3F6EDA-87A7-44AE-AA9F-E47F17FA1DE6__CBHGJDEE" title="Hive partitioned table objects">Table 2-2</a>.</p>
</dd>
<dt class="dlterm"><a id="GUID-3EE1D0B7-C595-47F3-8BC4-9B760A9B8F39__GUID-F7C03E53-DB66-48F6-BD8E-E1FD86FAB7BB"><!-- --></a>table/view names containing string <span class="italic">table_name</span> found in schema <span class="italic">schema_name</span></dt>
<dd>
<p><span class="keyword">Cause:</span> An attempt was made to create external tables for a partitioned Hive table, but the data objects already exist.</p>
</dd>
<dd class="ddexpand">
<p><span class="keyword">Action:</span> Use the <code class="codeph">hadoop -drop</code> command to drop the existing tables and views, and then retry the <code class="codeph">-createTable</code> command. If this solution fails, then you might have "dangling" objects. See <span class="q">"<a href="osch.htm#GUID-9241C297-CC71-4155-A658-10B8A658A397">Dropping Dangling Objects</a>"</span>.</p>
</dd>
</dl>
</div>
</div>
<a id="BDCUG1040"></a>
<div class="props_rev_3"><a id="GUID-9241C297-CC71-4155-A658-10B8A658A397"></a>
<h5 id="BDCUG-GUID-9241C297-CC71-4155-A658-10B8A658A397" class="sect5"><span class="enumeration_section">2.6.3.7.5</span> Dropping Dangling Objects</h5>
<div>
<div class="section">
<p>Always use Oracle SQL Connector for HDFS commands to manage objects created by the connector to support partitioned Hive tables. Dangling objects are caused when you use the SQL <code class="codeph">drop table</code> command to drop a metadata table instead of the <code class="codeph">-drop</code> command. If you are unable to drop the external tables and views for a partitioned Hive table, then they are dangling objects.</p>
<p>Notice the schema and table names in the error message generated when you attempted to drop the objects, and use them in the following procedure.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To drop dangling database objects:</p>
<ol>
<li>
<p>Open a SQL session with Oracle Database, and connect as the owner of the dangling objects.</p>
</li>
<li>
<p>Identify the location files of the external table by querying the <code class="codeph">ALL_EXTERNAL_LOCATIONS</code> and <code class="codeph">ALL_EXTERNAL_TABLES</code> data dictionary views:</p>
<pre dir="ltr">
SELECT a.table_name, a.directory_name, a.location \
FROM all_external_locations a, all_external_tables b \
WHERE a.table_name = b.table_name AND a.table_name \
LIKE 'OSCH<span class="italic">table</span>%' AND a.owner='<span class="italic">schema</span>'; 
 
</pre>
<p>In the <code class="codeph">LIKE</code> clause of the previous syntax, replace <span class="italic">table</span> and <span class="italic">schema</span> with the appropriate values.</p>
<p>In the output, the location file names have an <code class="codeph">osch-</code> prefix, such as <code class="codeph">osch-20140408014604-175-1</code>.</p>
</li>
<li>
<p>Identify the external tables by querying the <code class="codeph">ALL_EXTERNAL_TABLES</code> data dictionary view:</p>
<pre dir="ltr">
SELECT table_name FROM all_external_tables \
WHERE table_name \
LIKE 'OSCH<span class="italic">table</span>%' AND owner=<span class="italic">schema</span>;
 
</pre></li>
<li>
<p>Identify the database views by querying the <code class="codeph">ALL_VIEWS</code> data dictionary view:</p>
<pre dir="ltr">
SELECT view_name FROM all_views 
WHERE view_name 
LIKE '<span class="italic">table</span>%' AND owner='<span class="italic">schema</span>';
 
</pre></li>
<li>
<p>Inspect the tables, views, and location files to verify that they are not needed, using commands like the following:</p>
<pre dir="ltr">
DESCRIBE <span class="italic">schema.table</span>;
SELECT * FROM <span class="italic">schema.table</span>;

DESCRIBE <span class="italic">schema.view</span>;
SELECT * FROM <span class="italic">schema.view</span>;
</pre></li>
<li>
<p>Delete the location files, tables, and views that are not needed, using commands like the following:</p>
<pre dir="ltr">
EXECUTE utl_file.fremove('<span class="italic">directory</span>', '<span class="italic">location_file</span>');

DROP TABLE <span class="italic">schema</span>.<span class="italic">table</span>;
DROP VIEW <span class="italic">schema</span>.<span class="italic">view</span>;
</pre></li>
</ol>
</div>
<!-- class="section" --></div>
</div>
</div>
</div>
<a id="BDCUG367"></a>
<div class="props_rev_3"><a id="GUID-D6443754-E986-465D-9447-FF0C2650F358"></a>
<h3 id="BDCUG-GUID-D6443754-E986-465D-9447-FF0C2650F358" class="sect3"><span class="enumeration_section">2.6.4</span> Creating External Tables from Delimited Text Files</h3>
<div>
<p>Oracle SQL Connector for HDFS creates the external table definition for delimited text files using configuration properties that specify the number of columns, the text delimiter, and optionally, the external table column names. By default, all text columns in the external table are <code class="codeph">VARCHAR2</code>. If column names are not provided, they default to C1 to C<span class="italic">n</span>, where <span class="italic">n</span> is the number of columns specified by the <code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDFAGBD">oracle.hadoop.exttab.columnCount</a></code> property.</p>
</div>
<a id="BDCUG515"></a>
<div class="props_rev_3"><a id="GUID-6E5CA2E6-F9A6-4A02-8BBA-C3979D5F7C00"></a>
<h4 id="BDCUG-GUID-6E5CA2E6-F9A6-4A02-8BBA-C3979D5F7C00" class="sect4"><span class="enumeration_section">2.6.4.1</span> Data Type Mappings</h4>
<div>
<p>All text data sources are automatically mapped to <code class="codeph">VARCHAR2(4000)</code>. To change the data type of the target columns created in the Oracle external table, set the <code class="codeph">oracle.hadoop.exttab.colMap.*</code> properties listed under <span class="q">"<a href="osch.htm#GUID-B8D548BA-04B0-4CEE-885E-3F94C31779D0">Optional Properties</a>."</span></p>
</div>
</div>
<a id="BDCUG368"></a>
<div class="props_rev_3"><a id="GUID-30DE733A-CFF2-407E-961C-6E945DD5417A"></a>
<h4 id="BDCUG-GUID-30DE733A-CFF2-407E-961C-6E945DD5417A" class="sect4"><span class="enumeration_section">2.6.4.2</span> Required Properties</h4>
<div>
<div class="section">
<p>These properties are required for delimited text sources:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDGEECH">oracle.hadoop.exttab.tableName</a></code></p>
</li>
<li id="GUID-30DE733A-CFF2-407E-961C-6E945DD5417A__CHDCFHDG">
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDIFAHG">oracle.hadoop.exttab.defaultDirectory</a></code></p>
</li>
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDIICAB">oracle.hadoop.exttab.dataPaths</a></code></p>
</li>
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDFAGBD">oracle.hadoop.exttab.columnCount</a></code> or <code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDECECI">oracle.hadoop.exttab.columnNames</a></code></p>
</li>
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDCIHEA">oracle.hadoop.connection.url</a></code></p>
</li>
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDHJACG">oracle.hadoop.connection.user</a></code></p>
</li>
</ul>
<p>See <span class="q">"<a href="osch.htm#GUID-ACF0F58B-307F-42F0-939E-F1891977C713">Configuring Oracle SQL Connector for HDFS</a>"</span> for descriptions of the properties used for this data source.</p>
</div>
<!-- class="section" --></div>
</div>
<a id="BDCUG369"></a>
<div class="props_rev_3"><a id="GUID-B8D548BA-04B0-4CEE-885E-3F94C31779D0"></a>
<h4 id="BDCUG-GUID-B8D548BA-04B0-4CEE-885E-3F94C31779D0" class="sect4"><span class="enumeration_section">2.6.4.3</span> Optional Properties</h4>
<div>
<div class="section">
<p>These properties are optional for delimited text sources:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDCJJIE">oracle.hadoop.exttab.recordDelimiter</a></code></p>
</li>
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDGHEIG">oracle.hadoop.exttab.fieldTerminator</a></code></p>
</li>
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDDEDEC">oracle.hadoop.exttab.initialFieldEncloser</a></code></p>
</li>
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDDIDBJ">oracle.hadoop.exttab.trailingFieldEncloser</a></code></p>
</li>
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDHIGIF">oracle.hadoop.exttab.locationFileCount</a></code></p>
</li>
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDECGEA">oracle.hadoop.exttab.colMap.columnLength</a></code></p>
</li>
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDECACF">oracle.hadoop.exttab.colMap.column_name.columnLength</a></code></p>
</li>
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDJCADA">oracle.hadoop.exttab.colMap.columnType</a></code></p>
</li>
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDECFCE">oracle.hadoop.exttab.colMap.column_name.columnType</a></code></p>
</li>
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDBBDFJ">oracle.hadoop.exttab.colMap.dateMask</a></code></p>
</li>
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDGGDBI">oracle.hadoop.exttab.colMap.column_name.dateMask</a></code></p>
</li>
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDGHFEB">oracle.hadoop.exttab.colMap.fieldLength</a></code></p>
</li>
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDJFBGB">oracle.hadoop.exttab.colMap.column_name.fieldLength</a></code></p>
</li>
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__ORACLE.HADOOP.EXTTAB.COLMAP.COLUMN_-7635C966">oracle.hadoop.exttab.colMap.column_name.nullIfSpecifier</a></code></p>
</li>
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDFABDH">oracle.hadoop.exttab.colMap.timestampMask</a></code></p>
</li>
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDCEGBB">oracle.hadoop.exttab.colMap.column_name.timestampMask</a></code></p>
</li>
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDCECEJ">oracle.hadoop.exttab.colMap.timestampTZMask</a></code></p>
</li>
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDDBIID">oracle.hadoop.exttab.colMap.column_name.timestampTZMask</a></code></p>
</li>
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CBHGEHIE">oracle.hadoop.exttab.createLogFiles</a></code></p>
</li>
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CBHIJJHE">oracle.hadoop.exttab.createBadFiles</a></code></p>
</li>
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDHHJCA">oracle.hadoop.exttab.logDirectory</a></code></p>
</li>
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__ORACLE.HADOOP.EXTTAB.NULLIFSPECIFIE-7638F908">oracle.hadoop.exttab.nullIfSpecifier</a></code></p>
</li>
</ul>
</div>
<!-- class="section" --></div>
</div>
<a id="BDCUG435"></a><a id="BDCUG434"></a>
<div class="props_rev_3"><a id="GUID-19D12EFE-9600-44E6-8768-DDCF758F3254"></a>
<h4 id="BDCUG-GUID-19D12EFE-9600-44E6-8768-DDCF758F3254" class="sect4"><span class="enumeration_section">2.6.4.4</span> Defining Properties in XML Files for Delimited Text Files</h4>
<div>
<p>This example is an <a id="d9651e2623" class="indexterm-anchor"></a><a id="d9651e2627" class="indexterm-anchor"></a>XML template containing all the properties that describe a delimited text file. To use the template, cut and paste it into a text file, enter the appropriate values to describe your data files, and delete any optional properties that you do not need. For more information about using XML templates, see <span class="q">"<a href="osch.htm#GUID-8B6BF6AB-C6C0-4DAA-8417-B4215E1A5470">Creating a Configuration File</a>."</span></p>
<div class="example" id="GUID-19D12EFE-9600-44E6-8768-DDCF758F3254__CHDGBGCC">
<p class="titleinexample">Example 2-7 XML Template with Properties for a Delimited Text File</p>
<pre dir="ltr">
&lt;?xml version="1.0"?&gt;

&lt;!-- Required Properties --&gt;

&lt;configuration&gt;
  &lt;property&gt;
    &lt;name&gt;oracle.hadoop.exttab.tableName&lt;/name&gt;
    &lt;value&gt;<span class="italic"><span class="bold">value</span></span>&lt;/value&gt;
  &lt;/property&gt;
  &lt;property&gt;
    &lt;name&gt;oracle.hadoop.exttab.defaultDirectory&lt;/name&gt;
    &lt;value&gt;<span class="italic"><span class="bold">value</span></span>&lt;/value&gt;
  &lt;/property&gt;
  &lt;property&gt;
    &lt;name&gt;oracle.hadoop.exttab.dataPaths&lt;/name&gt;
    &lt;value&gt;<span class="italic"><span class="bold">value</span></span>&lt;/value&gt;
  &lt;/property&gt;

&lt;!-- Use either columnCount or columnNames --&gt;

  &lt;property&gt;
    &lt;name&gt;oracle.hadoop.exttab.columnCount&lt;/name&gt;
    &lt;value&gt;<span class="italic"><span class="bold">value</span></span>&lt;/value&gt;
  &lt;/property&gt;
  &lt;property&gt;
    &lt;name&gt;oracle.hadoop.exttab.columnNames&lt;/name&gt;
    &lt;value&gt;<span class="italic"><span class="bold">value</span></span>&lt;/value&gt;
  &lt;/property&gt;

  &lt;property&gt;
    &lt;name&gt;oracle.hadoop.connection.url&lt;/name&gt;
    &lt;value&gt;<span class="italic"><span class="bold">value</span></span>&lt;/value&gt;
  &lt;/property&gt;
  &lt;property&gt;
    &lt;name&gt;oracle.hadoop.connection.user&lt;/name&gt;
    &lt;value&gt;<span class="italic"><span class="bold">value</span></span>&lt;/value&gt;
  &lt;/property&gt;

&lt;!-- Optional Properties --&gt;

  &lt;property&gt;
    &lt;name&gt;oracle.hadoop.exttab.colMap.<span class="italic">TYPE</span>&lt;/name&gt;
    &lt;value&gt;<span class="italic"><span class="bold">value</span></span>&lt;/value&gt;
  &lt;/property&gt;
  &lt;property&gt;
    &lt;name&gt;oracle.hadoop.exttab.recordDelimiter&lt;/name&gt;
    &lt;value&gt;<span class="italic"><span class="bold">value</span></span>&lt;/value&gt;
  &lt;/property&gt;
  &lt;property&gt;
    &lt;name&gt;oracle.hadoop.exttab.fieldTerminator&lt;/name&gt;
    &lt;value&gt;<span class="italic"><span class="bold">value</span></span>&lt;/value&gt;
  &lt;/property&gt;
  &lt;property&gt;
    &lt;name&gt;oracle.hadoop.exttab.initialFieldEncloser&lt;/name&gt;
    &lt;value&gt;<span class="italic"><span class="bold">value</span></span>&lt;/value&gt;
  &lt;/property&gt;
  &lt;property&gt;
    &lt;name&gt;oracle.hadoop.exttab.trailingFieldEncloser&lt;/name&gt;
    &lt;value&gt;<span class="italic"><span class="bold">value</span></span>&lt;/value&gt;
  &lt;/property&gt;
  &lt;property&gt;
    &lt;name&gt;oracle.hadoop.exttab.locationFileCount&lt;/name&gt;
    &lt;value&gt;<span class="italic"><span class="bold">value</span></span>&lt;/value&gt;
  &lt;/property&gt;
&lt;/configuration&gt;
</pre></div>
<!-- class="example" --></div>
</div>
<a id="BDCUG371"></a><a id="BDCUG370"></a>
<div class="props_rev_3"><a id="GUID-6244E2B1-8BCF-4FA3-AAF9-F419FC585CFF"></a>
<h4 id="BDCUG-GUID-6244E2B1-8BCF-4FA3-AAF9-F419FC585CFF" class="sect4"><span class="enumeration_section">2.6.4.5</span> Example</h4>
<div>
<p>This example creates an external table named <code class="codeph">SALES_DT_XTAB</code> from delimited text files.</p>
<div class="example" id="GUID-6244E2B1-8BCF-4FA3-AAF9-F419FC585CFF__CHDCGEIB">
<p class="titleinexample">Example 2-8 Defining an External Table for Delimited Text Files</p>
<p>Log in as the operating system user that Oracle Database runs under (typically the <code class="codeph">oracle</code> user), and create a file-system directory:</p>
<pre dir="ltr">
$ mkdir /data/sales_dt_dir
</pre>
<p>Create a database directory and grant read and write access to it:</p>
<pre dir="ltr">
$ sqlplus / as sysdba
SQL&gt; CREATE OR REPLACE DIRECTORY sales_dt_dir AS '/data/sales_dt_dir'
SQL&gt; GRANT READ, WRITE ON DIRECTORY sales_dt_dir TO scott;
</pre>
<p>Create the external table:</p>
<pre dir="ltr">
$ export OSCH_HOME="/opt/oracle/orahdfs-&lt;version&gt;"
$ export HADOOP_CLASSPATH="$OSCH_HOME/jlib/*:$HADOOP_CLASSPATH"

$ hadoop jar <span class="italic">OSCH_HOME</span>/jlib/orahdfs.jar \
oracle.hadoop.exttab.ExternalTable \
-D oracle.hadoop.exttab.tableName=SALES_DT_XTAB \
-D oracle.hadoop.exttab.locationFileCount=2 \
-D oracle.hadoop.exttab.dataPaths="hdfs:///user/scott/olh_sales/*.dat" \
-D oracle.hadoop.exttab.columnCount=10 \
-D oracle.hadoop.exttab.defaultDirectory=SALES_DT_DIR \
-D oracle.hadoop.connection.url=jdbc:oracle:thin:@//myhost:1521/myservicename \
-D oracle.hadoop.connection.user=SCOTT \
-createTable
</pre></div>
<!-- class="example" --></div>
</div>
</div>
<a id="BDCUG372"></a>
<div class="props_rev_3"><a id="GUID-F4F36969-1063-4E7C-92DB-B4F3F09BC036"></a>
<h3 id="BDCUG-GUID-F4F36969-1063-4E7C-92DB-B4F3F09BC036" class="sect3"><span class="enumeration_section">2.6.5</span> Creating External Tables in SQL</h3>
<div>
<div class="section">
<p>You can create an external table manually for Oracle SQL Connector for HDFS. For example, the following procedure enables you to use external table syntax that is not exposed by the <code class="codeph">ExternalTable -createTable</code> command.</p>
<p>Additional syntax might not be supported for Data Pump format files.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To create an external table manually:</p>
<ol>
<li>
<p>Use the <code class="codeph">-createTable --noexecute</code> command to generate the external table DDL.</p>
</li>
<li id="GUID-F4F36969-1063-4E7C-92DB-B4F3F09BC036__CHDIGDHD">
<p>Make whatever changes are needed to the DDL.</p>
</li>
<li>
<p>Run the DDL from the previous step to create the table definition in the Oracle database.</p>
</li>
<li>
<p>Use the <code class="codeph">ExternalTable -publish</code> command to publish the data URIs to the location files of the external table.</p>
</li>
</ol>
</div>
<!-- class="section" --></div>
</div>
</div>
<a id="BDCUG373"></a>
<div class="props_rev_3"><a id="GUID-1B68FABA-7C4B-4057-B8E4-7CEDEF09FC87"></a>
<h2 id="BDCUG-GUID-1B68FABA-7C4B-4057-B8E4-7CEDEF09FC87" class="sect2"><span class="enumeration_section">2.7</span> Updating External Tables</h2>
<div>
<p>The <code class="codeph">-publish</code> option provides a way to update the location files (that point to HDFS data paths) of existing Oracle external tables based on text, Data Pump, or Hive sources.</p>
<p>The&nbsp;<code class="codeph">ExternalTable</code>&nbsp;command line tool with the&nbsp;<code class="codeph">-createTable</code>&nbsp;option creates the external table and related metadata in Oracle Database. It also populates the external table&rsquo;s location files with the Universal Resource Identifiers (URIs) of the data files in HDFS.</p>
<p>To &ldquo;publish&rdquo; updates to the location files of existing external tables, use&nbsp;<code class="codeph">ExternalTable</code>&nbsp;with the&nbsp;<code class="codeph">-publish</code>&nbsp;option.&nbsp;This operation updates the location files of external tables with new URIs of HDFS data paths, and adds external tables and views for new partitions when the source is a partitioned Hive table</p>
<p>Use&nbsp;<code class="codeph">-publish</code>&nbsp;in order to:</p>
<ul style="list-style-type: disc;">
<li>
<p>Publish new data into an already existing external table.</p>
<p><code class="codeph">-createTable</code>&nbsp;takes a snapshot of the HDFS or Hive source at the time of external table creation.&nbsp;However the source may change later.&nbsp;The&nbsp;<code class="codeph">-publish</code> option enables you to update the existing external table from the source.</p>
</li>
<li>
<p>Publish new data when the source is a partitioned Hive table.</p>
<p>When new partitions are added to a source that is a partitioned Hive table, the <code class="codeph">-publish</code> option enables you to add new database objects required to access the new partitions. This option detects the new Hive partitions and creates the additional external tables and views for the partitions and updates the metadata table created with the <code class="codeph">-createTable</code> command.</p>
</li>
<li>
<p>Populate an external table that you created manually using the -createTable command with the <code class="codeph">--noexecute</code> option.</p>
</li>
</ul>
<div class="infobox-note" id="GUID-1B68FABA-7C4B-4057-B8E4-7CEDEF09FC87__GUID-257FFD61-B2CF-4CD1-82D7-4A6EF7F187BA">
<p class="notep1">Note:</p>
<p>The <code class="codeph">publish</code> option now fully supports partitioned Hive tables. It is no longer necessary to use <code class="codeph">-drop</code> and <code class="codeph">-createTable</code> as a workaround to update external tables derived from partitioned Hive tables.</p>
</div>
<div class="infoboxnotealso" id="GUID-1B68FABA-7C4B-4057-B8E4-7CEDEF09FC87__GUID-4E19AC6A-60A2-4B56-8460-0CED17CCAD86">
<p class="notep1">See Also:</p>
<p><a href="osch.htm#GUID-B761157E-AF8B-4087-A91C-66EAE4203887">Location File Management</a></p>
</div>
</div>
<a id="BDCUG757"></a>
<div class="props_rev_3"><a id="GUID-652CE65B-ADA4-4742-B923-A163687C0127"></a>
<h3 id="BDCUG-GUID-652CE65B-ADA4-4742-B923-A163687C0127" class="sect3"><span class="enumeration_section">2.7.1</span> ExternalTable Syntax for Publish</h3>
<div>
<div class="section">
<pre dir="ltr">
hadoop jar <span class="italic">OSCH_HOME</span>/jlib/orahdfs.jar \
oracle.hadoop.exttab.ExternalTable \
[-conf <span class="italic">config_file</span>]... \
[-D <span class="italic">property=value</span>]... \
-publish [--noexecute]
</pre>
<div class="infoboxnotealso" id="GUID-652CE65B-ADA4-4742-B923-A163687C0127__GUID-01C8A4CD-E7C2-4B72-ADBE-9ED1A83234AD">
<p class="notep1">See Also:</p>
<p><span class="q">"<a href="osch.htm#GUID-485E5CE2-7D1C-4ACC-BBF0-79EEE312AB22">ExternalTable Command-Line Tool Syntax</a>"</span></p>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="BDCUG376"></a><a id="BDCUG758"></a>
<div class="props_rev_3"><a id="GUID-85BCFFDE-E461-4733-9EC8-CE1AD481FF6E"></a>
<h3 id="BDCUG-GUID-85BCFFDE-E461-4733-9EC8-CE1AD481FF6E" class="sect3"><span class="enumeration_section">2.7.2</span> ExternalTable Example for Publish</h3>
<div>
<div class="section">
<p>This example sets <code class="codeph">HADOOP_CLASSPATH</code> and publishes the HDFS data paths to the external table created in <a href="osch.htm#GUID-39A0A87C-7051-41E1-9F53-45802075C1FD__CHDHBDDD">Example 2-3</a>. See <span class="q">"<a href="osch.htm#GUID-B7D11F0D-B75F-449E-85D6-62D61E43F240">Configuring Your System for Oracle SQL Connector for HDFS</a>"</span> for more information about setting this environment variable.</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-85BCFFDE-E461-4733-9EC8-CE1AD481FF6E__CHDHHHAJ">
<p class="titleinexample">Example 2-9 Publishing HDFS Data Paths to an External Table for Data Pump Format Files</p>
<p>This example uses the Bash shell.</p>
<pre dir="ltr">
$ export HADOOP_CLASSPATH="<span class="italic">OSCH_HOME</span>/jlib/*"
$ hadoop jar <span class="italic">OSCH_HOME</span>/jlib/orahdfs.jar oracle.hadoop.exttab.ExternalTable \
-D oracle.hadoop.exttab.tableName=SALES_DP_XTAB \
-D oracle.hadoop.exttab.sourceType=datapump \
-D oracle.hadoop.exttab.dataPaths=hdfs:/user/scott/data/ \
-D oracle.hadoop.connection.url=jdbc:oracle:thin:@//myhost:1521/myservicename \
-D oracle.hadoop.connection.user=scott -publish
</pre>
<p>In this example:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">OSCH_HOME</code> is the full path to the Oracle SQL Connector for HDFS installation directory.</p>
</li>
<li>
<p><code class="codeph">SALES_DP_XTAB</code> is the external table created in <a href="osch.htm#GUID-39A0A87C-7051-41E1-9F53-45802075C1FD__CHDHBDDD">Example 2-3</a>.</p>
</li>
<li>
<p><code class="codeph">hdfs:/user/scott/data/</code> is the location of the HDFS data.</p>
</li>
<li>
<p><code class="codeph">@myhost:1521</code> is the database connection string.</p>
</li>
</ul>
</div>
<!-- class="example" --></div>
</div>
</div>
<a id="BDCUG379"></a>
<div class="props_rev_3"><a id="GUID-C8057DF4-54D1-4478-8849-B7FED3A65CC0"></a>
<h2 id="BDCUG-GUID-C8057DF4-54D1-4478-8849-B7FED3A65CC0" class="sect2"><span class="enumeration_section">2.8</span> Exploring External Tables and Location Files</h2>
<div>
<p>The <code class="codeph">-describe</code> command is a debugging and diagnostic utility that prints the definition of an existing external table. It also enables you to see the location file metadata and contents. You can use this command to verify the integrity of the location files of an Oracle external table.</p>
<p>These properties are required to use this command:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDGEECH">oracle.hadoop.exttab.tableName</a></code></p>
</li>
<li>
<p>The JDBC connection properties; see <span class="q">"<a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDBJCCH">Connections using url, user, and password Properties</a>."</span></p>
</li>
</ul>
</div>
<a id="BDCUG759"></a>
<div class="props_rev_3"><a id="GUID-A4CF889C-1068-41F7-8434-F15CF50CF7F1"></a>
<h3 id="BDCUG-GUID-A4CF889C-1068-41F7-8434-F15CF50CF7F1" class="sect3"><span class="enumeration_section">2.8.1</span> ExternalTable Syntax for Describe</h3>
<div>
<div class="section">
<pre dir="ltr">
hadoop jar <span class="italic">OSCH_HOME</span>/jlib/orahdfs.jar \
oracle.hadoop.exttab.ExternalTable \
[-conf <span class="italic">config_file</span>]... \
[-D property=<span class="italic">value</span>]... \
-describe
</pre>
<div class="infoboxnotealso" id="GUID-A4CF889C-1068-41F7-8434-F15CF50CF7F1__GUID-A0A2A8AA-4751-4AB8-B591-7C7981C9C12F">
<p class="notep1">See Also:</p>
<p><span class="q">"<a href="osch.htm#GUID-485E5CE2-7D1C-4ACC-BBF0-79EEE312AB22">ExternalTable Command-Line Tool Syntax</a>"</span></p>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="BDCUG761"></a><a id="BDCUG760"></a>
<div class="props_rev_3"><a id="GUID-42913367-DDEB-4915-8A85-1439FCCD6DB0"></a>
<h3 id="BDCUG-GUID-42913367-DDEB-4915-8A85-1439FCCD6DB0" class="sect3"><span class="enumeration_section">2.8.2</span> ExternalTable Example for Describe</h3>
<div>
<div class="section">
<p>This example shows the command syntax to describe the external tables and location files associated with <code class="codeph">SALES_DP_XTAB</code>.</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-42913367-DDEB-4915-8A85-1439FCCD6DB0__BABDDBCI">
<p class="titleinexample">Example 2-10 Exploring External Tables and Location Files</p>
<pre dir="ltr">
$ export HADOOP_CLASSPATH="OSCH_HOME/jlib/*"
$ hadoop jar OSCH_HOME/jlib/orahdfs.jar oracle.hadoop.exttab.ExternalTable \
-D oracle.hadoop.exttab.tableName=SALES_DP_XTAB \
-D oracle.hadoop.connection.url=jdbc:oracle:thin:@//myhost:1521/myservicename \
-D oracle.hadoop.connection.user=scott -describe
</pre></div>
<!-- class="example" --></div>
</div>
</div>
<a id="BDCUG762"></a>
<div class="props_rev_3"><a id="GUID-C4C64DDC-C5D8-4D21-828E-B854714A8236"></a>
<h2 id="BDCUG-GUID-C4C64DDC-C5D8-4D21-828E-B854714A8236" class="sect2"><span class="enumeration_section">2.9</span> Dropping Database Objects Created by Oracle SQL Connector for HDFS</h2>
<div>
<p>The <code class="codeph">-drop</code> command deletes the database objects created by Oracle SQL Connector for HDFS. These objects include external tables, location files, and views. If you delete objects manually, problems can arise as described in <span class="q">"<a href="osch.htm#GUID-9241C297-CC71-4155-A658-10B8A658A397">Dropping Dangling Objects</a>"</span>.</p>
<p>The <code class="codeph">-drop</code> command only deletes objects created by Oracle SQL Connector for HDFS. Oracle recommends that you always use the <code class="codeph">-drop</code> command to drop objects created by Oracle SQL Connector for HDFS.</p>
<p>These properties are required to use this command:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDGEECH">oracle.hadoop.exttab.tableName</a></code>. For partitioned Hive tables, this is the name of the metadata table. For other data source types, this is the name of the external table.</p>
</li>
<li>
<p>The JDBC connection properties; see <span class="q">"<a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDBJCCH">Connections using url, user, and password Properties</a>."</span></p>
</li>
</ul>
</div>
<a id="BDCUG763"></a>
<div class="props_rev_3"><a id="GUID-172394AC-5379-4E85-BC3D-35DE44B0BA7A"></a>
<h3 id="BDCUG-GUID-172394AC-5379-4E85-BC3D-35DE44B0BA7A" class="sect3"><span class="enumeration_section">2.9.1</span> ExternalTable Syntax for Drop</h3>
<div>
<div class="section">
<pre dir="ltr">
hadoop jar <span class="italic">OSCH_HOME</span>/jlib/orahdfs.jar \
oracle.hadoop.exttab.ExternalTable \
[-conf <span class="italic">config_file</span>]... \
[-D property=<span class="italic">value</span>]... \
-drop
</pre>
<div class="infoboxnotealso" id="GUID-172394AC-5379-4E85-BC3D-35DE44B0BA7A__GUID-648E7AE9-4E44-48F8-AB13-7EDD9D6692DB">
<p class="notep1">See Also:</p>
<p><span class="q">"<a href="osch.htm#GUID-485E5CE2-7D1C-4ACC-BBF0-79EEE312AB22">ExternalTable Command-Line Tool Syntax</a>"</span></p>
</div>
</div>
<!-- class="section" --></div>
</div>
<a id="BDCUG765"></a><a id="BDCUG764"></a>
<div class="props_rev_3"><a id="GUID-02787E77-EBDE-458D-B524-37999BAADB91"></a>
<h3 id="BDCUG-GUID-02787E77-EBDE-458D-B524-37999BAADB91" class="sect3"><span class="enumeration_section">2.9.2</span> ExternalTable Example for Drop</h3>
<div>
<div class="section">
<p>This example shows the command syntax to drop the database objects associated with <code class="codeph">SALES_DP_XTAB</code>.</p>
</div>
<!-- class="section" -->
<div class="example" id="GUID-02787E77-EBDE-458D-B524-37999BAADB91__GUID-A768DCAB-A4BA-437B-9E2B-E1A2866E6B6D">
<p class="titleinexample">Example 2-11 Dropping Database Objects</p>
<pre dir="ltr">
$ export HADOOP_CLASSPATH="OSCH_HOME/jlib/*"
$ hadoop jar OSCH_HOME/jlib/orahdfs.jar oracle.hadoop.exttab.ExternalTable \
-D oracle.hadoop.exttab.tableName=SALES_DP_XTAB \
-D oracle.hadoop.connection.url=jdbc:oracle:thin:@//myhost:1521/myservicename \
-D oracle.hadoop.connection.user=scott -drop
</pre></div>
<!-- class="example" --></div>
</div>
</div>
<a id="BDCUG347"></a>
<div class="props_rev_3"><a id="GUID-DE43256A-317C-4462-B6C1-F3D26B961121"></a>
<h2 id="BDCUG-GUID-DE43256A-317C-4462-B6C1-F3D26B961121" class="sect2"><span class="enumeration_section">2.10</span> More About External Tables Generated by the ExternalTable Tool</h2>
<div>
<p>Because external tables are used to access data, all of the features and limitations of external tables apply. Queries are executed in parallel with automatic load balancing. However, update, insert, and delete operations are not allowed and indexes cannot be created on external tables. When an external table is accessed, a full table scan is always performed.</p>
<p>Oracle SQL Connector for HDFS uses the <a id="d9651e3227" class="indexterm-anchor"></a><a id="d9651e3229" class="indexterm-anchor"></a><code class="codeph">ORACLE_LOADER</code> access <a id="d9651e3236" class="indexterm-anchor"></a><a id="d9651e3240" class="indexterm-anchor"></a>driver. The <code class="codeph">hdfs_stream</code> preprocessor script (provided with Oracle SQL Connector for HDFS) modifies the input data to a format that <code class="codeph">ORACLE_LOADER</code> can process.</p>
</div>
<a id="BDCUG516"></a>
<div class="props_rev_3"><a id="GUID-BA0FF9E5-917B-481E-B0C1-BA8E870918FB"></a>
<h3 id="BDCUG-GUID-BA0FF9E5-917B-481E-B0C1-BA8E870918FB" class="sect3"><span class="enumeration_section">2.10.1</span> About Configurable Column Mappings</h3>
<div>
<p>Oracle SQL Connector for HDFS uses default data type mappings to create columns in an Oracle external table with the appropriate data types for the Hive and text sources. You can override these defaults by setting various configuration properties, for either all columns or a specific column.</p>
<p>For example, a field in a text file might contain a timestamp. By default, the field is mapped to a <code class="codeph">VARCHAR2</code> column. However, you can specify a <code class="codeph">TIMESTAMP</code> column and provide a datetime mask to cast the values correctly into the <code class="codeph">TIMESTAMP</code> data type. The <code class="codeph">TIMESTAMP</code> data type supports time-based queries and analysis that are unavailable when the data is presented as text.</p>
</div>
<a id="BDCUG517"></a>
<div class="props_rev_3"><a id="GUID-B7F25023-AE85-4D33-96A9-9DB1DDC95624"></a>
<h4 id="BDCUG-GUID-B7F25023-AE85-4D33-96A9-9DB1DDC95624" class="sect4"><span class="enumeration_section">2.10.1.1</span> Default Column Mappings</h4>
<div>
<p>Text sources are mapped to <code class="codeph">VARCHAR2</code> columns, and Hive columns are mapped to columns with the closest equivalent Oracle data type. <a href="osch.htm#GUID-D03BCC23-ED5E-4E01-9806-2416F99BFDD1__CHDIDJEC" title="Mappings between Hive and Oracle Database data types">Table 2-1</a> shows the default mappings.</p>
</div>
</div>
<a id="BDCUG518"></a>
<div class="props_rev_3"><a id="GUID-81C9BB14-A830-403B-B4ED-266BD3508DDC"></a>
<h4 id="BDCUG-GUID-81C9BB14-A830-403B-B4ED-266BD3508DDC" class="sect4"><span class="enumeration_section">2.10.1.2</span> All Column Overrides</h4>
<div>
<div class="section">
<p>The following properties apply to all columns in the external table. For Hive sources, these property settings override the <code class="codeph">oracle.hadoop.exttab.hive.*</code> property settings.</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDECGEA">oracle.hadoop.exttab.colMap.columnLength</a></code></p>
</li>
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDJCADA">oracle.hadoop.exttab.colMap.columnType</a></code></p>
</li>
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDBBDFJ">oracle.hadoop.exttab.colMap.dateMask</a></code></p>
</li>
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDGHFEB">oracle.hadoop.exttab.colMap.fieldLength</a></code></p>
</li>
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDFABDH">oracle.hadoop.exttab.colMap.timestampMask</a></code></p>
</li>
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDCECEJ">oracle.hadoop.exttab.colMap.timestampTZMask</a></code></p>
</li>
</ul>
</div>
<!-- class="section" --></div>
</div>
<a id="BDCUG519"></a>
<div class="props_rev_3"><a id="GUID-0EBB119E-4A9E-4B59-AF9B-FA968B69CEC1"></a>
<h4 id="BDCUG-GUID-0EBB119E-4A9E-4B59-AF9B-FA968B69CEC1" class="sect4"><span class="enumeration_section">2.10.1.3</span> One Column Overrides</h4>
<div>
<div class="section">
<p>The following properties apply to only one column, whose name is the <span class="italic">column_name</span> part of the property name. These property settings override all other settings.</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDECACF">oracle.hadoop.exttab.colMap.column_name.columnLength</a></code></p>
</li>
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDECFCE">oracle.hadoop.exttab.colMap.column_name.columnType</a></code></p>
</li>
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDGGDBI">oracle.hadoop.exttab.colMap.column_name.dateMask</a></code></p>
</li>
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDJFBGB">oracle.hadoop.exttab.colMap.column_name.fieldLength</a></code></p>
</li>
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDCEGBB">oracle.hadoop.exttab.colMap.column_name.timestampMask</a></code></p>
</li>
<li>
<p><code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDDBIID">oracle.hadoop.exttab.colMap.column_name.timestampTZMask</a></code></p>
</li>
</ul>
</div>
<!-- class="section" --></div>
</div>
<a id="BDCUG520"></a>
<div class="props_rev_3"><a id="GUID-D49D55BF-45D6-4FE0-B5A4-08BC727F0BBB"></a>
<h4 id="BDCUG-GUID-D49D55BF-45D6-4FE0-B5A4-08BC727F0BBB" class="sect4"><span class="enumeration_section">2.10.1.4</span> Mapping Override Examples</h4>
<div>
<div class="section">
<p>The following properties create an external table in which all columns are the default <code class="codeph">VARCHAR2</code> data type:</p>
<pre dir="ltr">
oracle.hadoop.exttab.tableName=MOVIE_FACT_EXT_TAB_TXT
oracle.hadoop.exttab.columnNames=CUST_ID,MOVIE_ID,GENRE_ID,TIME_ID,RECOMMENDED,ACTIVITY_ID,RATING,SALES
</pre>
<p>In this example, the following properties are set to override the data type of several columns:</p>
<pre dir="ltr">
oracle.hadoop.exttab.colMap.TIME_ID.columnType=TIMESTAMP
oracle.hadoop.exttab.colMap.RECOMMENDED.columnType=NUMBER
oracle.hadoop.exttab.colMap.ACTIVITY_ID.columnType=NUMBER
oracle.hadoop.exttab.colMap.RATING.columnType=NUMBER
oracle.hadoop.exttab.colMap.SALES.columnType=NUMBER
</pre>
<p>Oracle SQL Connector for HDFS creates an external table with the specified data types:</p>
<pre dir="ltr">
SQL&gt; <span class="bold">DESCRIBE movie_facts_ext</span>
Name                                      Null?    Type
----------------------------------------- -------- ----------------------------
CUST_ID                                            VARCHAR2(4000)
MOVIE_ID                                           VARCHAR2(4000)
GENRE_ID                                           VARCHAR2(4000)
TIME_ID                                            TIMESTAMP(9)
RECOMMENDED                                        NUMBER
ACTIVITY_ID                                        NUMBER
RATINGS                                            NUMBER
SALES                                              NUMBER
</pre>
<p>The next example adds the following property settings to change the length of the <code class="codeph">VARCHAR2</code> columns:</p>
<pre dir="ltr">
oracle.hadoop.exttab.colMap.CUST_ID.columnLength=12
oracle.hadoop.exttab.colMap.MOVIE_ID.columnLength=12
oracle.hadoop.exttab.colMap.GENRE_ID.columnLength=12
</pre>
<p>All columns now have custom data types:</p>
<pre dir="ltr">
SQL&gt; <span class="bold">DESCRIBE movie_facts_ext</span>
Name                                      Null?    Type
----------------------------------------- -------- ----------------------------
CUST_ID                                            VARCHAR2(12)
MOVIE_ID                                           VARCHAR2(12)
GENRE_ID                                           VARCHAR2(12)
TIME_ID                                            TIMESTAMP(9)
RECOMMENDED                                        NUMBER
ACTIVITY_ID                                        NUMBER
RATINGS                                            NUMBER
SALES                                              NUMBER
</pre></div>
<!-- class="section" --></div>
</div>
</div>
<a id="BDCUG348"></a>
<div class="props_rev_3"><a id="GUID-B1B4CF1C-C1AD-45DF-8D33-0CC85BDDBC79"></a>
<h3 id="BDCUG-GUID-B1B4CF1C-C1AD-45DF-8D33-0CC85BDDBC79" class="sect3"><span class="enumeration_section">2.10.2</span> What Are Location Files?</h3>
<div>
<p>A <span class="bold">location file</span> is a file specified in the location clause of the external table. Oracle SQL Connector for HDFS creates location files that contain only the Universal Resource Identifiers (URIs) of the data files. A <span class="bold">data file</span> contains the data stored in HDFS.</p>
</div>
</div>
<a id="BDCUG349"></a>
<div class="props_rev_3"><a id="GUID-1D4B2FFF-B2FA-4C2A-9DCF-B6EC4283FB09"></a>
<h3 id="BDCUG-GUID-1D4B2FFF-B2FA-4C2A-9DCF-B6EC4283FB09" class="sect3"><span class="enumeration_section">2.10.3</span> Enabling Parallel Processing</h3>
<div>
<div class="section">
<p>To enable parallel processing with external tables, you must specify multiple files in the location clause of the external table. The number of files determines the number of child processes started by the external table during a table read, which is known as the <span class="bold">degree of parallelism</span> or <span class="bold">DOP</span>.</p>
</div>
<!-- class="section" --></div>
<a id="BDCUG766"></a>
<div class="props_rev_3"><a id="GUID-E328AFC6-F0E9-41D3-B7C3-F312DE88071E"></a>
<h4 id="BDCUG-GUID-E328AFC6-F0E9-41D3-B7C3-F312DE88071E" class="sect4"><span class="enumeration_section">2.10.3.1</span> Setting Up the Degree of Parallelism</h4>
<div>
<div class="section">
<p>Ideally, you can decide to run at a particular degree of parallelism and create a number of location files that are a multiple of the degree of parallelism, as described in the following procedure.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">To set up parallel processing for maximum performance:</p>
<ol>
<li>
<p>Identify the maximum DOP that your Oracle DBA will permit you to use when running Oracle SQL Connector for HDFS.</p>
<p>When loading a huge amount of data into an Oracle database, you should also work with the DBA to identify a time when the maximum resources are available.</p>
</li>
<li>
<p>Create a number of location files that is a small multiple of the DOP. For example, if the DOP is 8, then you might create 8, 16, 24, or 32 location files.</p>
</li>
<li>
<p>Create a number of HDFS files that are about the same size and a multiple of the number of location files. For example, if you have 32 location files, then you might create 128, 1280, or more HDFS files, depending on the amount of data and the minimum HDFS file size.</p>
</li>
<li>
<p>Set the DOP for the data load, using either the <code class="codeph">ALTER SESSION</code> command or hints in the SQL <code class="codeph">SELECT</code> statement.</p>
<p>This example sets the DOP to 8 using <code class="codeph">ALTER SESSION</code>:</p>
<pre dir="ltr">
ALTER SESSION FORCE PARALLEL DML PARALLEL 8;
ALTER SESSION FORCE PARALLEL QUERY PARALLEL 8;
</pre>
<p>The next example sets the DOP to 8 using the <code class="codeph">PARALLEL</code> hint:</p>
<pre dir="ltr">
INSERT /*+ parallel(my_db_table,8) */ INTO my_db_table \
   SELECT /*+ parallel(my_hdfs_external_table,8) */ * \
   FROM my_hdfs_external_table;
</pre>
<p>An <code class="codeph">APPEND</code> hint in the SQL <code class="codeph">INSERT</code> statement can also help improve performance.</p>
</li>
</ol>
</div>
<!-- class="section" --></div>
</div>
</div>
<a id="BDCUG350"></a>
<div class="props_rev_3"><a id="GUID-B761157E-AF8B-4087-A91C-66EAE4203887"></a>
<h3 id="BDCUG-GUID-B761157E-AF8B-4087-A91C-66EAE4203887" class="sect3"><span class="enumeration_section">2.10.4</span> Location File Management</h3>
<div>
<p>The Oracle SQL Connector for HDFS command-line tool, <code class="codeph">ExternalTable</code>, creates an external table and publishes the HDFS URI information to location files. The external table location files are stored in the directory specified by the <code class="codeph"><a href="osch.htm#GUID-30DE733A-CFF2-407E-961C-6E945DD5417A__CHDCFHDG">oracle.hadoop.exttab.defaultDirectory</a></code> property. For an Oracle RAC database, this directory must reside on a distributed file system that is accessible to each database server.</p>
<p><code class="codeph">ExternalTable</code> manages the location files of the external table, which involves the following operations:</p>
<ul style="list-style-type: disc;">
<li>
<p>Generating new location files in the database directory after checking for name conflicts</p>
</li>
<li>
<p>Deleting existing location files in the database directory as necessary</p>
</li>
<li>
<p>Publishing data URIs to new location files</p>
</li>
<li>
<p>Altering the <code class="codeph">LOCATION</code> clause of the external table to match the new location files</p>
</li>
</ul>
<p>Location file management for the supported data sources is described in the following topics.</p>
<dl>
<dt class="dlterm"><a id="GUID-B761157E-AF8B-4087-A91C-66EAE4203887__GUID-8B1F2E41-7D42-4094-A2D1-9EFDA076E070"><!-- --></a>Data Pump File Format</dt>
<dd>
<p>The <code class="codeph">ORACLE_LOADER</code> access driver is required to access Data Pump files. The driver requires that each location file corresponds to a single Data Pump file in HDFS. Empty location files are not allowed, and so the number of location files in the external table must exactly match the number of data files in HDFS.</p>
<p>Oracle SQL Connector for HDFS automatically takes over location file management and ensures that the number of location files in the external table equals the number of Data Pump files in HDFS.</p>
</dd>
<dt class="dlterm"><a id="GUID-B761157E-AF8B-4087-A91C-66EAE4203887__GUID-1D906151-2982-4DFA-ADA1-1993AEDEF560"><!-- --></a>Delimited Files in HDFS and Hive Tables</dt>
<dd>
<p>The <code class="codeph">ORACLE_LOADER</code> access driver has no limitation on the number of location files. Each location file can correspond to one or more data files in HDFS. The number of location files for the external table is suggested by the <code class="codeph">oracle.hadoop.exttab.locationFileCount</code> configuration property.</p>
<p>See <span class="q">"<a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDBJCCH">Connections using url, user, and password Properties</a>"</span>.</p>
</dd>
</dl>
</div>
</div>
<a id="BDCUG351"></a>
<div class="props_rev_3"><a id="GUID-2F837B38-0DFB-4850-9E63-ACB654B615E4"></a>
<h3 id="BDCUG-GUID-2F837B38-0DFB-4850-9E63-ACB654B615E4" class="sect3"><span class="enumeration_section">2.10.5</span> Location File Names</h3>
<div>
<p>This is the format of a location file name:</p>
<p><code class="codeph">osch-</code><span class="italic"><code class="codeph">timestamp-number-n</code></span></p>
<p>In this syntax:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="italic"><code class="codeph">timestamp</code></span> has the format <span class="italic"><code class="codeph">yyyyMMddhhmmss</code></span>, for example, 20121017103941 for October 17, 2012, at 10:39:41.</p>
</li>
<li>
<p><span class="italic"><code class="codeph">number</code></span> is a random number used to prevent location file name conflicts among different tables.</p>
</li>
<li>
<p><span class="italic"><code class="codeph">n</code></span> is an index used to prevent name conflicts between location files for the same table.</p>
</li>
</ul>
<p>For example, osch-20121017103941-6807-1.</p>
</div>
</div>
</div>
<a id="BDCUG436"></a>
<div class="props_rev_3"><a id="GUID-ACF0F58B-307F-42F0-939E-F1891977C713"></a>
<h2 id="BDCUG-GUID-ACF0F58B-307F-42F0-939E-F1891977C713" class="sect2"><span class="enumeration_section">2.11</span> Configuring Oracle SQL Connector for HDFS</h2>
<div>
<p>You can pass configuration properties to the <code class="codeph">ExternalTable</code> tool on the command line with the <code class="codeph">-D</code> option, or you can create a configuration file and pass it on the command line with the <code class="codeph">-conf</code> option. These options must precede the command to be executed.</p>
<p>For example, this command uses a configuration file named <code class="codeph">example.xml</code>:</p>
<pre dir="ltr">
hadoop jar <span class="italic">OSCH_HOME</span>/jlib/orahdfs.jar \
       oracle.hadoop.exttab.ExternalTable \
       -conf /home/oracle/example.xml \
       -createTable
</pre>
<p>See <span class="q">"<a href="osch.htm#GUID-485E5CE2-7D1C-4ACC-BBF0-79EEE312AB22">ExternalTable Command-Line Tool Syntax</a>"</span>.</p>
</div>
<a id="BDCUG438"></a><a id="BDCUG437"></a>
<div class="props_rev_3"><a id="GUID-8B6BF6AB-C6C0-4DAA-8417-B4215E1A5470"></a>
<h3 id="BDCUG-GUID-8B6BF6AB-C6C0-4DAA-8417-B4215E1A5470" class="sect3"><span class="enumeration_section">2.11.1</span> Creating a Configuration File</h3>
<div>
<p>A configuration file is an XML document with a very simple structure as follows:</p>
<pre dir="ltr">
&lt;?xml version="1.0"?&gt;
&lt;configuration&gt;
  &lt;property&gt;
    &lt;name&gt;<span class="italic">property</span>&lt;/name&gt;
    &lt;value&gt;<span class="italic">value</span>&lt;/value&gt;
  &lt;/property&gt;
     .
     .
     .
&lt;/configuration&gt;
</pre>
<p>The following example shows a configuration file. See <span class="q">"<a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15">Oracle SQL Connector for HDFS Configuration Property Reference</a>"</span> for descriptions of these properties.</p>
<div class="example" id="GUID-8B6BF6AB-C6C0-4DAA-8417-B4215E1A5470__CHDGBCBJ">
<p class="titleinexample">Example 2-12 Configuration File for Oracle SQL Connector for HDFS</p>
<pre dir="ltr">
&lt;?xml version="1.0"?&gt;
&lt;configuration&gt;
  &lt;property&gt;
    &lt;name&gt;oracle.hadoop.exttab.tableName&lt;/name&gt;
    &lt;value&gt;SH.SALES_EXT_DIR&lt;/value&gt;
  &lt;/property&gt;
  &lt;property&gt;
    &lt;name&gt;oracle.hadoop.exttab.dataPaths&lt;/name&gt;
    &lt;value&gt;/data/s1/*.csv,/data/s2/*.csv&lt;/value&gt;
  &lt;/property&gt;
  &lt;property&gt;
    &lt;name&gt;oracle.hadoop.connection.url&lt;/name&gt;
    &lt;value&gt;jdbc:oracle:thin:@//myhost:1521/myservicename&lt;/value&gt;
  &lt;/property&gt;
  &lt;property&gt;
    &lt;name&gt;oracle.hadoop.connection.user&lt;/name&gt;
    &lt;value&gt;SH&lt;/value&gt;
  &lt;/property&gt;
&lt;/configuration&gt;
</pre></div>
<!-- class="example" --></div>
</div>
<a id="BDCUG521"></a><a id="BDCUG440"></a><a id="BDCUG522"></a><a id="BDCUG441"></a><a id="BDCUG439"></a>
<div class="props_rev_3"><a id="GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15"></a>
<h3 id="BDCUG-GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15" class="sect3"><span class="enumeration_section">2.11.2</span> Oracle SQL Connector for HDFS Configuration Property Reference</h3>
<div>
<div class="section">
<p>The following is a complete list of the configuration properties used by the <code class="codeph">ExternalTable</code> command-line tool. The properties are organized into these categories:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDEFCGB">General Properties</a></p>
</li>
<li>
<p><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDBJCCH">Connections using url, user, and password Properties</a></p>
</li>
</ul>
</div>
<!-- class="section" -->
<div class="section" id="GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDEFCGB">
<p class="subhead3">General Properties</p>
<div class="tblformalwide" id="GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__GUID-525254FC-8944-4742-8631-AB633C7BD476">
<table class="cellalignment47" summary="Describes the general configuration properties of the Oracle SQL Connector for HDFS.">
<thead>
<tr class="cellalignment26">
<th class="cellalignment37" id="d9651e3997">Property</th>
<th class="cellalignment37" id="d9651e3999">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment26">
<td class="cellalignment40" id="d9651e4003" headers="d9651e3997">
<p id="GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__ORACLE.HADOOP.EXTTAB.BADFILEFORMATU-0F368286"><span class="bold">oracle.hadoop.exttab.badFileFormatUsePercentA</span></p>
</td>
<td class="cellalignment40" headers="d9651e4003 d9651e3999">
<p>Indicates whether an external table bad file name contains '%a'. This is an optional property for the <code class="codeph">-createTable</code> command.</p>
<p><span class="bold">Valid values</span>: <code class="codeph">TRUE</code>,<code class="codeph">FALSE</code></p>
<p><span class="bold">Default value</span>: <code class="codeph">FALSE</code></p>
<p>The default bad file name is<code class="codeph">&lt;<span class="codeinlineitalic">external_table_name</span>&gt;_%p.bad</code>. If the value is <code class="codeph">TRUE</code>, this generates deterministic bad file names of the form <code class="codeph">&lt;<span class="codeinlineitalic">external_table_name</span>&gt;_%a.bad</code>. For example: '<code class="codeph">mytable_000.bad</code>', and '<code class="codeph">mytable_001.bad</code>'.</p>
<p>If <code class="codeph">.bad</code> files exist then diagnostic external tables can be created over the <code class="codeph">.bad</code> files to review the rejected rows. No <code class="codeph">.bad</code> files are generated if there are no rejected rows.</p>
<div class="infoboxnotealso" id="GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__BADFILENOBADFILEINORACLEDATABASEUTI-98723B9B">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__ORACLE.HADOOP.EXTTAB.LOGFILEFORMATU-0F365550">oracle.hadoop.exttab.logFileFormatUsePercentA</a></li>
<li>
<p><a class="olink SUTIL-GUID-29D5B788-D73E-40C5-8FC7-A7611148D157" target="_blank" href="http://www.oracle.com/pls/topic/lookup?ctx=E93613-01&amp;id=SUTIL-GUID-29D5B788-D73E-40C5-8FC7-A7611148D157">BADFILE | NOBADFILE</a> in <span class="italic">Oracle Database Utilities</span>.</p>
</li>
</ul>
</div>
</td>
</tr>
<tr class="cellalignment26" id="GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDECGEA">
<td class="cellalignment40" id="d9651e4077" headers="d9651e3997">
<p><span class="bold">oracle.hadoop.exttab.colMap.columnLength</span></p>
</td>
<td class="cellalignment40" headers="d9651e4077 d9651e3999">
<p>Specifies the length of all external table columns of type <code class="codeph">CHAR</code>, <code class="codeph">VARCHAR2</code>, <code class="codeph">NCHAR</code>, <code class="codeph">NVARCHAR2</code>, and <code class="codeph">RAW</code>. Optional.</p>
<p><span class="bold">Default Value</span>: The maximum length allowed by the column type</p>
<p>For Oracle Database 12<span class="italic">c</span>, Oracle SQL Connector for HDFS sets the length of <code class="codeph">VARCHAR2</code>, <code class="codeph">NVARCHAR2</code>, and <code class="codeph">RAW</code> columns depending on whether the database <code class="codeph">MAX_STRING_SIZE</code> option is set to <code class="codeph">STANDARD</code> or <code class="codeph">EXTENDED</code>.</p>
<p><span class="bold">Valid values</span>: Integer</p>
</td>
</tr>
<tr class="cellalignment26" id="GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDJCADA">
<td class="cellalignment40" id="d9651e4132" headers="d9651e3997">
<p><span class="bold">oracle.hadoop.exttab.colMap.columnType</span></p>
</td>
<td class="cellalignment40" headers="d9651e4132 d9651e3999">
<p>Specifies the data type mapping of all columns for Hive and text sources. Optional.</p>
<p>You can override this setting for specific columns by setting <code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDECFCE">oracle.hadoop.exttab.colMap.column_name.columnType</a></code>.</p>
<p><span class="bold">Default value</span>: <code class="codeph">VARCHAR2</code> for text; see <a href="osch.htm#GUID-D03BCC23-ED5E-4E01-9806-2416F99BFDD1__CHDIDJEC" title="Mappings between Hive and Oracle Database data types">Table 2-1</a> for Hive</p>
<p><span class="bold">Valid values</span>: The following Oracle data types are supported:</p>
<ul class="simple" style="list-style-type: none;padding-left:0;">
<li><code class="codeph">VARCHAR2</code></li>
<li><code class="codeph">NVARCHAR2</code></li>
<li><code class="codeph">CHAR</code></li>
<li><code class="codeph">NCHAR</code></li>
<li><code class="codeph">CLOB</code></li>
<li><code class="codeph">NCLOB</code></li>
<li><code class="codeph">NUMBER</code></li>
<li><code class="codeph">INTEGER</code></li>
<li><code class="codeph">FLOAT</code></li>
<li><code class="codeph">BINARY_DOUBLE</code></li>
<li><code class="codeph">BINARY_FLOAT</code></li>
<li><code class="codeph">RAW</code>*</li>
<li><code class="codeph">DATE</code></li>
<li><code class="codeph">TIMESTAMP</code></li>
<li><code class="codeph">TIMESTAMP WITH TIME ZONE</code></li>
<li><code class="codeph">TIMESTAMP WITH LOCAL TIME ZONE</code></li>
<li><code class="codeph">INTERVAL DAY TO SECOND</code></li>
<li><code class="codeph">INTERVAL YEAR TO MONTH</code></li>
<li>* <code class="codeph">RAW</code> binary data in delimited text files must be encoded in hexadecimal.</li>
</ul>
</td>
</tr>
<tr class="cellalignment26" id="GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDBBDFJ">
<td class="cellalignment40" id="d9651e4225" headers="d9651e3997">
<p><span class="bold">oracle.hadoop.exttab.colMap.dateMask</span></p>
</td>
<td class="cellalignment40" headers="d9651e4225 d9651e3999">
<p>Specifies the format mask used in the <span class="italic">date_format_spec</span> clause of the external table for all <code class="codeph">DATE</code> columns. This clause indicates that a character data field contains a date in the specified format.</p>
<p><span class="bold">Default value</span>: The default globalization format mask, which is set by the <code class="codeph">NLS_DATE_FORMAT</code> database parameter</p>
<p><span class="bold">Valid values</span>: A datetime format model as described in <a class="olink SQLRF00212" target="_blank" href="http://www.oracle.com/pls/topic/lookup?ctx=E93613-01&amp;id=SQLRF00212"><span class="italic">Oracle Database SQL Language Reference</span></a>. However, it cannot contain quotation marks.</p>
</td>
</tr>
<tr class="cellalignment26" id="GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDGHFEB">
<td class="cellalignment40" id="d9651e4255" headers="d9651e3997">
<p><span class="bold">oracle.hadoop.exttab.colMap.fieldLength</span></p>
</td>
<td class="cellalignment40" headers="d9651e4255 d9651e3999">
<p>Sets the character buffer length used by the <code class="codeph">ORACLE_LOADER</code> access driver for all <code class="codeph">CLOB</code> columns. The value is used in the <span class="italic">field_list</span> clause of the external table definition, which identifies the fields in the data file and their data types.</p>
<p><span class="bold">Default value</span>: 4000 bytes</p>
<p><span class="bold">Valid values</span>: Integer</p>
</td>
</tr>
<tr class="cellalignment26" id="GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDFABDH">
<td class="cellalignment40" id="d9651e4280" headers="d9651e3997">
<p><span class="bold">oracle.hadoop.exttab.colMap.timestampMask</span></p>
</td>
<td class="cellalignment40" headers="d9651e4280 d9651e3999">
<p>Specifies the format mask used in the <span class="italic">date_format_spec</span> clause of the external table for all <code class="codeph">TIMESTAMP</code> and <code class="codeph">TIMESTAMP WITH LOCAL TIME ZONE</code> columns. This clause indicates that a character data field contains a timestamp in the specified format.</p>
<p><span class="bold">Default value</span>: The default globalization format mask, which is set by the <code class="codeph">NLS_TIMESTAMP_FORMAT</code> database parameter</p>
<p><span class="bold">Valid values</span>: A datetime format model as described in <a class="olink SQLRF00212" target="_blank" href="http://www.oracle.com/pls/topic/lookup?ctx=E93613-01&amp;id=SQLRF00212"><span class="italic">Oracle Database SQL Language Reference</span></a>. However, it cannot contain quotation marks.</p>
</td>
</tr>
<tr class="cellalignment26" id="GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDCECEJ">
<td class="cellalignment40" id="d9651e4313" headers="d9651e3997">
<p><span class="bold">oracle.hadoop.exttab.colMap.timestampTZMask</span></p>
</td>
<td class="cellalignment40" headers="d9651e4313 d9651e3999">
<p>Specifies the format mask used in the <span class="italic">date_format_spec</span> clause of the external table for all <code class="codeph">TIMESTAMP WITH TIME ZONE</code> columns. This clause indicates that a character data field contains a timestamp in the specified format.</p>
<p><span class="bold">Default value</span>: The default globalization format mask, which is set by the <code class="codeph">NLS_TIMESTAMP_TZ_FORMAT</code> database parameter</p>
<p><span class="bold">Valid values</span>: A datetime format model as described in the <a class="olink SQLRF00212" target="_blank" href="http://www.oracle.com/pls/topic/lookup?ctx=E93613-01&amp;id=SQLRF00212"><span class="italic">Oracle Database SQL Language Reference</span></a>. However, it cannot contain quotation marks.</p>
</td>
</tr>
<tr class="cellalignment26" id="GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDECACF">
<td class="cellalignment40" id="d9651e4343" headers="d9651e3997">
<p><span class="bold">oracle.hadoop.exttab.colMap.<span class="italic">column_name</span>.columnLength</span></p>
</td>
<td class="cellalignment40" headers="d9651e4343 d9651e3999">
<p>Specifies the length of all external table columns of type <code class="codeph">CHAR</code>, <code class="codeph">VARCHAR2</code>, <code class="codeph">NCHAR</code>, <code class="codeph">NVARCHAR2</code>, and <code class="codeph">RAW</code>. Optional.</p>
<p><span class="bold">Default Value</span>: The value of <code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDECGEA">oracle.hadoop.exttab.colMap.columnLength</a></code>; if that property is not set, then the maximum length allowed by the data type</p>
<p><span class="bold">Valid values</span>: Integer</p>
</td>
</tr>
<tr class="cellalignment26" id="GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDECFCE">
<td class="cellalignment40" id="d9651e4382" headers="d9651e3997">
<p><span class="bold">oracle.hadoop.exttab.colMap.<span class="italic">column_name</span>.columnType</span></p>
</td>
<td class="cellalignment40" headers="d9651e4382 d9651e3999">
<p>Overrides the data type mapping for <span class="italic">column_name</span>. Optional.</p>
<p>The <span class="italic">column_name</span> is case-sensitive. It must exactly match the name of a column in a Hive table or a column listed in <code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDECECI">oracle.hadoop.exttab.columnNames</a></code>.</p>
<p><span class="bold">Default value</span>: The value of <code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDJCADA">oracle.hadoop.exttab.colMap.columnType</a></code>; if that property is not set, then the default data type identified in <a href="osch.htm#GUID-D03BCC23-ED5E-4E01-9806-2416F99BFDD1__CHDIDJEC" title="Mappings between Hive and Oracle Database data types">Table 2-1</a></p>
<p><span class="bold">Valid values</span>: See <code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDJCADA">oracle.hadoop.exttab.colMap.columnType</a></code></p>
</td>
</tr>
<tr class="cellalignment26" id="GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDGGDBI">
<td class="cellalignment40" id="d9651e4428" headers="d9651e3997">
<p><span class="bold">oracle.hadoop.exttab.colMap.<span class="italic">column_name</span>.dateMask</span></p>
</td>
<td class="cellalignment40" headers="d9651e4428 d9651e3999">
<p>Overrides the format mask for <span class="italic">column_name</span>. Optional.</p>
<p>The <span class="italic">column_name</span> is case-sensitive. It must exactly match the name of a column in a Hive table or a column listed in <code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDECECI">oracle.hadoop.exttab.columnNames</a></code>.</p>
<p><span class="bold">Default value</span>: The value of <code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDBBDFJ">oracle.hadoop.exttab.colMap.dateMask</a></code>.</p>
<p><span class="bold">Valid values</span>: A datetime format model as described in the <a class="olink SQLRF00212" target="_blank" href="http://www.oracle.com/pls/topic/lookup?ctx=E93613-01&amp;id=SQLRF00212"><span class="italic">Oracle Database SQL Language Reference</span></a>. However, it cannot contain quotation marks.</p>
</td>
</tr>
<tr class="cellalignment26" id="GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDJFBGB">
<td class="cellalignment40" id="d9651e4470" headers="d9651e3997">
<p><span class="bold">oracle.hadoop.exttab.colMap.<span class="italic">column_name</span>.fieldLength</span></p>
</td>
<td class="cellalignment40" headers="d9651e4470 d9651e3999">
<p>Overrides the character buffer length used by the <code class="codeph">ORACLE_LOADER</code> access driver for <span class="italic">column_name</span>. This property is especially useful for <code class="codeph">CLOB</code> and extended data type columns. Optional.</p>
<p>The <span class="italic">column_name</span> is case-sensitive. It must exactly match the name of a column in a Hive table or a column listed in <code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDECECI">oracle.hadoop.exttab.columnNames</a></code>.</p>
<p><span class="bold">Default value</span>: Oracle SQL Connector for HDFS sets the default field lengths as shown in the following table.</p>
<div class="p">
<div class="tblformal" id="GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDGDGDB">
<p class="titleintable">Table 2-4 Field Length Calculations</p>
<table class="cellalignment32" title="Field Length Calculations " summary="Default field lengths by data type for Oracle columns">
<thead>
<tr class="cellalignment26">
<th class="cellalignment48" id="d9651e4514">Data Type of Target Column</th>
<th class="cellalignment49" id="d9651e4517">Field Length</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment26">
<td class="cellalignment50" id="d9651e4522" headers="d9651e4514">
<p><code class="codeph">VARCHAR2</code>, <code class="codeph">NVARCHAR2</code>, <code class="codeph">CHAR</code>, <code class="codeph">NCHAR</code></p>
</td>
<td class="cellalignment51" headers="d9651e4522 d9651e4517">
<p>Value of <code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDECACF">oracle.hadoop.exttab.colMap.column_name.columnLength</a></code></p>
</td>
</tr>
<tr class="cellalignment26">
<td class="cellalignment50" id="d9651e4543" headers="d9651e4514">
<p><code class="codeph">RAW</code></p>
</td>
<td class="cellalignment51" headers="d9651e4543 d9651e4517">
<p>2 * <code class="codeph">columnLength</code> property</p>
</td>
</tr>
<tr class="cellalignment26">
<td class="cellalignment50" id="d9651e4554" headers="d9651e4514">
<p><code class="codeph">CLOB</code>, <code class="codeph">NCLOB</code></p>
</td>
<td class="cellalignment51" headers="d9651e4554 d9651e4517">
<p>Value of <code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDGHFEB">oracle.hadoop.exttab.colMap.fieldLength</a></code></p>
</td>
</tr>
<tr class="cellalignment26">
<td class="cellalignment50" id="d9651e4569" headers="d9651e4514">
<p>All other types</p>
</td>
<td class="cellalignment51" headers="d9651e4569 d9651e4517">
<p>255 (default size for external tables)</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
<p><span class="bold">Valid values</span>: Integer</p>
</td>
</tr>
<tr class="cellalignment26">
<td class="cellalignment40" id="d9651e4581" headers="d9651e3997">
<p id="GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__ORACLE.HADOOP.EXTTAB.COLMAP.COLUMN_-7635C966"><span class="bold">oracle.hadoop.exttab.colMap.<span class="italic">column_name</span>.nullIfSpecifier</span></p>
</td>
<td class="cellalignment40" headers="d9651e4581 d9651e3999">
<p>This property is applied to a column identified by <span class="italic">column_name</span> in an external table. Optional. Overrides the property <code class="codeph">oracle.hadoop.exttab.nullIfSpecifier</code>.</p>
<p><span class="bold">Type:</span> string</p>
<p><span class="bold">Valid values:</span> same as for the property <code class="codeph">oracle.hadoop.exttab.nullIfSpecifier</code>.</p>
<p><span class="bold">Default values</span>: none.</p>
<p>This property applies only to Delimited Text sources.</p>
</td>
</tr>
<tr class="cellalignment26" id="GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDCEGBB">
<td class="cellalignment40" id="d9651e4616" headers="d9651e3997">
<p><span class="bold">oracle.hadoop.exttab.colMap.<span class="italic">column_name</span>.timestampMask</span></p>
</td>
<td class="cellalignment40" headers="d9651e4616 d9651e3999">
<p>Overrides the format mask for <span class="italic">column_name</span>. Optional.</p>
<p>The <span class="italic">column_name</span> is case-sensitive. It must exactly match the name of a column in a Hive table or a column listed in <code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDECECI">oracle.hadoop.exttab.columnNames</a></code>.</p>
<p><span class="bold">Default value</span>: The value of <code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDFABDH">oracle.hadoop.exttab.colMap.timestampMask</a></code>.</p>
<p><span class="bold">Valid values</span>: A datetime format model as described in the <a class="olink SQLRF00212" target="_blank" href="http://www.oracle.com/pls/topic/lookup?ctx=E93613-01&amp;id=SQLRF00212"><span class="italic">Oracle Database SQL Language Reference</span></a>. However, it cannot contain quotation marks.</p>
</td>
</tr>
<tr class="cellalignment26" id="GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDDBIID">
<td class="cellalignment40" id="d9651e4658" headers="d9651e3997">
<p><span class="bold">oracle.hadoop.exttab.colMap.<span class="italic">column_name</span>.timestampTZMask</span></p>
</td>
<td class="cellalignment40" headers="d9651e4658 d9651e3999">
<p>Overrides the format mask for <span class="italic">column_name</span>. Optional.</p>
<p>The <span class="italic">column_name</span> is case-sensitive. It must exactly match the name of a column in a Hive table or a column listed in <code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDECECI">oracle.hadoop.exttab.columnNames</a></code>.</p>
<p><span class="bold">Default value</span>: The value of <code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDCECEJ">oracle.hadoop.exttab.colMap.timestampTZMask</a></code>.</p>
<p><span class="bold">Valid values</span>: A datetime format model as described in <a class="olink SQLRF00212" target="_blank" href="http://www.oracle.com/pls/topic/lookup?ctx=E93613-01&amp;id=SQLRF00212"><span class="italic">Oracle Database SQL Language Reference</span></a>. However, it cannot contain quotation marks.</p>
</td>
</tr>
<tr class="cellalignment26" id="GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDFAGBD">
<td class="cellalignment40" id="d9651e4700" headers="d9651e3997">
<p><span class="bold">oracle.hadoop.exttab.columnCount</span></p>
</td>
<td class="cellalignment40" headers="d9651e4700 d9651e3999">
<p>Specifies the number of columns for the external table created from delimited text files. The column names are set to C1, C2,... C<span class="italic">n</span>, where <span class="italic">n</span> is value of this property.</p>
<p>This property is ignored if <code class="codeph">oracle.hadoop.exttab.columnNames</code> is set.</p>
<p>The <code class="codeph">-createTable</code> command uses this property when <code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDHIEEJ">oracle.hadoop.exttab.sourceType</a>=text</code>.</p>
<p>You must set either this property or <code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDECECI">oracle.hadoop.exttab.columnNames</a></code> when creating an external table from delimited text files.</p>
</td>
</tr>
<tr class="cellalignment26" id="GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDECECI">
<td class="cellalignment40" id="d9651e4737" headers="d9651e3997">
<p><span class="bold">oracle.hadoop.exttab.columnNames</span></p>
</td>
<td class="cellalignment40" headers="d9651e4737 d9651e3999">
<p>Specifies a comma-separated list of column names for an external table created from delimited text files. If this property is not set, then the column names are set to C1, C2,... C<span class="italic">n</span>, where <span class="italic">n</span> is the value of the <code class="codeph">oracle.hadoop.exttab.columnCount</code> property.</p>
<p>The column names are read as SQL identifiers: unquoted values are capitalized, and double-quoted values stay exactly as entered.</p>
<p>The <code class="codeph">-createTable</code> command uses this property when <code class="codeph">oracle.hadoop.exttab.sourceType=text</code>.</p>
<p>You must set either this property or <code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDFAGBD">oracle.hadoop.exttab.columnCount</a></code> when creating an external table from delimited text files.</p>
</td>
</tr>
<tr class="cellalignment26" id="GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__GUID-4451210D-DA10-4E29-A973-C81AE44252D2">
<td class="cellalignment40" id="d9651e4771" headers="d9651e3997">
<p><span class="bold">oracle.hadoop.exttab.dataCompressionCodec</span></p>
</td>
<td class="cellalignment40" headers="d9651e4771 d9651e3999">
<div class="infobox-note" id="GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__THISPROPERTYISDEPRECATED.OSCHDISCOV-98724A81">
<p class="notep1">Notice:</p>
This property is deprecated.
<p>OSCH discovers the compression code of each file at runtime. The dataset can contain both compressed and uncompressed files and can also contain files compressed with different codecs.</p>
</div>
<p>Specifies the name of the compression codec class used to decompress the data files. Specify this property when the data files are compressed. Optional.</p>
<p>This property specifies the class name of any compression codec that implements the <code class="codeph">org.apache.hadoop.io.compress.CompressionCodec</code> interface. This codec applies to all data files.</p>
<p>Several standard codecs are available in Hadoop, including the following:</p>
<ul style="list-style-type: disc;">
<li>
<p><span class="bold">bzip2</span>: <code class="codeph">org.apache.hadoop.io.compress.BZip2Codec</code></p>
</li>
<li>
<p><span class="bold">gzip</span>: <code class="codeph">org.apache.hadoop.io.compress.GzipCodec</code></p>
</li>
</ul>
<p><span class="bold">Default value</span>: None</p>
</td>
</tr>
<tr class="cellalignment26" id="GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDIICAB">
<td class="cellalignment40" id="d9651e4809" headers="d9651e3997">
<p><span class="bold">oracle.hadoop.exttab.dataPaths</span></p>
</td>
<td class="cellalignment40" headers="d9651e4809 d9651e3999">
<p>Specifies a comma-separated list of fully qualified HDFS paths. This property enables you to restrict the input by using special <a id="d9651e4816" class="indexterm-anchor"></a><a id="d9651e4818" class="indexterm-anchor"></a><a id="d9651e4822" class="indexterm-anchor"></a><a id="d9651e4824" class="indexterm-anchor"></a>pattern-matching characters in the path specification. See the following table. This property is required for the <code class="codeph">-createTable</code> and <code class="codeph">-publish</code> commands using Data Pump or delimited text files. The property is ignored for Hive data sources.</p>
<p>For example, to select all files in <code class="codeph">/data/s2/</code>, and only the <a id="d9651e4838" class="indexterm-anchor"></a>CSV files in <code class="codeph">/data/s7/</code>, <code class="codeph">/data/s8/</code>, and <code class="codeph">/data/s9/</code>, enter this expression:</p>
<pre dir="ltr">
/data/s2/,/data/s[7-9]/*.csv
</pre>
<p>The external table accesses the data contained in all listed files and all files in listed directories. These files compose a single data set.</p>
<p>The data set can contain <a id="d9651e4856" class="indexterm-anchor"></a><a id="d9651e4858" class="indexterm-anchor"></a>compressed files or uncompressed files, but not both.</p>
<div class="p">
<div class="tblformal" id="GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDJIFDE">
<p class="titleintable">Table 2-5 Pattern-Matching Characters</p>
<table class="cellalignment32" title="Pattern-Matching Characters" summary="Hadoop pattern matching">
<thead>
<tr class="cellalignment26">
<th class="cellalignment52" id="d9651e4872">Character</th>
<th class="cellalignment53" id="d9651e4875">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment26">
<td class="cellalignment54" id="d9651e4880" headers="d9651e4872">
<p>?</p>
</td>
<td class="cellalignment55" headers="d9651e4880 d9651e4875">
<p>Matches any single character</p>
</td>
</tr>
<tr class="cellalignment26">
<td class="cellalignment54" id="d9651e4887" headers="d9651e4872">
<p>*</p>
</td>
<td class="cellalignment55" headers="d9651e4887 d9651e4875">
<p>Matches zero or more characters</p>
</td>
</tr>
<tr class="cellalignment26">
<td class="cellalignment54" id="d9651e4894" headers="d9651e4872">
<p>[<span class="italic"><code class="codeph">abc</code></span>]</p>
</td>
<td class="cellalignment55" headers="d9651e4894 d9651e4875">
<p>Matches a single character from the character set {<span class="italic">a, b, c</span>}</p>
</td>
</tr>
<tr class="cellalignment26">
<td class="cellalignment54" id="d9651e4908" headers="d9651e4872">
<p>[<span class="italic"><code class="codeph">a-b</code></span>]</p>
</td>
<td class="cellalignment55" headers="d9651e4908 d9651e4875">
<p>Matches a single character from the character range {<span class="italic">a</span>...<span class="italic">b</span>}. The character <span class="italic">a</span> must be less than or equal to <span class="italic">b</span>.</p>
</td>
</tr>
<tr class="cellalignment26">
<td class="cellalignment54" id="d9651e4931" headers="d9651e4872">
<p>[^<span class="italic"><code class="codeph">a</code></span>]</p>
</td>
<td class="cellalignment55" headers="d9651e4931 d9651e4875">
<p>Matches a single character that is not from character set or range {<span class="italic">a</span>}. The carat (^) must immediately follow the left bracket.</p>
</td>
</tr>
<tr class="cellalignment26">
<td class="cellalignment54" id="d9651e4945" headers="d9651e4872">
<p>\<span class="italic"><code class="codeph">c</code></span></p>
</td>
<td class="cellalignment55" headers="d9651e4945 d9651e4875">
<p>Removes any special meaning of character <span class="italic">c</span>. The backslash is the escape character.</p>
</td>
</tr>
<tr class="cellalignment26">
<td class="cellalignment54" id="d9651e4958" headers="d9651e4872">
<p>{<span class="italic"><code class="codeph">ab</code></span>\,<span class="italic"><code class="codeph">cd</code></span>}</p>
</td>
<td class="cellalignment55" headers="d9651e4958 d9651e4875">
<p>Matches a string from the string set {<span class="italic">ab</span>, <span class="italic">cd</span>}. Precede the comma with an escape character (\) to remove the meaning of the comma as a path separator.</p>
</td>
</tr>
<tr class="cellalignment26">
<td class="cellalignment54" id="d9651e4979" headers="d9651e4872">
<p>{<span class="italic"><code class="codeph">ab</code></span>\,<span class="italic"><code class="codeph">c</code></span>{<span class="italic"><code class="codeph">de\</code></span>,<span class="italic"><code class="codeph">fh</code></span>}}</p>
</td>
<td class="cellalignment55" headers="d9651e4979 d9651e4875">
<p>Matches a string from the string set {<span class="italic">ab, cde, cfh</span>}. Precede the comma with an escape character (\) to remove the meaning of the comma as a path separator.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
</td>
</tr>
<tr class="cellalignment26" id="GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__GUID-582A3D34-3DF7-44BD-BC23-5262BF54E950">
<td class="cellalignment40" id="d9651e5005" headers="d9651e3997">
<p><span class="bold">oracle.hadoop.exttab.dataPathFilter</span></p>
</td>
<td class="cellalignment40" headers="d9651e5005 d9651e3999">
<p>Specifies the path filter class. This property is ignored for Hive data sources.</p>
<p>Oracle SQL Connector for HDFS uses a default filter to exclude hidden files, which begin with a dot or an underscore. If you specify another path filter class using the this property, then your filter acts in addition to the default filter. Thus, only visible files accepted by your filter are considered.</p>
</td>
</tr>
<tr class="cellalignment26" id="GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDIFAHG">
<td class="cellalignment40" id="d9651e5015" headers="d9651e3997">
<p><span class="bold">oracle.hadoop.exttab.defaultDirectory</span></p>
</td>
<td class="cellalignment40" headers="d9651e5015 d9651e3999">
<p>Specifies the default directory for the Oracle external table. This directory is used for all input and output files that do not explicitly name a directory object. In Oracle RAC, this directory must be on a shared directory accessible by all Oracle instances.</p>
<p><span class="bold">Valid value</span>: The name of an existing database directory</p>
<p>Unquoted names are changed to upper case. Double-quoted names are not changed; use them when case-sensitivity is desired. Single-quoted names are not allowed for default directory names.</p>
<p>The <code class="codeph">-createTable</code> command requires this property.</p>
</td>
</tr>
<tr class="cellalignment26" id="GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDGHEIG">
<td class="cellalignment40" id="d9651e5034" headers="d9651e3997">
<p><span class="bold">oracle.hadoop.exttab.fieldTerminator</span></p>
</td>
<td class="cellalignment40" headers="d9651e5034 d9651e3999">
<p>Specifies the field terminator for an external table when <code class="codeph">oracle.hadoop.exttab.sourceType=text</code>. Optional.</p>
<p><span class="bold">Default value</span>: , (comma)</p>
<p><span class="bold">Valid values</span>: A string in one of the following formats:</p>
<ul style="list-style-type: disc;">
<li>
<p>One or more regular printable characters; it cannot start with <code class="codeph">\u</code>. For example, <code class="codeph">\t</code> represents a tab.</p>
</li>
<li>
<p>One or more encoded characters in the format <code class="codeph">\u</code><span class="italic"><code class="codeph">HHHH</code></span>, where <span class="italic"><code class="codeph">HHHH</code></span> is a big-endian hexadecimal representation of the character in UTF-16. For example, <code class="codeph">\u0009</code> represents a tab. The hexadecimal digits are case insensitive.</p>
</li>
</ul>
<p>Do not mix the two formats.</p>
</td>
</tr>
<tr class="cellalignment26" id="GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDBEDAD">
<td class="cellalignment40" id="d9651e5081" headers="d9651e3997">
<p><span class="bold">oracle.hadoop.exttab.hive.columnType.*</span></p>
</td>
<td class="cellalignment40" headers="d9651e5081 d9651e3999">
<p>Maps a Hive data type to an Oracle data type. The property name identifies the Hive data type, and its value is an Oracle data type. The target columns in the external table are created with the Oracle data type indicated by this property.</p>
<p>When Hive <code class="codeph">TIMESTAMP</code> column is mapped to an Oracle <code class="codeph">TIMESTAMP</code> column, then the format mask is <code class="codeph">YYYY-MM-DD H24:MI:SS.FF.</code> When a Hive <code class="codeph">STRING</code> column is mapped to an Oracle <code class="codeph">TIMESTAMP</code> column, then the NLS parameter settings for the database are used by default. You can override these defaults by using either the <code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDFABDH">oracle.hadoop.exttab.colMap.timestampMask</a></code> or <code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDCECEJ">oracle.hadoop.exttab.colMap.timestampTZMask</a></code> properties.</p>
<p><span class="bold">Default values</span>: The following table lists the Hive column type properties and their default values.</p>
<p><span class="bold">Valid values</span>: See the valid values for <code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDJCADA">oracle.hadoop.exttab.colMap.columnType</a></code>.</p>
<div class="p">
<div class="tblformal" id="GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDHJBHI">
<p class="titleintable">Table 2-6 Hive Column Type Mapping Properties</p>
<table class="cellalignment32" title="Hive Column Type Mapping Properties" summary="Hive column type attributes and default values">
<thead>
<tr class="cellalignment26">
<th class="cellalignment56" id="d9651e5140">Property</th>
<th class="cellalignment57" id="d9651e5143">Default Value</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment26">
<td class="cellalignment58" id="d9651e5148" headers="d9651e5140">
<p><code class="codeph">oracle.hadoop.exttab.hive.columnType.BIGINT</code></p>
</td>
<td class="cellalignment59" headers="d9651e5148 d9651e5143">
<p><code class="codeph">INTEGER</code></p>
</td>
</tr>
<tr class="cellalignment26">
<td class="cellalignment58" id="d9651e5157" headers="d9651e5140">
<p><code class="codeph">oracle.hadoop.exttab.hive.columnType.BOOLEAN</code></p>
</td>
<td class="cellalignment59" headers="d9651e5157 d9651e5143">
<p><code class="codeph">VARCHAR2</code></p>
</td>
</tr>
<tr class="cellalignment26">
<td class="cellalignment58" id="d9651e5166" headers="d9651e5140">
<p><code class="codeph">oracle.hadoop.exttab.hive.columnType.DECIMAL</code></p>
</td>
<td class="cellalignment59" headers="d9651e5166 d9651e5143">
<p><code class="codeph">NUMBER</code></p>
</td>
</tr>
<tr class="cellalignment26">
<td class="cellalignment58" id="d9651e5175" headers="d9651e5140">
<p><code class="codeph">oracle.hadoop.exttab.hive.columnType.DOUBLE</code></p>
</td>
<td class="cellalignment59" headers="d9651e5175 d9651e5143">
<p><code class="codeph">NUMBER</code></p>
</td>
</tr>
<tr class="cellalignment26">
<td class="cellalignment58" id="d9651e5184" headers="d9651e5140">
<p><code class="codeph">oracle.hadoop.exttab.hive.columnType.FLOAT</code></p>
</td>
<td class="cellalignment59" headers="d9651e5184 d9651e5143">
<p><code class="codeph">NUMBER</code></p>
</td>
</tr>
<tr class="cellalignment26">
<td class="cellalignment58" id="d9651e5193" headers="d9651e5140">
<p><code class="codeph">oracle.hadoop.exttab.hive.columnType.INT</code></p>
</td>
<td class="cellalignment59" headers="d9651e5193 d9651e5143">
<p><code class="codeph">INTEGER</code></p>
</td>
</tr>
<tr class="cellalignment26">
<td class="cellalignment58" id="d9651e5202" headers="d9651e5140">
<p><code class="codeph">oracle.hadoop.exttab.hive.columnType.SMALLINT</code></p>
</td>
<td class="cellalignment59" headers="d9651e5202 d9651e5143">
<p><code class="codeph">INTEGER</code></p>
</td>
</tr>
<tr class="cellalignment26">
<td class="cellalignment58" id="d9651e5211" headers="d9651e5140">
<p><code class="codeph">oracle.hadoop.exttab.hive.columnType.STRING</code></p>
</td>
<td class="cellalignment59" headers="d9651e5211 d9651e5143">
<p><code class="codeph">VARCHAR2</code></p>
</td>
</tr>
<tr class="cellalignment26">
<td class="cellalignment58" id="d9651e5220" headers="d9651e5140">
<p><code class="codeph">oracle.hadoop.exttab.hive.columnType.TIMESTAMP</code></p>
</td>
<td class="cellalignment59" headers="d9651e5220 d9651e5143">
<p><code class="codeph">TIMESTAMP</code></p>
</td>
</tr>
<tr class="cellalignment26">
<td class="cellalignment58" id="d9651e5229" headers="d9651e5140">
<p><code class="codeph">oracle.hadoop.exttab.hive.columnType.TINYINT</code></p>
</td>
<td class="cellalignment59" headers="d9651e5229 d9651e5143">
<p><code class="codeph">INTEGER</code></p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
</td>
</tr>
<tr class="cellalignment26" id="GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDBGBEC">
<td class="cellalignment40" id="d9651e5239" headers="d9651e3997">
<p><span class="bold">oracle.hadoop.exttab.hive.databaseName</span></p>
</td>
<td class="cellalignment40" headers="d9651e5239 d9651e3999">
<p>Specifies the name of a Hive database that contains the input data table.</p>
<p>The <code class="codeph">-createTable</code> command requires this property when <code class="codeph">oracle.hadoop.exttab.sourceType=hive</code>.</p>
</td>
</tr>
<tr class="cellalignment26" id="GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__BABBFCCI">
<td class="cellalignment40" id="d9651e5255" headers="d9651e3997">
<p><span class="bold">oracle.hadoop.exttab.hive.partitionFilter</span></p>
</td>
<td class="cellalignment40" headers="d9651e5255 d9651e3999">
<p>Specifies a valid HiveQL expression that is used to filter the source Hive table partitions. This property is ignored if the table is not partitioned.</p>
<p><span class="bold">Type</span>: String</p>
<p><span class="bold">Default value</span>: None. All partitions of the Hive table are mapped to external tables.</p>
<p><span class="bold">Valid values</span>: A valid HiveQL expression.</p>
<p><span class="bold">Description</span>: Specifies a valid HiveQL expression that is used to filter the source Hive table partitions. This property is ignored if the Hive table is not partitioned. Including other columns does not raise an error, but unintended consequences can result. Oracle recommends that you exclude other columns.</p>
<p>The expression must conform to the following restrictions:</p>
<ul style="list-style-type: disc;">
<li>
<p>Selects partitions and not individual records inside the partitions.</p>
</li>
<li>
<p>Does not include columns that are not used to partition the table, because they might cause unintended consequences.</p>
</li>
<li>
<p>Does not include subqueries.</p>
</li>
<li>
<p>Does not include user-defined functions (UDFs). Built-in functions are supported.</p>
</li>
<li>
<p>Does not support Hive variable name spaces (such as <code class="codeph">env:</code>, <code class="codeph">system:</code>, <code class="codeph">hiveconf:</code>, and <code class="codeph">hivevar:</code>) because Hive variable expansion is disabled when OSCH processes this string. Expand all variables in Hive CLI before setting this property. For example:</p>
<div class="p">
<pre dir="ltr">
CREATE VIEW <span class="italic">view_name</span> AS SELECT * from <span class="italic">database.table_name</span> WHERE <span class="italic">expression</span>;
DESCRIBE FORMATTED <span class="italic">view_name</span>;
</pre></div>
<p>The View Original Text field contains the query with all variables expanded. Copy the <code class="codeph">where</code> clause, starting after <code class="codeph">where</code>.</p>
<p>Since all variable expansions are resolved at the Hadoop level, define any Hadoop variables used in the expression using generic options (<code class="codeph">-D</code> and <code class="codeph">-conf</code>). Use the Hive CLI to test the expression and ensure that it returns the expected results. The following examples assume a source table defined with this command:</p>
</li>
</ul>
<div class="p">
<pre dir="ltr">
CREATE TABLE t(c string)
   PARTITIONED BY (p1 string, p2 int, p3 boolean, p4 string, p5 timestamp);
</pre></div>
<p><span class="bold">Example 1: Nested Expressions</span></p>
<div class="p">
<pre dir="ltr">
p1 like 'abc%' or (p5 &gt;= '2010-06-20' and p5 &lt;= '2010-07-03')
</pre></div>
<p><span class="bold">Example 2: Built-in Functions</span></p>
<div class="p">
<pre dir="ltr">
year(p5) = 2014
</pre></div>
<p><span class="bold">Example 3: Bad Usage: Columns That Are Not Used to Partition the Table</span></p>
<p>These examples show that using c, a column that is not used to partition the table, is unnecessary and can cause unexpected results.</p>
<p>This example is equivalent to <code class="codeph">p2 &gt; 35</code>:</p>
<pre dir="ltr">
p2 &gt; 35 and c like 'abc%'
</pre>
<p>This example loads all partitions. All partitions could contain <code class="codeph">c like 'abc%</code>, so partitions are filtered out:</p>
<pre dir="ltr">
p2 &gt; 35 or c like 'abc%'
</pre></td>
</tr>
<tr class="cellalignment26">
<td class="cellalignment40" id="d9651e5375" headers="d9651e3997">
<p><span class="bold">oracle.hadoop.exttab.hive.refreshTables</span></p>
</td>
<td class="cellalignment40" headers="d9651e5375 d9651e3999">
<p>Only applies when the source is a Hive partitioned table, is ignored otherwise. This property specifies whether the <code class="codeph">-publish</code> operation should refresh HDFS data paths in existing external tables when adding new external tables and views for new Hive partitions in the source.</p>
<p>Set this property to <code class="codeph">TRUE</code> to enable refresh. Note that enabling such a refresh can slow down the <code class="codeph">-publish</code> operation. If the existing Hive partitions in the source table have not changed, set the property to <code class="codeph">FALSE</code>.</p>
<p><span class="bold">Default value</span>: <code class="codeph">FALSE</code></p>
</td>
</tr>
<tr class="cellalignment26" id="GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDGEEHE">
<td class="cellalignment40" id="d9651e5403" headers="d9651e3997">
<p><span class="bold">oracle.hadoop.exttab.hive.tableName</span></p>
</td>
<td class="cellalignment40" headers="d9651e5403 d9651e3999">
<p>Specifies the name of an existing Hive table.</p>
<p>The <code class="codeph">-createTable</code> command requires this property when <code class="codeph">oracle.hadoop.exttab.sourceType=hive</code>.</p>
</td>
</tr>
<tr class="cellalignment26">
<td class="cellalignment40" id="d9651e5419" headers="d9651e3997">
<p><span class="bold">oracle.hadoop.exttab.hive.deleteObsoleteTables</span></p>
</td>
<td class="cellalignment40" headers="d9651e5419 d9651e3999">
<p>Specifies whether the <code class="codeph">-publish</code> operation should drop the views and external tables that do not map to&nbsp;any partition in the partitioned Hive table. &nbsp; The property only applies when the source is a Hive-partitioned table and is otherwise ignored. This property is also ignored if the original <code class="codeph">-createTable</code> operation for the Hive partitioned source table included the oracle.hadoop.exttab.hive.partitionFilter property</p>
<p>Set this property to <code class="codeph">TRUE</code> to enable dropping obsolete objects.</p>
<p><span class="bold">Default value</span>: <code class="codeph">FALSE</code></p>
</td>
</tr>
<tr class="cellalignment26" id="GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDDEDEC">
<td class="cellalignment40" id="d9651e5444" headers="d9651e3997">
<p><span class="bold">oracle.hadoop.exttab.initialFieldEncloser</span></p>
</td>
<td class="cellalignment40" headers="d9651e5444 d9651e3999">
<p>Specifies the initial field encloser for an external table created from delimited text files. Optional.</p>
<p><span class="bold">Default value</span>: null; no enclosers are specified for the external table definition.</p>
<p>The <code class="codeph">-createTable</code> command uses this property when <code class="codeph">oracle.hadoop.exttab.sourceType=text</code>.</p>
<p><span class="bold">Valid values</span>: A string in one of the following formats:</p>
<ul style="list-style-type: disc;">
<li>
<p>One or more regular printable characters; it cannot start with <code class="codeph">\u</code>.</p>
</li>
<li>
<p>One or more encoded characters in the format <code class="codeph">\u</code><span class="italic"><code class="codeph">HHHH</code></span>, where <span class="italic"><code class="codeph">HHHH</code></span> is a big-endian hexadecimal representation of the character in UTF-16. The hexadecimal digits are case insensitive.</p>
</li>
</ul>
<p>Do not mix the two formats.</p>
</td>
</tr>
<tr class="cellalignment26" id="GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDHIGIF">
<td class="cellalignment40" id="d9651e5490" headers="d9651e3997">
<p><span class="bold">oracle.hadoop.exttab.locationFileCount</span></p>
</td>
<td class="cellalignment40" headers="d9651e5490 d9651e3999">
<p>Specifies the desired number of location files for the external table. Applicable only to non-Data-Pump files.</p>
<p><span class="bold">Default value</span>: 4</p>
<p>This property is ignored if the data files are in Data Pump format. Otherwise, the number of location files is the lesser of:</p>
<ul style="list-style-type: disc;">
<li>
<p>The number of data files</p>
</li>
<li>
<p>The value of this property</p>
</li>
</ul>
<p>At least one location file is created.</p>
<p>See <span class="q">"<a href="osch.htm#GUID-1D4B2FFF-B2FA-4C2A-9DCF-B6EC4283FB09">Enabling Parallel Processing</a>"</span> for more information about the number of location files.</p>
</td>
</tr>
<tr class="cellalignment26" id="GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDHHJCA">
<td class="cellalignment40" id="d9651e5519" headers="d9651e3997">
<p><span class="bold">oracle.hadoop.exttab.logDirectory</span></p>
</td>
<td class="cellalignment40" headers="d9651e5519 d9651e3999">
<p>Specifies a database directory where log files and bad files are stored. The file names are the default values used by external tables. For example, the name of a log file is the table name followed by <code class="codeph">_%p.log</code>.</p>
<p>This is an optional property for the <code class="codeph">-createTable</code> command.</p>
<p>These are the default file name extensions:</p>
<ul style="list-style-type: disc;">
<li>
<p>Log files: <code class="codeph">log</code></p>
</li>
<li>
<p>Bad files: <code class="codeph">bad</code></p>
</li>
</ul>
<p><span class="bold">Valid values</span>: An existing Oracle directory object name.</p>
<p>Unquoted names are changed to uppercase. Quoted names are not changed. The following table provides examples of how values are transformed.</p>
<div class="p">
<div class="tblformal" id="GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDIDEED">
<p class="titleintable">Table 2-7 Examples of Quoted and Unquoted Values</p>
<table class="cellalignment32" title="Examples of Quoted and Unquoted Values" summary="Interpretation of quotation marks in syntax">
<thead>
<tr class="cellalignment26">
<th class="cellalignment60" id="d9651e5564">Specified Value</th>
<th class="cellalignment61" id="d9651e5567">Interpreted Value</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment26">
<td class="cellalignment62" id="d9651e5572" headers="d9651e5564">
<p><code class="codeph">my_log_dir:'sales_tab_%p.log'</code></p>
</td>
<td class="cellalignment63" headers="d9651e5572 d9651e5567">
<p><code class="codeph">MY_LOG_DIR/sales_tab_%p.log</code></p>
</td>
</tr>
<tr class="cellalignment26">
<td class="cellalignment62" id="d9651e5582" headers="d9651e5564">
<p><code class="codeph">'my_log_dir':'sales_tab_%p.log'</code></p>
</td>
<td class="cellalignment63" headers="d9651e5582 d9651e5567">
<p><code class="codeph">my_log_dir/sales_tab_%p.log</code></p>
</td>
</tr>
<tr class="cellalignment26">
<td class="cellalignment62" id="d9651e5591" headers="d9651e5564">
<p><code class="codeph">"my_log_dir":"sales_tab_%p.log"</code></p>
</td>
<td class="cellalignment63" headers="d9651e5591 d9651e5567">
<p><code class="codeph">my_log_dir/sales_tab_%p.log</code></p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
</td>
</tr>
<tr class="cellalignment26">
<td class="cellalignment40" id="d9651e5600" headers="d9651e3997">
<p id="GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__ORACLE.HADOOP.EXTTAB.NULLIFSPECIFIE-7638F908"><span class="bold">oracle.hadoop.exttab.nullIfSpecifier</span></p>
</td>
<td class="cellalignment40" headers="d9651e5600 d9651e3999">
<p>Specifies the NULLIF clause of the external table definition. Optional.</p>
<p>This property is applied to all the columns in an external table.</p>
<p><span class="bold">Type:</span> string</p>
<p><span class="bold">Valid values:</span> a string in following formats:</p>
<ul style="list-style-type: disc;">
<li>
<p>One or more regular, printable characters, for example:<code class="codeph">\N</code></p>
</li>
<li>
<p>One or more encoded characters in the format <code class="codeph">\uHHHH</code>, where HHHH is a big-endian hexadecimal representation of the character in UTF-16. For example: <code class="codeph">\u000A</code> represents a newline. The hexadecimal digits are case insensitive.</p>
</li>
</ul>
<p><span class="bold">Default values:</span> none.</p>
<p>This property applies only to Delimited Text sources.</p>
<div class="infoboxnotealso" id="GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__EXAMPLE21.THISEXAMPLESHOWSHOWTOUSEN-98725040">
<p class="notep1">See Also:</p>
<a href="osch.htm#GUID-24900721-3F45-4E57-B7DF-51B1BBEE8B23__CHDCDFFJ">Example 2-1</a>. This example shows how to use <code class="codeph">nullIfSpecifier</code> when accessing HDFS data files From Oracle Database.</div>
</td>
</tr>
<tr class="cellalignment26" id="GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__GUID-4DC6FF04-153F-4B06-BFEC-0696FB4D11C3">
<td class="cellalignment40" id="d9651e5648" headers="d9651e3997">
<p><span class="bold">oracle.hadoop.exttab.preprocessorDirectory</span></p>
</td>
<td class="cellalignment40" headers="d9651e5648 d9651e3999">
<p>Specifies the database directory for the preprocessor. The file-system directory must contain the <code class="codeph">hdfs_stream</code> script.</p>
<p><span class="bold">Default value</span>: <code class="codeph">OSCH_BIN_PATH</code></p>
<p>The preprocessor directory is used in the <code class="codeph">PREPROCESSOR</code> clause of the external table.</p>
</td>
</tr>
<tr class="cellalignment26">
<td class="cellalignment40" id="d9651e5670" headers="d9651e3997">
<p><span class="bold">oracle.hadoop.exttab.preprocessorScript</span></p>
</td>
<td class="cellalignment40" headers="d9651e5670 d9651e3999">
<p>Specifies the name of the preprocessor script for the external table.</p>
<p><span class="bold">Default value</span>: <code class="codeph">hdfs_stream</code></p>
<p>The preprocessor script name is used in the <code class="codeph">PREPROCESSOR</code> clause of the external table. This property is required only for Oracle Database running on Microsoft Windows platforms and is optional for all other Oracle Database platforms. On Microsoft Windows, the value must be set to <code class="codeph">hdfs_stream.cmd</code>.</p>
</td>
</tr>
<tr class="cellalignment26" id="GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDCJJIE">
<td class="cellalignment40" id="d9651e5693" headers="d9651e3997">
<p><span class="bold">oracle.hadoop.exttab.recordDelimiter</span></p>
</td>
<td class="cellalignment40" headers="d9651e5693 d9651e3999">
<p>Specifies the record delimiter for an external table created from delimited text files. Optional.</p>
<p><span class="bold">Default value</span>: <code class="codeph">\n</code></p>
<p>The <code class="codeph">-createTable</code> command uses this property when <code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDHIEEJ">oracle.hadoop.exttab.sourceType</a>=text</code>.</p>
<p><span class="bold">Valid values</span>: A string in one of the following formats:</p>
<ul style="list-style-type: disc;">
<li>
<p>One or more regular printable characters; it cannot start with <code class="codeph">\u.</code></p>
</li>
<li>
<p>One or more encoded characters in the format <code class="codeph">\u</code><span class="italic"><code class="codeph">HHHH</code></span>, where <span class="italic"><code class="codeph">HHHH</code></span> is a big-endian hexadecimal representation of the character in UTF-16. The hexadecimal digits are case insensitive.</p>
</li>
</ul>
<p>Do not mix the two formats.</p>
</td>
</tr>
<tr class="cellalignment26" id="GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDHIEEJ">
<td class="cellalignment40" id="d9651e5743" headers="d9651e3997">
<p><span class="bold">oracle.hadoop.exttab.sourceType</span></p>
</td>
<td class="cellalignment40" headers="d9651e5743 d9651e3999">
<p>Specifies the type of source files. The <code class="codeph">-createTable</code> and <code class="codeph">-publish</code> operations require the value of this property.</p>
<p><span class="bold">Default value</span>: <code class="codeph">text</code></p>
<p><span class="bold">Valid values</span>: <code class="codeph">datapump</code>, <code class="codeph">hive</code>, or <code class="codeph">text</code></p>
</td>
</tr>
<tr class="cellalignment26" id="GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__GUID-7574C5D3-E58F-4EFD-92FF-F58C2EC6724C">
<td class="cellalignment40" id="d9651e5775" headers="d9651e3997">
<p><span class="bold">oracle.hadoop.exttab.stringSizes</span></p>
</td>
<td class="cellalignment40" headers="d9651e5775 d9651e3999">
<p>Indicates whether the lengths specified for character strings are bytes or characters. This value is used in the <code class="codeph">STRING SIZES ARE IN</code> clause of the external table. Use characters when loading multibyte character sets. See <a class="olink SUTIL1392" target="_blank" href="http://www.oracle.com/pls/topic/lookup?ctx=E93613-01&amp;id=SUTIL1392"><span class="italic">Oracle Database Utilities</span></a>.</p>
<p><span class="bold">Default value</span>: <code class="codeph">BYTES</code></p>
<p><span class="bold">Valid values</span>: <code class="codeph">BYTES</code> or <code class="codeph">CHARACTERS</code></p>
</td>
</tr>
<tr class="cellalignment26" id="GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CBHGEHIE">
<td class="cellalignment40" id="d9651e5806" headers="d9651e3997">
<p><span class="bold">oracle.hadoop.exttab.createLogFiles</span></p>
</td>
<td class="cellalignment40" headers="d9651e5806 d9651e3999">
<p>Specifies whether the log files should be created when the external tables are queried. Oracle recommends enabling log file creation during development and disabling log file creation during production for best performance.</p>
<p><span class="bold">Default value</span>: <code class="codeph">TRUE</code></p>
<p>Log files are created by default. To stop creating log files you must drop the table, set this property to <code class="codeph">FALSE</code>, and then recreate the table. Use the -drop and -createTable commands to drop and recreate the table.</p>
</td>
</tr>
<tr class="cellalignment26">
<td class="cellalignment40" id="d9651e5825" headers="d9651e3997">
<p><span class="bold">oracle.hadoop.exttab.printVerbose</span></p>
</td>
<td class="cellalignment40" headers="d9651e5825 d9651e3999">
<p>Specifies whether to print verbose reports on the console during a <code class="codeph">-publish</code> operation. Set the value to <code class="codeph">TRUE</code> to see verbose reports on the console. This property should only be used for debugging.</p>
<p><span class="bold">Default value</span>: <code class="codeph">FALSE</code></p>
</td>
</tr>
<tr class="cellalignment26" id="GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CBHIJJHE">
<td class="cellalignment40" id="d9651e5845" headers="d9651e3997">
<p><span class="bold">oracle.hadoop.exttab.createBadFiles</span></p>
</td>
<td class="cellalignment40" headers="d9651e5845 d9651e3999">
<p>Specifies whether bad files should be created when the external tables are queried. Bad files contain information on rows with bad data. Bad files are created only when there is bad data. Oracle recommends creating bad files.</p>
<p><span class="bold">Default value</span>: <code class="codeph">TRUE</code></p>
<p>Bad files are created by default. To stop creating bad files you must drop the table, set this property to <code class="codeph">FALSE</code>, and then recreate the table. Use the -drop and -createTable commands to drop and recreate the table.</p>
<p>This property applies only to Hive and Delimited Text sources.</p>
</td>
</tr>
<tr class="cellalignment26">
<td class="cellalignment40" id="d9651e5866" headers="d9651e3997">
<p id="GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__ORACLE.HADOOP.EXTTAB.LOGFILEFORMATU-0F365550"><span class="bold">oracle.hadoop.exttab.logFileFormatUsePercentA</span></p>
</td>
<td class="cellalignment40" headers="d9651e5866 d9651e3999">
<p>Indicates whether an external table log file name contains '%a'. This is an optional property for the <code class="codeph">-createTable</code> command.</p>
<p><span class="bold">Valid values</span>: <code class="codeph">TRUE</code>,<code class="codeph">FALSE</code></p>
<p><span class="bold">Default value</span>: <code class="codeph">FALSE</code></p>
<p>The default log file name is<code class="codeph">&lt;<span class="codeinlineitalic">external_table_name</span>&gt;_%p.log</code>. If the value is <code class="codeph">TRUE</code>, this generates deterministic log file names of the form <code class="codeph">&lt;<span class="codeinlineitalic">external_table_name</span>&gt;_%a.log</code>. For example: '<code class="codeph">mytable_000.log</code>', and '<code class="codeph">mytable_001.log</code>'.</p>
<p>Diagnostic external tables can be created over the <code class="codeph">.log</code> files in order to determine whether the load was successful or to review the reason for the rejected rows.</p>
<div class="infoboxnotealso" id="GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__LOGFILENOLOGFILEINORACLEDATABASEUTI-98725811">
<p class="notep1">See Also:</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__ORACLE.HADOOP.EXTTAB.BADFILEFORMATU-0F368286">oracle.hadoop.exttab.badFileFormatUsePercentA</a></p>
</li>
<li>
<p><a href="http://docs.oracle.com/database/121/SUTIL/GUID-D4313319-B751-4AA5-B92B-DF6990FD10A2.htm#SUTIL1396" target="_blank">LOGFILE | NOLOGFILE</a> in <span class="italic">Oracle Database Utilities</span>.</p>
</li>
</ul>
</div>
</td>
</tr>
<tr class="cellalignment26" id="GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDGEECH">
<td class="cellalignment40" id="d9651e5935" headers="d9651e3997">
<p><span class="bold">oracle.hadoop.exttab.tableName</span></p>
</td>
<td class="cellalignment40" headers="d9651e5935 d9651e3999">
<p>Specifies the metadata table for partitioned Hive tables or schema-qualified name of the external table for all other data sources, in this format:</p>
<p><span class="italic">schemaName</span>.<span class="italic">tableName</span></p>
<p>If you omit <span class="italic">schemaName</span>, then the schema name defaults to the connection user name.</p>
<p><span class="bold">Default value</span>: none</p>
<p>Required property for all operations.</p>
</td>
</tr>
<tr class="cellalignment26" id="GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDDIDBJ">
<td class="cellalignment40" id="d9651e5960" headers="d9651e3997">
<p><span class="bold">oracle.hadoop.exttab.trailingFieldEncloser</span></p>
</td>
<td class="cellalignment40" headers="d9651e5960 d9651e3999">
<p>Specifies the trailing field encloser for an external table created from delimited text files. Optional.</p>
<p><span class="bold">Default value</span>: null; defaults to the value of <code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDDEDEC">oracle.hadoop.exttab.initialFieldEncloser</a></code></p>
<p>The <code class="codeph">-createTable</code> command uses this property when <code class="codeph"><a href="osch.htm#GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDHIEEJ">oracle.hadoop.exttab.sourceType</a>=text</code>.</p>
<p><span class="bold">Valid values</span>: A string in one of the following formats:</p>
<ul style="list-style-type: disc;">
<li>
<p>One or more regular printable characters; it cannot start with <code class="codeph">\u.</code></p>
</li>
<li>
<p>One or more encoded characters in the format <code class="codeph">\u</code><span class="italic"><code class="codeph">HHHH</code></span>, where <span class="italic"><code class="codeph">HHHH</code></span> is a big-endian hexadecimal representation of the character in UTF-16. The hexadecimal digits are case insensitive.</p>
</li>
</ul>
<p>Do not mix the two formats.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
<!-- class="section" -->
<div class="section" id="GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDBJCCH">
<p class="subhead3">Connections using url, user, and password Properties</p>
<p>The url, user, and password properties provide a distinct connection method. Do not mix these properties with those required for a connection using an Oracle Wallet.</p>
<div class="tblformalwide" id="GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__GUID-5A06F7B0-A72D-4394-A5B9-5BFAB6549988">
<table class="cellalignment47" summary="Describes the connection properties of Oracle SQL Connector for HDFS using built-in url, user, and password properties. This is an alternative to using Oracle Wallet.">
<thead>
<tr class="cellalignment26">
<th class="cellalignment64" id="d9651e6024">Property</th>
<th class="cellalignment64" id="d9651e6026">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment26" id="GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDCIHEA">
<td class="cellalignment26" id="d9651e6030" headers="d9651e6024">
<p><span class="bold">oracle.hadoop.connection.url</span></p>
</td>
<td class="cellalignment26" headers="d9651e6030 d9651e6026">
<p>Specifies the database connection string in the thin-style service name format:</p>
<pre dir="ltr">
jdbc:oracle:thin:@//<span class="italic">host_name</span>:<span class="italic">port</span>/<span class="italic">service_name</span>
</pre>
<p>If you are unsure of the service name, then enter this SQL command as a privileged user:</p>
<pre dir="ltr">
SQL&gt; show parameter service
</pre>
<p>This property takes precedence over all other connection properties.</p>
<p><span class="bold">Default value</span>: Not defined</p>
<p><span class="bold">Valid values</span>: A string</p>
</td>
</tr>
<tr class="cellalignment26" id="GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CHDHJACG">
<td class="cellalignment26" id="d9651e6063" headers="d9651e6024">
<p><span class="bold">oracle.hadoop.connection.user</span></p>
</td>
<td class="cellalignment26" headers="d9651e6063 d9651e6026">
<p>Specifies an Oracle database log-in name. The <code class="codeph">externalTable</code> tool prompts for a password if the oracle.hadoop.connection.password is not specified .</p>
<p><span class="bold">Default value</span>: Not defined</p>
<p><span class="bold">Valid values</span>: A string</p>
</td>
</tr>
<tr class="cellalignment26">
<td class="cellalignment26" id="d9651e6082" headers="d9651e6024">
<p><span class="bold">oracle.hadoop.connection.password</span></p>
</td>
<td class="cellalignment26" headers="d9651e6082 d9651e6026">
<p>Password for the Oracle Database user. Oracle recommends that you do not use this property to store a clear text password outside of non-sensitive test or demo environments. You can force a password prompt/response by excluding the password property from the connection. In that case, the externalTable tool prompts for the password. If you require a connection with no prompt/response, use the Oracle Wallet connection method described in the next section instead.</p>
<p><span class="bold">Default value</span>: Not defined.</p>
<p><span class="bold">Valid values</span>: A string</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" --></div>
<!-- class="section" -->
<div class="section">
<p class="subhead3">Connections Using Oracle Wallet</p>
<p>When using Oracle Wallet as an external password store, set the properties shown in the following table.</p>
<div class="tblformal" id="GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__GUID-59BF1E61-E8F8-413C-B87E-0EECCAC476FF">
<p class="titleintable">Table 2-8 Properties Required for Connections Using Oracle Wallet</p>
<table class="cellalignment65" title="Properties Required for Connections Using Oracle Wallet" summary="The first column provides the properties required by Oracle Wallet. The second column provides the default configuration and valid values.">
<thead>
<tr class="cellalignment26">
<th class="cellalignment64" id="d9651e6112">Property</th>
<th class="cellalignment64" id="d9651e6114">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment26">
<td class="cellalignment26" id="d9651e6118" headers="d9651e6112">
<p><span class="bold">oracle.hadoop.connection.tnsEntryName</span></p>
</td>
<td class="cellalignment26" headers="d9651e6118 d9651e6114">
<p>Specifies a TNS entry name defined in the tnsnames.ora file.</p>
<p>This property is used with the <code class="codeph">oracle.hadoop.connection.tns_admin</code> property.</p>
<p><span class="bold">Default value</span>: Not defined</p>
<p><span class="bold">Valid values</span>: A string</p>
</td>
</tr>
<tr class="cellalignment26">
<td class="cellalignment26" id="d9651e6139" headers="d9651e6112">
<p><span class="bold">oracle.hadoop.connection.tns_admin</span></p>
</td>
<td class="cellalignment26" headers="d9651e6139 d9651e6114">
<p>Specifies the directory that contains the tnsnames.ora file. Define this property to use transparent network substrate (TNS) entry names in database connection strings. When using TNSNames with the JDBC thin driver, you must set either this property or the Java <code class="codeph">oracle.net.tns_admin</code> property. When both are set, this property takes precedence over <code class="codeph">oracle.net.tns_admin</code>.</p>
<p>This property must be set when using Oracle Wallet as an external password store.</p>
<p><span class="bold">Default value</span>: The value of the Java <code class="codeph">oracle.net.tns_admin</code> system property</p>
<p><span class="bold">Valid values</span>: A string</p>
</td>
</tr>
<tr class="cellalignment26">
<td class="cellalignment26" id="d9651e6166" headers="d9651e6112">
<p><span class="bold">oracle.hadoop.connection.wallet_location</span></p>
</td>
<td class="cellalignment26" headers="d9651e6166 d9651e6114">
<p>Specifies a file path to an Oracle Wallet directory where the connection credential is stored.</p>
<p><span class="bold">Default value</span>: Not defined</p>
<p><span class="bold">Valid values</span>: A string</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<div class="infobox-tip" id="GUID-E075C432-FB5C-4EFF-836C-9BF06E845C15__CONNECTIONSUSINGORACLEWALLETCANACCO-98725D73">
<p class="notep1">Tip:</p>
Connections using Oracle Wallet can accommodate many TNS entries and are therefore recommended over those using the user, password and url properties which are restricted to a single machine/port/servicename combination.
<p>For a simple step-by-step demonstration, see the posting <a href="https://blogs.oracle.com/bigdataconnectors/entry/using_oracle_sql_connector_for" target="_blank">Using Oracle SQL Connector for HDFS with Oracle Wallet</a> in the <a href="https://blogs.oracle.com/bigdataconnectors/" target="_blank">Connecting Hadoop With Oracle</a> blog.</p>
</div>
</div>
<!-- class="section" --></div>
</div>
</div>
<a id="BDCUG139"></a>
<div class="props_rev_3"><a id="GUID-DAD4017F-D8C8-467D-8B3F-BF307C49B7F6"></a>
<h2 id="BDCUG-GUID-DAD4017F-D8C8-467D-8B3F-BF307C49B7F6" class="sect2"><span class="enumeration_section">2.12</span> Performance Tips for Querying Data in HDFS</h2>
<div>
<div class="section">
<p><a id="d9651e6214" class="indexterm-anchor"></a><a id="d9651e6216" class="indexterm-anchor"></a><a id="d9651e6220" class="indexterm-anchor"></a>Parallel processing is extremely important when you are working with large volumes of data. When you use external tables, always enable parallel query with this SQL command:</p>
<pre dir="ltr">
<a id="d9651e6224" class="indexterm-anchor"></a>ALTER SESSION ENABLE PARALLEL QUERY;
</pre>
<p>Before loading the data into an Oracle database from the external files created by Oracle SQL Connector for HDFS, enable parallel DDL:</p>
<pre dir="ltr">
ALTER SESSION ENABLE PARALLEL DDL;
</pre>
<p>Before inserting data into an existing database table, enable parallel DML with this SQL command:</p>
<pre dir="ltr">
ALTER SESSION ENABLE PARALLEL DML;
</pre>
<p>Hints such as <code class="codeph">APPEND</code> and <code class="codeph">PQ_DISTRIBUTE</code> also improve performance when you are inserting data.</p>
<p>See<a href="https://support.oracle.com/epmos/faces/DocumentDisplay?_afrLoop=393560290853415&amp;id=2111850.1&amp;_adf.ctrl-state=xfdztztm_77" target="_blank">My Oracle Support Document 2111850.1</a> for additional details and examples for improving performance.</p>
</div>
<!-- class="section" --></div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment25">
<tr>
<td class="cellalignment66">
<table class="cellalignment30">
<tr>
<td class="cellalignment29"><a href="connectors-part.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment29"><a href="olh.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2011, 2018, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment68">
<table class="cellalignment28">
<tr>
<td class="cellalignment29"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment29"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment29"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment29"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment29"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
</body>
</html>
